
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>QEMU Storage Daemon QMP Reference Manual &#8212; QEMU  documentation</title>
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/language_data.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Vhost-user Protocol" href="vhost-user.html" />
    <link rel="prev" title="QEMU QMP Reference Manual" href="qemu-qmp-ref.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="qemu-storage-daemon-qmp-reference-manual">
<h1>QEMU Storage Daemon QMP Reference Manual<a class="headerlink" href="#qemu-storage-daemon-qmp-reference-manual" title="Permalink to this headline">¶</a></h1>
<div class="section" id="qapidoc-0">
<h2>Block devices<a class="headerlink" href="#qapidoc-0" title="Permalink to this headline">¶</a></h2>
<div class="section" id="qapidoc-1">
<h3>Block core (VM unrelated)<a class="headerlink" href="#qapidoc-1" title="Permalink to this headline">¶</a></h3>
</div>
</div>
<div class="section" id="qapidoc-2">
<h2>Common data types<a class="headerlink" href="#qapidoc-2" title="Permalink to this headline">¶</a></h2>
<div class="section" id="qapidoc-5">
<h3><code class="docutils literal notranslate"><span class="pre">IoOperationType</span></code> (Enum)<a class="headerlink" href="#qapidoc-5" title="Permalink to this headline">¶</a></h3>
<p>An enumeration of the I/O operation types</p>
<div class="section" id="qapidoc-3">
<h4>Values<a class="headerlink" href="#qapidoc-3" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">read</span></code></dt>
<dd>read operation</dd>
<dt><code class="docutils literal notranslate"><span class="pre">write</span></code></dt>
<dd>write operation</dd>
</dl>
</div>
<div class="section" id="qapidoc-4">
<h4>Since<a class="headerlink" href="#qapidoc-4" title="Permalink to this headline">¶</a></h4>
<p>2.1</p>
</div>
</div>
<div class="section" id="qapidoc-8">
<h3><code class="docutils literal notranslate"><span class="pre">OnOffAuto</span></code> (Enum)<a class="headerlink" href="#qapidoc-8" title="Permalink to this headline">¶</a></h3>
<p>An enumeration of three options: on, off, and auto</p>
<div class="section" id="qapidoc-6">
<h4>Values<a class="headerlink" href="#qapidoc-6" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">auto</span></code></dt>
<dd>QEMU selects the value between on and off</dd>
<dt><code class="docutils literal notranslate"><span class="pre">on</span></code></dt>
<dd>Enabled</dd>
<dt><code class="docutils literal notranslate"><span class="pre">off</span></code></dt>
<dd>Disabled</dd>
</dl>
</div>
<div class="section" id="qapidoc-7">
<h4>Since<a class="headerlink" href="#qapidoc-7" title="Permalink to this headline">¶</a></h4>
<p>2.2</p>
</div>
</div>
<div class="section" id="qapidoc-11">
<h3><code class="docutils literal notranslate"><span class="pre">OnOffSplit</span></code> (Enum)<a class="headerlink" href="#qapidoc-11" title="Permalink to this headline">¶</a></h3>
<p>An enumeration of three values: on, off, and split</p>
<div class="section" id="qapidoc-9">
<h4>Values<a class="headerlink" href="#qapidoc-9" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">on</span></code></dt>
<dd>Enabled</dd>
<dt><code class="docutils literal notranslate"><span class="pre">off</span></code></dt>
<dd>Disabled</dd>
<dt><code class="docutils literal notranslate"><span class="pre">split</span></code></dt>
<dd>Mixed</dd>
</dl>
</div>
<div class="section" id="qapidoc-10">
<h4>Since<a class="headerlink" href="#qapidoc-10" title="Permalink to this headline">¶</a></h4>
<p>2.6</p>
</div>
</div>
<div class="section" id="qapidoc-14">
<h3><code class="docutils literal notranslate"><span class="pre">String</span></code> (Object)<a class="headerlink" href="#qapidoc-14" title="Permalink to this headline">¶</a></h3>
<p>A fat type wrapping ‘str’, to be embedded in lists.</p>
<div class="section" id="qapidoc-12">
<h4>Members<a class="headerlink" href="#qapidoc-12" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">str</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code></dt>
<dd>Not documented</dd>
</dl>
</div>
<div class="section" id="qapidoc-13">
<h4>Since<a class="headerlink" href="#qapidoc-13" title="Permalink to this headline">¶</a></h4>
<p>1.2</p>
</div>
</div>
<div class="section" id="qapidoc-17">
<h3><code class="docutils literal notranslate"><span class="pre">StrOrNull</span></code> (Alternate)<a class="headerlink" href="#qapidoc-17" title="Permalink to this headline">¶</a></h3>
<p>This is a string value or the explicit lack of a string (null
pointer in C).  Intended for cases when ‘optional absent’ already
has a different meaning.</p>
<div class="section" id="qapidoc-15">
<h4>Members<a class="headerlink" href="#qapidoc-15" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">s</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code></dt>
<dd>the string value</dd>
<dt><code class="docutils literal notranslate"><span class="pre">n</span></code>: <code class="docutils literal notranslate"><span class="pre">null</span></code></dt>
<dd>no string value</dd>
</dl>
</div>
<div class="section" id="qapidoc-16">
<h4>Since<a class="headerlink" href="#qapidoc-16" title="Permalink to this headline">¶</a></h4>
<p>2.10</p>
</div>
</div>
<div class="section" id="qapidoc-20">
<h3><code class="docutils literal notranslate"><span class="pre">OffAutoPCIBAR</span></code> (Enum)<a class="headerlink" href="#qapidoc-20" title="Permalink to this headline">¶</a></h3>
<p>An enumeration of options for specifying a PCI BAR</p>
<div class="section" id="qapidoc-18">
<h4>Values<a class="headerlink" href="#qapidoc-18" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">off</span></code></dt>
<dd>The specified feature is disabled</dd>
<dt><code class="docutils literal notranslate"><span class="pre">auto</span></code></dt>
<dd>The PCI BAR for the feature is automatically selected</dd>
<dt><code class="docutils literal notranslate"><span class="pre">bar0</span></code></dt>
<dd>PCI BAR0 is used for the feature</dd>
<dt><code class="docutils literal notranslate"><span class="pre">bar1</span></code></dt>
<dd>PCI BAR1 is used for the feature</dd>
<dt><code class="docutils literal notranslate"><span class="pre">bar2</span></code></dt>
<dd>PCI BAR2 is used for the feature</dd>
<dt><code class="docutils literal notranslate"><span class="pre">bar3</span></code></dt>
<dd>PCI BAR3 is used for the feature</dd>
<dt><code class="docutils literal notranslate"><span class="pre">bar4</span></code></dt>
<dd>PCI BAR4 is used for the feature</dd>
<dt><code class="docutils literal notranslate"><span class="pre">bar5</span></code></dt>
<dd>PCI BAR5 is used for the feature</dd>
</dl>
</div>
<div class="section" id="qapidoc-19">
<h4>Since<a class="headerlink" href="#qapidoc-19" title="Permalink to this headline">¶</a></h4>
<p>2.12</p>
</div>
</div>
<div class="section" id="qapidoc-23">
<h3><code class="docutils literal notranslate"><span class="pre">PCIELinkSpeed</span></code> (Enum)<a class="headerlink" href="#qapidoc-23" title="Permalink to this headline">¶</a></h3>
<p>An enumeration of PCIe link speeds in units of GT/s</p>
<div class="section" id="qapidoc-21">
<h4>Values<a class="headerlink" href="#qapidoc-21" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">2_5</span></code></dt>
<dd>2.5GT/s</dd>
<dt><code class="docutils literal notranslate"><span class="pre">5</span></code></dt>
<dd>5.0GT/s</dd>
<dt><code class="docutils literal notranslate"><span class="pre">8</span></code></dt>
<dd>8.0GT/s</dd>
<dt><code class="docutils literal notranslate"><span class="pre">16</span></code></dt>
<dd>16.0GT/s</dd>
</dl>
</div>
<div class="section" id="qapidoc-22">
<h4>Since<a class="headerlink" href="#qapidoc-22" title="Permalink to this headline">¶</a></h4>
<p>4.0</p>
</div>
</div>
<div class="section" id="qapidoc-26">
<h3><code class="docutils literal notranslate"><span class="pre">PCIELinkWidth</span></code> (Enum)<a class="headerlink" href="#qapidoc-26" title="Permalink to this headline">¶</a></h3>
<p>An enumeration of PCIe link width</p>
<div class="section" id="qapidoc-24">
<h4>Values<a class="headerlink" href="#qapidoc-24" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">1</span></code></dt>
<dd>x1</dd>
<dt><code class="docutils literal notranslate"><span class="pre">2</span></code></dt>
<dd>x2</dd>
<dt><code class="docutils literal notranslate"><span class="pre">4</span></code></dt>
<dd>x4</dd>
<dt><code class="docutils literal notranslate"><span class="pre">8</span></code></dt>
<dd>x8</dd>
<dt><code class="docutils literal notranslate"><span class="pre">12</span></code></dt>
<dd>x12</dd>
<dt><code class="docutils literal notranslate"><span class="pre">16</span></code></dt>
<dd>x16</dd>
<dt><code class="docutils literal notranslate"><span class="pre">32</span></code></dt>
<dd>x32</dd>
</dl>
</div>
<div class="section" id="qapidoc-25">
<h4>Since<a class="headerlink" href="#qapidoc-25" title="Permalink to this headline">¶</a></h4>
<p>4.0</p>
</div>
</div>
</div>
<div class="section" id="qapidoc-27">
<h2>Cryptography<a class="headerlink" href="#qapidoc-27" title="Permalink to this headline">¶</a></h2>
<div class="section" id="qapidoc-30">
<h3><code class="docutils literal notranslate"><span class="pre">QCryptoTLSCredsEndpoint</span></code> (Enum)<a class="headerlink" href="#qapidoc-30" title="Permalink to this headline">¶</a></h3>
<p>The type of network endpoint that will be using the credentials.
Most types of credential require different setup / structures
depending on whether they will be used in a server versus a
client.</p>
<div class="section" id="qapidoc-28">
<h4>Values<a class="headerlink" href="#qapidoc-28" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">client</span></code></dt>
<dd>the network endpoint is acting as the client</dd>
<dt><code class="docutils literal notranslate"><span class="pre">server</span></code></dt>
<dd>the network endpoint is acting as the server</dd>
</dl>
</div>
<div class="section" id="qapidoc-29">
<h4>Since<a class="headerlink" href="#qapidoc-29" title="Permalink to this headline">¶</a></h4>
<p>2.5</p>
</div>
</div>
<div class="section" id="qapidoc-33">
<h3><code class="docutils literal notranslate"><span class="pre">QCryptoSecretFormat</span></code> (Enum)<a class="headerlink" href="#qapidoc-33" title="Permalink to this headline">¶</a></h3>
<p>The data format that the secret is provided in</p>
<div class="section" id="qapidoc-31">
<h4>Values<a class="headerlink" href="#qapidoc-31" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">raw</span></code></dt>
<dd>raw bytes. When encoded in JSON only valid UTF-8 sequences can be used</dd>
<dt><code class="docutils literal notranslate"><span class="pre">base64</span></code></dt>
<dd>arbitrary base64 encoded binary data</dd>
</dl>
</div>
<div class="section" id="qapidoc-32">
<h4>Since<a class="headerlink" href="#qapidoc-32" title="Permalink to this headline">¶</a></h4>
<p>2.6</p>
</div>
</div>
<div class="section" id="qapidoc-36">
<h3><code class="docutils literal notranslate"><span class="pre">QCryptoHashAlgorithm</span></code> (Enum)<a class="headerlink" href="#qapidoc-36" title="Permalink to this headline">¶</a></h3>
<p>The supported algorithms for computing content digests</p>
<div class="section" id="qapidoc-34">
<h4>Values<a class="headerlink" href="#qapidoc-34" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">md5</span></code></dt>
<dd>MD5. Should not be used in any new code, legacy compat only</dd>
<dt><code class="docutils literal notranslate"><span class="pre">sha1</span></code></dt>
<dd>SHA-1. Should not be used in any new code, legacy compat only</dd>
<dt><code class="docutils literal notranslate"><span class="pre">sha224</span></code></dt>
<dd>SHA-224. (since 2.7)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">sha256</span></code></dt>
<dd>SHA-256. Current recommended strong hash.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">sha384</span></code></dt>
<dd>SHA-384. (since 2.7)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">sha512</span></code></dt>
<dd>SHA-512. (since 2.7)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">ripemd160</span></code></dt>
<dd>RIPEMD-160. (since 2.7)</dd>
</dl>
</div>
<div class="section" id="qapidoc-35">
<h4>Since<a class="headerlink" href="#qapidoc-35" title="Permalink to this headline">¶</a></h4>
<p>2.6</p>
</div>
</div>
<div class="section" id="qapidoc-39">
<h3><code class="docutils literal notranslate"><span class="pre">QCryptoCipherAlgorithm</span></code> (Enum)<a class="headerlink" href="#qapidoc-39" title="Permalink to this headline">¶</a></h3>
<p>The supported algorithms for content encryption ciphers</p>
<div class="section" id="qapidoc-37">
<h4>Values<a class="headerlink" href="#qapidoc-37" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">aes-128</span></code></dt>
<dd>AES with 128 bit / 16 byte keys</dd>
<dt><code class="docutils literal notranslate"><span class="pre">aes-192</span></code></dt>
<dd>AES with 192 bit / 24 byte keys</dd>
<dt><code class="docutils literal notranslate"><span class="pre">aes-256</span></code></dt>
<dd>AES with 256 bit / 32 byte keys</dd>
<dt><code class="docutils literal notranslate"><span class="pre">des-rfb</span></code></dt>
<dd>RFB specific variant of single DES. Do not use except in VNC.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">3des</span></code></dt>
<dd>3DES(EDE) with 192 bit / 24 byte keys (since 2.9)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">cast5-128</span></code></dt>
<dd>Cast5 with 128 bit / 16 byte keys</dd>
<dt><code class="docutils literal notranslate"><span class="pre">serpent-128</span></code></dt>
<dd>Serpent with 128 bit / 16 byte keys</dd>
<dt><code class="docutils literal notranslate"><span class="pre">serpent-192</span></code></dt>
<dd>Serpent with 192 bit / 24 byte keys</dd>
<dt><code class="docutils literal notranslate"><span class="pre">serpent-256</span></code></dt>
<dd>Serpent with 256 bit / 32 byte keys</dd>
<dt><code class="docutils literal notranslate"><span class="pre">twofish-128</span></code></dt>
<dd>Twofish with 128 bit / 16 byte keys</dd>
<dt><code class="docutils literal notranslate"><span class="pre">twofish-192</span></code></dt>
<dd>Twofish with 192 bit / 24 byte keys</dd>
<dt><code class="docutils literal notranslate"><span class="pre">twofish-256</span></code></dt>
<dd>Twofish with 256 bit / 32 byte keys</dd>
</dl>
</div>
<div class="section" id="qapidoc-38">
<h4>Since<a class="headerlink" href="#qapidoc-38" title="Permalink to this headline">¶</a></h4>
<p>2.6</p>
</div>
</div>
<div class="section" id="qapidoc-42">
<h3><code class="docutils literal notranslate"><span class="pre">QCryptoCipherMode</span></code> (Enum)<a class="headerlink" href="#qapidoc-42" title="Permalink to this headline">¶</a></h3>
<p>The supported modes for content encryption ciphers</p>
<div class="section" id="qapidoc-40">
<h4>Values<a class="headerlink" href="#qapidoc-40" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">ecb</span></code></dt>
<dd>Electronic Code Book</dd>
<dt><code class="docutils literal notranslate"><span class="pre">cbc</span></code></dt>
<dd>Cipher Block Chaining</dd>
<dt><code class="docutils literal notranslate"><span class="pre">xts</span></code></dt>
<dd>XEX with tweaked code book and ciphertext stealing</dd>
<dt><code class="docutils literal notranslate"><span class="pre">ctr</span></code></dt>
<dd>Counter (Since 2.8)</dd>
</dl>
</div>
<div class="section" id="qapidoc-41">
<h4>Since<a class="headerlink" href="#qapidoc-41" title="Permalink to this headline">¶</a></h4>
<p>2.6</p>
</div>
</div>
<div class="section" id="qapidoc-45">
<h3><code class="docutils literal notranslate"><span class="pre">QCryptoIVGenAlgorithm</span></code> (Enum)<a class="headerlink" href="#qapidoc-45" title="Permalink to this headline">¶</a></h3>
<p>The supported algorithms for generating initialization
vectors for full disk encryption. The ‘plain’ generator
should not be used for disks with sector numbers larger
than 2^32, except where compatibility with pre-existing
Linux dm-crypt volumes is required.</p>
<div class="section" id="qapidoc-43">
<h4>Values<a class="headerlink" href="#qapidoc-43" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">plain</span></code></dt>
<dd>64-bit sector number truncated to 32-bits</dd>
<dt><code class="docutils literal notranslate"><span class="pre">plain64</span></code></dt>
<dd>64-bit sector number</dd>
<dt><code class="docutils literal notranslate"><span class="pre">essiv</span></code></dt>
<dd>64-bit sector number encrypted with a hash of the encryption key</dd>
</dl>
</div>
<div class="section" id="qapidoc-44">
<h4>Since<a class="headerlink" href="#qapidoc-44" title="Permalink to this headline">¶</a></h4>
<p>2.6</p>
</div>
</div>
<div class="section" id="qapidoc-48">
<h3><code class="docutils literal notranslate"><span class="pre">QCryptoBlockFormat</span></code> (Enum)<a class="headerlink" href="#qapidoc-48" title="Permalink to this headline">¶</a></h3>
<p>The supported full disk encryption formats</p>
<div class="section" id="qapidoc-46">
<h4>Values<a class="headerlink" href="#qapidoc-46" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">qcow</span></code></dt>
<dd>QCow/QCow2 built-in AES-CBC encryption. Use only
for liberating data from old images.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">luks</span></code></dt>
<dd>LUKS encryption format. Recommended for new images</dd>
</dl>
</div>
<div class="section" id="qapidoc-47">
<h4>Since<a class="headerlink" href="#qapidoc-47" title="Permalink to this headline">¶</a></h4>
<p>2.6</p>
</div>
</div>
<div class="section" id="qapidoc-51">
<h3><code class="docutils literal notranslate"><span class="pre">QCryptoBlockOptionsBase</span></code> (Object)<a class="headerlink" href="#qapidoc-51" title="Permalink to this headline">¶</a></h3>
<p>The common options that apply to all full disk
encryption formats</p>
<div class="section" id="qapidoc-49">
<h4>Members<a class="headerlink" href="#qapidoc-49" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">format</span></code>: <code class="docutils literal notranslate"><span class="pre">QCryptoBlockFormat</span></code></dt>
<dd>the encryption format</dd>
</dl>
</div>
<div class="section" id="qapidoc-50">
<h4>Since<a class="headerlink" href="#qapidoc-50" title="Permalink to this headline">¶</a></h4>
<p>2.6</p>
</div>
</div>
<div class="section" id="qapidoc-54">
<h3><code class="docutils literal notranslate"><span class="pre">QCryptoBlockOptionsQCow</span></code> (Object)<a class="headerlink" href="#qapidoc-54" title="Permalink to this headline">¶</a></h3>
<p>The options that apply to QCow/QCow2 AES-CBC encryption format</p>
<div class="section" id="qapidoc-52">
<h4>Members<a class="headerlink" href="#qapidoc-52" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">key-secret</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code> (optional)</dt>
<dd>the ID of a QCryptoSecret object providing the
decryption key. Mandatory except when probing image for
metadata only.</dd>
</dl>
</div>
<div class="section" id="qapidoc-53">
<h4>Since<a class="headerlink" href="#qapidoc-53" title="Permalink to this headline">¶</a></h4>
<p>2.6</p>
</div>
</div>
<div class="section" id="qapidoc-57">
<h3><code class="docutils literal notranslate"><span class="pre">QCryptoBlockOptionsLUKS</span></code> (Object)<a class="headerlink" href="#qapidoc-57" title="Permalink to this headline">¶</a></h3>
<p>The options that apply to LUKS encryption format</p>
<div class="section" id="qapidoc-55">
<h4>Members<a class="headerlink" href="#qapidoc-55" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">key-secret</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code> (optional)</dt>
<dd>the ID of a QCryptoSecret object providing the
decryption key. Mandatory except when probing image for
metadata only.</dd>
</dl>
</div>
<div class="section" id="qapidoc-56">
<h4>Since<a class="headerlink" href="#qapidoc-56" title="Permalink to this headline">¶</a></h4>
<p>2.6</p>
</div>
</div>
<div class="section" id="qapidoc-60">
<h3><code class="docutils literal notranslate"><span class="pre">QCryptoBlockCreateOptionsLUKS</span></code> (Object)<a class="headerlink" href="#qapidoc-60" title="Permalink to this headline">¶</a></h3>
<p>The options that apply to LUKS encryption format initialization</p>
<div class="section" id="qapidoc-58">
<h4>Members<a class="headerlink" href="#qapidoc-58" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">cipher-alg</span></code>: <code class="docutils literal notranslate"><span class="pre">QCryptoCipherAlgorithm</span></code> (optional)</dt>
<dd>the cipher algorithm for data encryption
Currently defaults to ‘aes-256’.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">cipher-mode</span></code>: <code class="docutils literal notranslate"><span class="pre">QCryptoCipherMode</span></code> (optional)</dt>
<dd>the cipher mode for data encryption
Currently defaults to ‘xts’</dd>
<dt><code class="docutils literal notranslate"><span class="pre">ivgen-alg</span></code>: <code class="docutils literal notranslate"><span class="pre">QCryptoIVGenAlgorithm</span></code> (optional)</dt>
<dd>the initialization vector generator
Currently defaults to ‘plain64’</dd>
<dt><code class="docutils literal notranslate"><span class="pre">ivgen-hash-alg</span></code>: <code class="docutils literal notranslate"><span class="pre">QCryptoHashAlgorithm</span></code> (optional)</dt>
<dd>the initialization vector generator hash
Currently defaults to ‘sha256’</dd>
<dt><code class="docutils literal notranslate"><span class="pre">hash-alg</span></code>: <code class="docutils literal notranslate"><span class="pre">QCryptoHashAlgorithm</span></code> (optional)</dt>
<dd>the master key hash algorithm
Currently defaults to ‘sha256’</dd>
<dt><code class="docutils literal notranslate"><span class="pre">iter-time</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code> (optional)</dt>
<dd>number of milliseconds to spend in
PBKDF passphrase processing. Currently defaults
to 2000. (since 2.8)</dd>
<dt>The members of <code class="docutils literal notranslate"><span class="pre">QCryptoBlockOptionsLUKS</span></code></dl>
</div>
<div class="section" id="qapidoc-59">
<h4>Since<a class="headerlink" href="#qapidoc-59" title="Permalink to this headline">¶</a></h4>
<p>2.6</p>
</div>
</div>
<div class="section" id="qapidoc-63">
<h3><code class="docutils literal notranslate"><span class="pre">QCryptoBlockOpenOptions</span></code> (Object)<a class="headerlink" href="#qapidoc-63" title="Permalink to this headline">¶</a></h3>
<p>The options that are available for all encryption formats
when opening an existing volume</p>
<div class="section" id="qapidoc-61">
<h4>Members<a class="headerlink" href="#qapidoc-61" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt>The members of <code class="docutils literal notranslate"><span class="pre">QCryptoBlockOptionsBase</span></code><dt>The members of <code class="docutils literal notranslate"><span class="pre">QCryptoBlockOptionsQCow</span></code> when <code class="docutils literal notranslate"><span class="pre">format</span></code> is <code class="docutils literal notranslate"><span class="pre">&quot;qcow&quot;</span></code><dt>The members of <code class="docutils literal notranslate"><span class="pre">QCryptoBlockOptionsLUKS</span></code> when <code class="docutils literal notranslate"><span class="pre">format</span></code> is <code class="docutils literal notranslate"><span class="pre">&quot;luks&quot;</span></code></dl>
</div>
<div class="section" id="qapidoc-62">
<h4>Since<a class="headerlink" href="#qapidoc-62" title="Permalink to this headline">¶</a></h4>
<p>2.6</p>
</div>
</div>
<div class="section" id="qapidoc-66">
<h3><code class="docutils literal notranslate"><span class="pre">QCryptoBlockCreateOptions</span></code> (Object)<a class="headerlink" href="#qapidoc-66" title="Permalink to this headline">¶</a></h3>
<p>The options that are available for all encryption formats
when initializing a new volume</p>
<div class="section" id="qapidoc-64">
<h4>Members<a class="headerlink" href="#qapidoc-64" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt>The members of <code class="docutils literal notranslate"><span class="pre">QCryptoBlockOptionsBase</span></code><dt>The members of <code class="docutils literal notranslate"><span class="pre">QCryptoBlockOptionsQCow</span></code> when <code class="docutils literal notranslate"><span class="pre">format</span></code> is <code class="docutils literal notranslate"><span class="pre">&quot;qcow&quot;</span></code><dt>The members of <code class="docutils literal notranslate"><span class="pre">QCryptoBlockCreateOptionsLUKS</span></code> when <code class="docutils literal notranslate"><span class="pre">format</span></code> is <code class="docutils literal notranslate"><span class="pre">&quot;luks&quot;</span></code></dl>
</div>
<div class="section" id="qapidoc-65">
<h4>Since<a class="headerlink" href="#qapidoc-65" title="Permalink to this headline">¶</a></h4>
<p>2.6</p>
</div>
</div>
<div class="section" id="qapidoc-69">
<h3><code class="docutils literal notranslate"><span class="pre">QCryptoBlockInfoBase</span></code> (Object)<a class="headerlink" href="#qapidoc-69" title="Permalink to this headline">¶</a></h3>
<p>The common information that applies to all full disk
encryption formats</p>
<div class="section" id="qapidoc-67">
<h4>Members<a class="headerlink" href="#qapidoc-67" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">format</span></code>: <code class="docutils literal notranslate"><span class="pre">QCryptoBlockFormat</span></code></dt>
<dd>the encryption format</dd>
</dl>
</div>
<div class="section" id="qapidoc-68">
<h4>Since<a class="headerlink" href="#qapidoc-68" title="Permalink to this headline">¶</a></h4>
<p>2.7</p>
</div>
</div>
<div class="section" id="qapidoc-72">
<h3><code class="docutils literal notranslate"><span class="pre">QCryptoBlockInfoLUKSSlot</span></code> (Object)<a class="headerlink" href="#qapidoc-72" title="Permalink to this headline">¶</a></h3>
<p>Information about the LUKS block encryption key
slot options</p>
<div class="section" id="qapidoc-70">
<h4>Members<a class="headerlink" href="#qapidoc-70" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">active</span></code>: <code class="docutils literal notranslate"><span class="pre">boolean</span></code></dt>
<dd>whether the key slot is currently in use</dd>
<dt><code class="docutils literal notranslate"><span class="pre">key-offset</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code></dt>
<dd>offset to the key material in bytes</dd>
<dt><code class="docutils literal notranslate"><span class="pre">iters</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code> (optional)</dt>
<dd>number of PBKDF2 iterations for key material</dd>
<dt><code class="docutils literal notranslate"><span class="pre">stripes</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code> (optional)</dt>
<dd>number of stripes for splitting key material</dd>
</dl>
</div>
<div class="section" id="qapidoc-71">
<h4>Since<a class="headerlink" href="#qapidoc-71" title="Permalink to this headline">¶</a></h4>
<p>2.7</p>
</div>
</div>
<div class="section" id="qapidoc-75">
<h3><code class="docutils literal notranslate"><span class="pre">QCryptoBlockInfoLUKS</span></code> (Object)<a class="headerlink" href="#qapidoc-75" title="Permalink to this headline">¶</a></h3>
<p>Information about the LUKS block encryption options</p>
<div class="section" id="qapidoc-73">
<h4>Members<a class="headerlink" href="#qapidoc-73" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">cipher-alg</span></code>: <code class="docutils literal notranslate"><span class="pre">QCryptoCipherAlgorithm</span></code></dt>
<dd>the cipher algorithm for data encryption</dd>
<dt><code class="docutils literal notranslate"><span class="pre">cipher-mode</span></code>: <code class="docutils literal notranslate"><span class="pre">QCryptoCipherMode</span></code></dt>
<dd>the cipher mode for data encryption</dd>
<dt><code class="docutils literal notranslate"><span class="pre">ivgen-alg</span></code>: <code class="docutils literal notranslate"><span class="pre">QCryptoIVGenAlgorithm</span></code></dt>
<dd>the initialization vector generator</dd>
<dt><code class="docutils literal notranslate"><span class="pre">ivgen-hash-alg</span></code>: <code class="docutils literal notranslate"><span class="pre">QCryptoHashAlgorithm</span></code> (optional)</dt>
<dd>the initialization vector generator hash</dd>
<dt><code class="docutils literal notranslate"><span class="pre">hash-alg</span></code>: <code class="docutils literal notranslate"><span class="pre">QCryptoHashAlgorithm</span></code></dt>
<dd>the master key hash algorithm</dd>
<dt><code class="docutils literal notranslate"><span class="pre">payload-offset</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code></dt>
<dd>offset to the payload data in bytes</dd>
<dt><code class="docutils literal notranslate"><span class="pre">master-key-iters</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code></dt>
<dd>number of PBKDF2 iterations for key material</dd>
<dt><code class="docutils literal notranslate"><span class="pre">uuid</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code></dt>
<dd>unique identifier for the volume</dd>
<dt><code class="docutils literal notranslate"><span class="pre">slots</span></code>: <code class="docutils literal notranslate"><span class="pre">array</span> <span class="pre">of</span> <span class="pre">QCryptoBlockInfoLUKSSlot</span></code></dt>
<dd>information about each key slot</dd>
</dl>
</div>
<div class="section" id="qapidoc-74">
<h4>Since<a class="headerlink" href="#qapidoc-74" title="Permalink to this headline">¶</a></h4>
<p>2.7</p>
</div>
</div>
<div class="section" id="qapidoc-78">
<h3><code class="docutils literal notranslate"><span class="pre">QCryptoBlockInfo</span></code> (Object)<a class="headerlink" href="#qapidoc-78" title="Permalink to this headline">¶</a></h3>
<p>Information about the block encryption options</p>
<div class="section" id="qapidoc-76">
<h4>Members<a class="headerlink" href="#qapidoc-76" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt>The members of <code class="docutils literal notranslate"><span class="pre">QCryptoBlockInfoBase</span></code><dt>The members of <code class="docutils literal notranslate"><span class="pre">QCryptoBlockInfoLUKS</span></code> when <code class="docutils literal notranslate"><span class="pre">format</span></code> is <code class="docutils literal notranslate"><span class="pre">&quot;luks&quot;</span></code></dl>
</div>
<div class="section" id="qapidoc-77">
<h4>Since<a class="headerlink" href="#qapidoc-77" title="Permalink to this headline">¶</a></h4>
<p>2.7</p>
</div>
</div>
<div class="section" id="qapidoc-81">
<h3><code class="docutils literal notranslate"><span class="pre">QCryptoBlockLUKSKeyslotState</span></code> (Enum)<a class="headerlink" href="#qapidoc-81" title="Permalink to this headline">¶</a></h3>
<p>Defines state of keyslots that are affected by the update</p>
<div class="section" id="qapidoc-79">
<h4>Values<a class="headerlink" href="#qapidoc-79" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">active</span></code></dt>
<dd>The slots contain the given password and marked as active</dd>
<dt><code class="docutils literal notranslate"><span class="pre">inactive</span></code></dt>
<dd>The slots are erased (contain garbage) and marked as inactive</dd>
</dl>
</div>
<div class="section" id="qapidoc-80">
<h4>Since<a class="headerlink" href="#qapidoc-80" title="Permalink to this headline">¶</a></h4>
<p>5.1</p>
</div>
</div>
<div class="section" id="qapidoc-84">
<h3><code class="docutils literal notranslate"><span class="pre">QCryptoBlockAmendOptionsLUKS</span></code> (Object)<a class="headerlink" href="#qapidoc-84" title="Permalink to this headline">¶</a></h3>
<p>This struct defines the update parameters that activate/de-activate set
of keyslots</p>
<div class="section" id="qapidoc-82">
<h4>Members<a class="headerlink" href="#qapidoc-82" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">state</span></code>: <code class="docutils literal notranslate"><span class="pre">QCryptoBlockLUKSKeyslotState</span></code></dt>
<dd>the desired state of the keyslots</dd>
<dt><code class="docutils literal notranslate"><span class="pre">new-secret</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code> (optional)</dt>
<dd>The ID of a QCryptoSecret object providing the password to be
written into added active keyslots</dd>
<dt><code class="docutils literal notranslate"><span class="pre">old-secret</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code> (optional)</dt>
<dd>Optional (for deactivation only)
If given will deactivate all keyslots that
match password located in QCryptoSecret with this ID</dd>
<dt><code class="docutils literal notranslate"><span class="pre">iter-time</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code> (optional)</dt>
<dd>Optional (for activation only)
Number of milliseconds to spend in
PBKDF passphrase processing for the newly activated keyslot.
Currently defaults to 2000.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">keyslot</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code> (optional)</dt>
<dd><p class="first">Optional. ID of the keyslot to activate/deactivate.
For keyslot activation, keyslot should not be active already
(this is unsafe to update an active keyslot),
but possible if ‘force’ parameter is given.
If keyslot is not given, first free keyslot will be written.</p>
<p class="last">For keyslot deactivation, this parameter specifies the exact
keyslot to deactivate</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">secret</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code> (optional)</dt>
<dd>Optional. The ID of a QCryptoSecret object providing the
password to use to retrieve current master key.
Defaults to the same secret that was used to open the image</dd>
</dl>
</div>
<div class="section" id="qapidoc-83">
Since 5.1</div>
</div>
<div class="section" id="qapidoc-87">
<h3><code class="docutils literal notranslate"><span class="pre">QCryptoBlockAmendOptions</span></code> (Object)<a class="headerlink" href="#qapidoc-87" title="Permalink to this headline">¶</a></h3>
<p>The options that are available for all encryption formats
when amending encryption settings</p>
<div class="section" id="qapidoc-85">
<h4>Members<a class="headerlink" href="#qapidoc-85" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt>The members of <code class="docutils literal notranslate"><span class="pre">QCryptoBlockOptionsBase</span></code><dt>The members of <code class="docutils literal notranslate"><span class="pre">QCryptoBlockAmendOptionsLUKS</span></code> when <code class="docutils literal notranslate"><span class="pre">format</span></code> is <code class="docutils literal notranslate"><span class="pre">&quot;luks&quot;</span></code></dl>
</div>
<div class="section" id="qapidoc-86">
<h4>Since<a class="headerlink" href="#qapidoc-86" title="Permalink to this headline">¶</a></h4>
<p>5.1</p>
</div>
</div>
<div class="section" id="qapidoc-88">
<h3>Background jobs<a class="headerlink" href="#qapidoc-88" title="Permalink to this headline">¶</a></h3>
<div class="section" id="qapidoc-91">
<h4><code class="docutils literal notranslate"><span class="pre">JobType</span></code> (Enum)<a class="headerlink" href="#qapidoc-91" title="Permalink to this headline">¶</a></h4>
<p>Type of a background job.</p>
<div class="section" id="qapidoc-89">
<h5>Values<a class="headerlink" href="#qapidoc-89" title="Permalink to this headline">¶</a></h5>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">commit</span></code></dt>
<dd>block commit job type, see “block-commit”</dd>
<dt><code class="docutils literal notranslate"><span class="pre">stream</span></code></dt>
<dd>block stream job type, see “block-stream”</dd>
<dt><code class="docutils literal notranslate"><span class="pre">mirror</span></code></dt>
<dd>drive mirror job type, see “drive-mirror”</dd>
<dt><code class="docutils literal notranslate"><span class="pre">backup</span></code></dt>
<dd>drive backup job type, see “drive-backup”</dd>
<dt><code class="docutils literal notranslate"><span class="pre">create</span></code></dt>
<dd>image creation job type, see “blockdev-create” (since 3.0)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">amend</span></code></dt>
<dd>image options amend job type, see “x-blockdev-amend” (since 5.1)</dd>
</dl>
</div>
<div class="section" id="qapidoc-90">
<h5>Since<a class="headerlink" href="#qapidoc-90" title="Permalink to this headline">¶</a></h5>
<p>1.7</p>
</div>
</div>
<div class="section" id="qapidoc-94">
<h4><code class="docutils literal notranslate"><span class="pre">JobStatus</span></code> (Enum)<a class="headerlink" href="#qapidoc-94" title="Permalink to this headline">¶</a></h4>
<p>Indicates the present state of a given job in its lifetime.</p>
<div class="section" id="qapidoc-92">
<h5>Values<a class="headerlink" href="#qapidoc-92" title="Permalink to this headline">¶</a></h5>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">undefined</span></code></dt>
<dd>Erroneous, default state. Should not ever be visible.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">created</span></code></dt>
<dd>The job has been created, but not yet started.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">running</span></code></dt>
<dd>The job is currently running.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">paused</span></code></dt>
<dd>The job is running, but paused. The pause may be requested by
either the QMP user or by internal processes.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">ready</span></code></dt>
<dd>The job is running, but is ready for the user to signal completion.
This is used for long-running jobs like mirror that are designed to
run indefinitely.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">standby</span></code></dt>
<dd>The job is ready, but paused. This is nearly identical to <code class="docutils literal notranslate"><span class="pre">paused</span></code>.
The job may return to <code class="docutils literal notranslate"><span class="pre">ready</span></code> or otherwise be canceled.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">waiting</span></code></dt>
<dd>The job is waiting for other jobs in the transaction to converge
to the waiting state. This status will likely not be visible for
the last job in a transaction.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">pending</span></code></dt>
<dd>The job has finished its work, but has finalization steps that it
needs to make prior to completing. These changes will require
manual intervention via <code class="docutils literal notranslate"><span class="pre">job-finalize</span></code> if auto-finalize was set to
false. These pending changes may still fail.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">aborting</span></code></dt>
<dd>The job is in the process of being aborted, and will finish with
an error. The job will afterwards report that it is <code class="docutils literal notranslate"><span class="pre">concluded</span></code>.
This status may not be visible to the management process.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">concluded</span></code></dt>
<dd>The job has finished all work. If auto-dismiss was set to false,
the job will remain in the query list until it is dismissed via
<code class="docutils literal notranslate"><span class="pre">job-dismiss</span></code>.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">null</span></code></dt>
<dd>The job is in the process of being dismantled. This state should not
ever be visible externally.</dd>
</dl>
</div>
<div class="section" id="qapidoc-93">
<h5>Since<a class="headerlink" href="#qapidoc-93" title="Permalink to this headline">¶</a></h5>
<p>2.12</p>
</div>
</div>
<div class="section" id="qapidoc-97">
<h4><code class="docutils literal notranslate"><span class="pre">JobVerb</span></code> (Enum)<a class="headerlink" href="#qapidoc-97" title="Permalink to this headline">¶</a></h4>
<p>Represents command verbs that can be applied to a job.</p>
<div class="section" id="qapidoc-95">
<h5>Values<a class="headerlink" href="#qapidoc-95" title="Permalink to this headline">¶</a></h5>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">cancel</span></code></dt>
<dd>see <code class="docutils literal notranslate"><span class="pre">job-cancel</span></code></dd>
<dt><code class="docutils literal notranslate"><span class="pre">pause</span></code></dt>
<dd>see <code class="docutils literal notranslate"><span class="pre">job-pause</span></code></dd>
<dt><code class="docutils literal notranslate"><span class="pre">resume</span></code></dt>
<dd>see <code class="docutils literal notranslate"><span class="pre">job-resume</span></code></dd>
<dt><code class="docutils literal notranslate"><span class="pre">set-speed</span></code></dt>
<dd>see <code class="docutils literal notranslate"><span class="pre">block-job-set-speed</span></code></dd>
<dt><code class="docutils literal notranslate"><span class="pre">complete</span></code></dt>
<dd>see <code class="docutils literal notranslate"><span class="pre">job-complete</span></code></dd>
<dt><code class="docutils literal notranslate"><span class="pre">dismiss</span></code></dt>
<dd>see <code class="docutils literal notranslate"><span class="pre">job-dismiss</span></code></dd>
<dt><code class="docutils literal notranslate"><span class="pre">finalize</span></code></dt>
<dd>see <code class="docutils literal notranslate"><span class="pre">job-finalize</span></code></dd>
</dl>
</div>
<div class="section" id="qapidoc-96">
<h5>Since<a class="headerlink" href="#qapidoc-96" title="Permalink to this headline">¶</a></h5>
<p>2.12</p>
</div>
</div>
<div class="section" id="qapidoc-100">
<h4><code class="docutils literal notranslate"><span class="pre">JOB_STATUS_CHANGE</span></code> (Event)<a class="headerlink" href="#qapidoc-100" title="Permalink to this headline">¶</a></h4>
<p>Emitted when a job transitions to a different status.</p>
<div class="section" id="qapidoc-98">
<h5>Arguments<a class="headerlink" href="#qapidoc-98" title="Permalink to this headline">¶</a></h5>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">id</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code></dt>
<dd>The job identifier</dd>
<dt><code class="docutils literal notranslate"><span class="pre">status</span></code>: <code class="docutils literal notranslate"><span class="pre">JobStatus</span></code></dt>
<dd>The new job status</dd>
</dl>
</div>
<div class="section" id="qapidoc-99">
<h5>Since<a class="headerlink" href="#qapidoc-99" title="Permalink to this headline">¶</a></h5>
<p>3.0</p>
</div>
</div>
<div class="section" id="qapidoc-103">
<h4><code class="docutils literal notranslate"><span class="pre">job-pause</span></code> (Command)<a class="headerlink" href="#qapidoc-103" title="Permalink to this headline">¶</a></h4>
<p>Pause an active job.</p>
<p>This command returns immediately after marking the active job for pausing.
Pausing an already paused job is an error.</p>
<p>The job will pause as soon as possible, which means transitioning into the
PAUSED state if it was RUNNING, or into STANDBY if it was READY. The
corresponding JOB_STATUS_CHANGE event will be emitted.</p>
<p>Cancelling a paused job automatically resumes it.</p>
<div class="section" id="qapidoc-101">
<h5>Arguments<a class="headerlink" href="#qapidoc-101" title="Permalink to this headline">¶</a></h5>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">id</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code></dt>
<dd>The job identifier.</dd>
</dl>
</div>
<div class="section" id="qapidoc-102">
<h5>Since<a class="headerlink" href="#qapidoc-102" title="Permalink to this headline">¶</a></h5>
<p>3.0</p>
</div>
</div>
<div class="section" id="qapidoc-106">
<h4><code class="docutils literal notranslate"><span class="pre">job-resume</span></code> (Command)<a class="headerlink" href="#qapidoc-106" title="Permalink to this headline">¶</a></h4>
<p>Resume a paused job.</p>
<p>This command returns immediately after resuming a paused job. Resuming an
already running job is an error.</p>
<p><code class="docutils literal notranslate"><span class="pre">id</span></code> : The job identifier.</p>
<div class="section" id="qapidoc-104">
<h5>Arguments<a class="headerlink" href="#qapidoc-104" title="Permalink to this headline">¶</a></h5>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">id</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code></dt>
<dd>Not documented</dd>
</dl>
</div>
<div class="section" id="qapidoc-105">
<h5>Since<a class="headerlink" href="#qapidoc-105" title="Permalink to this headline">¶</a></h5>
<p>3.0</p>
</div>
</div>
<div class="section" id="qapidoc-109">
<h4><code class="docutils literal notranslate"><span class="pre">job-cancel</span></code> (Command)<a class="headerlink" href="#qapidoc-109" title="Permalink to this headline">¶</a></h4>
<p>Instruct an active background job to cancel at the next opportunity.
This command returns immediately after marking the active job for
cancellation.</p>
<p>The job will cancel as soon as possible and then emit a JOB_STATUS_CHANGE
event. Usually, the status will change to ABORTING, but it is possible that
a job successfully completes (e.g. because it was almost done and there was
no opportunity to cancel earlier than completing the job) and transitions to
PENDING instead.</p>
<div class="section" id="qapidoc-107">
<h5>Arguments<a class="headerlink" href="#qapidoc-107" title="Permalink to this headline">¶</a></h5>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">id</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code></dt>
<dd>The job identifier.</dd>
</dl>
</div>
<div class="section" id="qapidoc-108">
<h5>Since<a class="headerlink" href="#qapidoc-108" title="Permalink to this headline">¶</a></h5>
<p>3.0</p>
</div>
</div>
<div class="section" id="qapidoc-112">
<h4><code class="docutils literal notranslate"><span class="pre">job-complete</span></code> (Command)<a class="headerlink" href="#qapidoc-112" title="Permalink to this headline">¶</a></h4>
<p>Manually trigger completion of an active job in the READY state.</p>
<div class="section" id="qapidoc-110">
<h5>Arguments<a class="headerlink" href="#qapidoc-110" title="Permalink to this headline">¶</a></h5>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">id</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code></dt>
<dd>The job identifier.</dd>
</dl>
</div>
<div class="section" id="qapidoc-111">
<h5>Since<a class="headerlink" href="#qapidoc-111" title="Permalink to this headline">¶</a></h5>
<p>3.0</p>
</div>
</div>
<div class="section" id="qapidoc-115">
<h4><code class="docutils literal notranslate"><span class="pre">job-dismiss</span></code> (Command)<a class="headerlink" href="#qapidoc-115" title="Permalink to this headline">¶</a></h4>
<p>Deletes a job that is in the CONCLUDED state. This command only needs to be
run explicitly for jobs that don’t have automatic dismiss enabled.</p>
<p>This command will refuse to operate on any job that has not yet reached its
terminal state, JOB_STATUS_CONCLUDED. For jobs that make use of JOB_READY
event, job-cancel or job-complete will still need to be used as appropriate.</p>
<div class="section" id="qapidoc-113">
<h5>Arguments<a class="headerlink" href="#qapidoc-113" title="Permalink to this headline">¶</a></h5>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">id</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code></dt>
<dd>The job identifier.</dd>
</dl>
</div>
<div class="section" id="qapidoc-114">
<h5>Since<a class="headerlink" href="#qapidoc-114" title="Permalink to this headline">¶</a></h5>
<p>3.0</p>
</div>
</div>
<div class="section" id="qapidoc-118">
<h4><code class="docutils literal notranslate"><span class="pre">job-finalize</span></code> (Command)<a class="headerlink" href="#qapidoc-118" title="Permalink to this headline">¶</a></h4>
<p>Instructs all jobs in a transaction (or a single job if it is not part of any
transaction) to finalize any graph changes and do any necessary cleanup. This
command requires that all involved jobs are in the PENDING state.</p>
<p>For jobs in a transaction, instructing one job to finalize will force
ALL jobs in the transaction to finalize, so it is only necessary to instruct
a single member job to finalize.</p>
<div class="section" id="qapidoc-116">
<h5>Arguments<a class="headerlink" href="#qapidoc-116" title="Permalink to this headline">¶</a></h5>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">id</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code></dt>
<dd>The identifier of any job in the transaction, or of a job that is not
part of any transaction.</dd>
</dl>
</div>
<div class="section" id="qapidoc-117">
<h5>Since<a class="headerlink" href="#qapidoc-117" title="Permalink to this headline">¶</a></h5>
<p>3.0</p>
</div>
</div>
<div class="section" id="qapidoc-121">
<h4><code class="docutils literal notranslate"><span class="pre">JobInfo</span></code> (Object)<a class="headerlink" href="#qapidoc-121" title="Permalink to this headline">¶</a></h4>
<p>Information about a job.</p>
<div class="section" id="qapidoc-119">
<h5>Members<a class="headerlink" href="#qapidoc-119" title="Permalink to this headline">¶</a></h5>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">id</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code></dt>
<dd>The job identifier</dd>
<dt><code class="docutils literal notranslate"><span class="pre">type</span></code>: <code class="docutils literal notranslate"><span class="pre">JobType</span></code></dt>
<dd>The kind of job that is being performed</dd>
<dt><code class="docutils literal notranslate"><span class="pre">status</span></code>: <code class="docutils literal notranslate"><span class="pre">JobStatus</span></code></dt>
<dd>Current job state/status</dd>
<dt><code class="docutils literal notranslate"><span class="pre">current-progress</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code></dt>
<dd>Progress made until now. The unit is arbitrary and the
value can only meaningfully be used for the ratio of
<code class="docutils literal notranslate"><span class="pre">current-progress</span></code> to <code class="docutils literal notranslate"><span class="pre">total-progress</span></code>. The value is
monotonically increasing.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">total-progress</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code></dt>
<dd>Estimated <code class="docutils literal notranslate"><span class="pre">current-progress</span></code> value at the completion of
the job. This value can arbitrarily change while the
job is running, in both directions.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">error</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code> (optional)</dt>
<dd><p class="first">If this field is present, the job failed; if it is
still missing in the CONCLUDED state, this indicates
successful completion.</p>
<p class="last">The value is a human-readable error message to describe
the reason for the job failure. It should not be parsed
by applications.</p>
</dd>
</dl>
</div>
<div class="section" id="qapidoc-120">
<h5>Since<a class="headerlink" href="#qapidoc-120" title="Permalink to this headline">¶</a></h5>
<p>3.0</p>
</div>
</div>
<div class="section" id="qapidoc-124">
<h4><code class="docutils literal notranslate"><span class="pre">query-jobs</span></code> (Command)<a class="headerlink" href="#qapidoc-124" title="Permalink to this headline">¶</a></h4>
<p>Return information about jobs.</p>
<div class="section" id="qapidoc-122">
<h5>Returns<a class="headerlink" href="#qapidoc-122" title="Permalink to this headline">¶</a></h5>
<p>a list with a <code class="docutils literal notranslate"><span class="pre">JobInfo</span></code> for each active job</p>
</div>
<div class="section" id="qapidoc-123">
<h5>Since<a class="headerlink" href="#qapidoc-123" title="Permalink to this headline">¶</a></h5>
<p>3.0</p>
</div>
</div>
</div>
</div>
<div class="section" id="qapidoc-125">
<h2>Socket data types<a class="headerlink" href="#qapidoc-125" title="Permalink to this headline">¶</a></h2>
<div class="section" id="qapidoc-128">
<h3><code class="docutils literal notranslate"><span class="pre">NetworkAddressFamily</span></code> (Enum)<a class="headerlink" href="#qapidoc-128" title="Permalink to this headline">¶</a></h3>
<p>The network address family</p>
<div class="section" id="qapidoc-126">
<h4>Values<a class="headerlink" href="#qapidoc-126" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">ipv4</span></code></dt>
<dd>IPV4 family</dd>
<dt><code class="docutils literal notranslate"><span class="pre">ipv6</span></code></dt>
<dd>IPV6 family</dd>
<dt><code class="docutils literal notranslate"><span class="pre">unix</span></code></dt>
<dd>unix socket</dd>
<dt><code class="docutils literal notranslate"><span class="pre">vsock</span></code></dt>
<dd>vsock family (since 2.8)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">unknown</span></code></dt>
<dd>otherwise</dd>
</dl>
</div>
<div class="section" id="qapidoc-127">
<h4>Since<a class="headerlink" href="#qapidoc-127" title="Permalink to this headline">¶</a></h4>
<p>2.1</p>
</div>
</div>
<div class="section" id="qapidoc-130">
<h3><code class="docutils literal notranslate"><span class="pre">InetSocketAddressBase</span></code> (Object)<a class="headerlink" href="#qapidoc-130" title="Permalink to this headline">¶</a></h3>
<div class="section" id="qapidoc-129">
<h4>Members<a class="headerlink" href="#qapidoc-129" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">host</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code></dt>
<dd>host part of the address</dd>
<dt><code class="docutils literal notranslate"><span class="pre">port</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code></dt>
<dd>port part of the address</dd>
</dl>
</div>
</div>
<div class="section" id="qapidoc-133">
<h3><code class="docutils literal notranslate"><span class="pre">InetSocketAddress</span></code> (Object)<a class="headerlink" href="#qapidoc-133" title="Permalink to this headline">¶</a></h3>
<p>Captures a socket address or address range in the Internet namespace.</p>
<div class="section" id="qapidoc-131">
<h4>Members<a class="headerlink" href="#qapidoc-131" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">numeric</span></code>: <code class="docutils literal notranslate"><span class="pre">boolean</span></code> (optional)</dt>
<dd>true if the host/port are guaranteed to be numeric,
false if name resolution should be attempted. Defaults to false.
(Since 2.9)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">to</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code> (optional)</dt>
<dd>If present, this is range of possible addresses, with port
between <code class="docutils literal notranslate"><span class="pre">port</span></code> and <code class="docutils literal notranslate"><span class="pre">to</span></code>.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">ipv4</span></code>: <code class="docutils literal notranslate"><span class="pre">boolean</span></code> (optional)</dt>
<dd>whether to accept IPv4 addresses, default try both IPv4 and IPv6</dd>
<dt><code class="docutils literal notranslate"><span class="pre">ipv6</span></code>: <code class="docutils literal notranslate"><span class="pre">boolean</span></code> (optional)</dt>
<dd>whether to accept IPv6 addresses, default try both IPv4 and IPv6</dd>
<dt><code class="docutils literal notranslate"><span class="pre">keep-alive</span></code>: <code class="docutils literal notranslate"><span class="pre">boolean</span></code> (optional)</dt>
<dd>enable keep-alive when connecting to this socket. Not supported
for passive sockets. (Since 4.2)</dd>
<dt>The members of <code class="docutils literal notranslate"><span class="pre">InetSocketAddressBase</span></code></dl>
</div>
<div class="section" id="qapidoc-132">
<h4>Since<a class="headerlink" href="#qapidoc-132" title="Permalink to this headline">¶</a></h4>
<p>1.3</p>
</div>
</div>
<div class="section" id="qapidoc-136">
<h3><code class="docutils literal notranslate"><span class="pre">UnixSocketAddress</span></code> (Object)<a class="headerlink" href="#qapidoc-136" title="Permalink to this headline">¶</a></h3>
<p>Captures a socket address in the local (“Unix socket”) namespace.</p>
<div class="section" id="qapidoc-134">
<h4>Members<a class="headerlink" href="#qapidoc-134" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">path</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code></dt>
<dd>filesystem path to use</dd>
<dt><code class="docutils literal notranslate"><span class="pre">abstract</span></code>: <code class="docutils literal notranslate"><span class="pre">boolean</span></code> (optional) (<strong>If: </strong><code class="docutils literal notranslate"><span class="pre">defined(CONFIG_LINUX)</span></code>)</dt>
<dd>if true, this is a Linux abstract socket address.  <code class="docutils literal notranslate"><span class="pre">path</span></code>
will be prefixed by a null byte, and optionally padded
with null bytes.  Defaults to false.  (Since 5.1)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">tight</span></code>: <code class="docutils literal notranslate"><span class="pre">boolean</span></code> (optional) (<strong>If: </strong><code class="docutils literal notranslate"><span class="pre">defined(CONFIG_LINUX)</span></code>)</dt>
<dd>if false, pad an abstract socket address with enough null
bytes to make it fill struct sockaddr_un member sun_path.
Defaults to true.  (Since 5.1)</dd>
</dl>
</div>
<div class="section" id="qapidoc-135">
<h4>Since<a class="headerlink" href="#qapidoc-135" title="Permalink to this headline">¶</a></h4>
<p>1.3</p>
</div>
</div>
<div class="section" id="qapidoc-140">
<h3><code class="docutils literal notranslate"><span class="pre">VsockSocketAddress</span></code> (Object)<a class="headerlink" href="#qapidoc-140" title="Permalink to this headline">¶</a></h3>
<p>Captures a socket address in the vsock namespace.</p>
<div class="section" id="qapidoc-137">
<h4>Members<a class="headerlink" href="#qapidoc-137" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">cid</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code></dt>
<dd>unique host identifier</dd>
<dt><code class="docutils literal notranslate"><span class="pre">port</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code></dt>
<dd>port</dd>
</dl>
</div>
<div class="section" id="qapidoc-138">
<h4>Note<a class="headerlink" href="#qapidoc-138" title="Permalink to this headline">¶</a></h4>
<p>string types are used to allow for possible future hostname or
service resolution support.</p>
</div>
<div class="section" id="qapidoc-139">
<h4>Since<a class="headerlink" href="#qapidoc-139" title="Permalink to this headline">¶</a></h4>
<p>2.8</p>
</div>
</div>
<div class="section" id="qapidoc-144">
<h3><code class="docutils literal notranslate"><span class="pre">SocketAddressLegacy</span></code> (Object)<a class="headerlink" href="#qapidoc-144" title="Permalink to this headline">¶</a></h3>
<p>Captures the address of a socket, which could also be a named file descriptor</p>
<div class="section" id="qapidoc-141">
<h4>Members<a class="headerlink" href="#qapidoc-141" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">type</span></code></dt>
<dd>One of <code class="docutils literal notranslate"><span class="pre">inet</span></code>, <code class="docutils literal notranslate"><span class="pre">unix</span></code>, <code class="docutils literal notranslate"><span class="pre">vsock</span></code>, <code class="docutils literal notranslate"><span class="pre">fd</span></code></dd>
<dt><code class="docutils literal notranslate"><span class="pre">data</span></code>: <code class="docutils literal notranslate"><span class="pre">InetSocketAddress</span></code> when <code class="docutils literal notranslate"><span class="pre">type</span></code> is <code class="docutils literal notranslate"><span class="pre">&quot;inet&quot;</span></code><dt><code class="docutils literal notranslate"><span class="pre">data</span></code>: <code class="docutils literal notranslate"><span class="pre">UnixSocketAddress</span></code> when <code class="docutils literal notranslate"><span class="pre">type</span></code> is <code class="docutils literal notranslate"><span class="pre">&quot;unix&quot;</span></code><dt><code class="docutils literal notranslate"><span class="pre">data</span></code>: <code class="docutils literal notranslate"><span class="pre">VsockSocketAddress</span></code> when <code class="docutils literal notranslate"><span class="pre">type</span></code> is <code class="docutils literal notranslate"><span class="pre">&quot;vsock&quot;</span></code><dt><code class="docutils literal notranslate"><span class="pre">data</span></code>: <code class="docutils literal notranslate"><span class="pre">String</span></code> when <code class="docutils literal notranslate"><span class="pre">type</span></code> is <code class="docutils literal notranslate"><span class="pre">&quot;fd&quot;</span></code></dl>
</div>
<div class="section" id="qapidoc-142">
<h4>Note<a class="headerlink" href="#qapidoc-142" title="Permalink to this headline">¶</a></h4>
<p>This type is deprecated in favor of SocketAddress.  The
difference between SocketAddressLegacy and SocketAddress is that the
latter is a flat union rather than a simple union. Flat is nicer
because it avoids nesting on the wire, i.e. that form has fewer {}.</p>
</div>
<div class="section" id="qapidoc-143">
<h4>Since<a class="headerlink" href="#qapidoc-143" title="Permalink to this headline">¶</a></h4>
<p>1.3</p>
</div>
</div>
<div class="section" id="qapidoc-147">
<h3><code class="docutils literal notranslate"><span class="pre">SocketAddressType</span></code> (Enum)<a class="headerlink" href="#qapidoc-147" title="Permalink to this headline">¶</a></h3>
<p>Available SocketAddress types</p>
<div class="section" id="qapidoc-145">
<h4>Values<a class="headerlink" href="#qapidoc-145" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">inet</span></code></dt>
<dd>Internet address</dd>
<dt><code class="docutils literal notranslate"><span class="pre">unix</span></code></dt>
<dd>Unix domain socket</dd>
<dt><code class="docutils literal notranslate"><span class="pre">vsock</span></code></dt>
<dd>VMCI address</dd>
<dt><code class="docutils literal notranslate"><span class="pre">fd</span></code></dt>
<dd>decimal is for file descriptor number, otherwise a file descriptor name.
Named file descriptors are permitted in monitor commands, in combination
with the ‘getfd’ command. Decimal file descriptors are permitted at
startup or other contexts where no monitor context is active.</dd>
</dl>
</div>
<div class="section" id="qapidoc-146">
<h4>Since<a class="headerlink" href="#qapidoc-146" title="Permalink to this headline">¶</a></h4>
<p>2.9</p>
</div>
</div>
<div class="section" id="qapidoc-150">
<h3><code class="docutils literal notranslate"><span class="pre">SocketAddress</span></code> (Object)<a class="headerlink" href="#qapidoc-150" title="Permalink to this headline">¶</a></h3>
<p>Captures the address of a socket, which could also be a named file
descriptor</p>
<div class="section" id="qapidoc-148">
<h4>Members<a class="headerlink" href="#qapidoc-148" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">type</span></code>: <code class="docutils literal notranslate"><span class="pre">SocketAddressType</span></code></dt>
<dd>Transport type</dd>
<dt>The members of <code class="docutils literal notranslate"><span class="pre">InetSocketAddress</span></code> when <code class="docutils literal notranslate"><span class="pre">type</span></code> is <code class="docutils literal notranslate"><span class="pre">&quot;inet&quot;</span></code><dt>The members of <code class="docutils literal notranslate"><span class="pre">UnixSocketAddress</span></code> when <code class="docutils literal notranslate"><span class="pre">type</span></code> is <code class="docutils literal notranslate"><span class="pre">&quot;unix&quot;</span></code><dt>The members of <code class="docutils literal notranslate"><span class="pre">VsockSocketAddress</span></code> when <code class="docutils literal notranslate"><span class="pre">type</span></code> is <code class="docutils literal notranslate"><span class="pre">&quot;vsock&quot;</span></code><dt>The members of <code class="docutils literal notranslate"><span class="pre">String</span></code> when <code class="docutils literal notranslate"><span class="pre">type</span></code> is <code class="docutils literal notranslate"><span class="pre">&quot;fd&quot;</span></code></dl>
</div>
<div class="section" id="qapidoc-149">
<h4>Since<a class="headerlink" href="#qapidoc-149" title="Permalink to this headline">¶</a></h4>
<p>2.9</p>
</div>
</div>
<div class="section" id="qapidoc-153">
<h3><code class="docutils literal notranslate"><span class="pre">SnapshotInfo</span></code> (Object)<a class="headerlink" href="#qapidoc-153" title="Permalink to this headline">¶</a></h3>
<div class="section" id="qapidoc-151">
<h4>Members<a class="headerlink" href="#qapidoc-151" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">id</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code></dt>
<dd>unique snapshot id</dd>
<dt><code class="docutils literal notranslate"><span class="pre">name</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code></dt>
<dd>user chosen name</dd>
<dt><code class="docutils literal notranslate"><span class="pre">vm-state-size</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code></dt>
<dd>size of the VM state</dd>
<dt><code class="docutils literal notranslate"><span class="pre">date-sec</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code></dt>
<dd>UTC date of the snapshot in seconds</dd>
<dt><code class="docutils literal notranslate"><span class="pre">date-nsec</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code></dt>
<dd>fractional part in nano seconds to be used with date-sec</dd>
<dt><code class="docutils literal notranslate"><span class="pre">vm-clock-sec</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code></dt>
<dd>VM clock relative to boot in seconds</dd>
<dt><code class="docutils literal notranslate"><span class="pre">vm-clock-nsec</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code></dt>
<dd>fractional part in nano seconds to be used with vm-clock-sec</dd>
<dt><code class="docutils literal notranslate"><span class="pre">icount</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code> (optional)</dt>
<dd>Current instruction count. Appears when execution record/replay
is enabled. Used for “time-traveling” to match the moment
in the recorded execution with the snapshots. This counter may
be obtained through <code class="docutils literal notranslate"><span class="pre">query-replay</span></code> command (since 5.2)</dd>
</dl>
</div>
<div class="section" id="qapidoc-152">
<h4>Since<a class="headerlink" href="#qapidoc-152" title="Permalink to this headline">¶</a></h4>
<p>1.3</p>
</div>
</div>
<div class="section" id="qapidoc-156">
<h3><code class="docutils literal notranslate"><span class="pre">ImageInfoSpecificQCow2EncryptionBase</span></code> (Object)<a class="headerlink" href="#qapidoc-156" title="Permalink to this headline">¶</a></h3>
<div class="section" id="qapidoc-154">
<h4>Members<a class="headerlink" href="#qapidoc-154" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">format</span></code>: <code class="docutils literal notranslate"><span class="pre">BlockdevQcow2EncryptionFormat</span></code></dt>
<dd>The encryption format</dd>
</dl>
</div>
<div class="section" id="qapidoc-155">
<h4>Since<a class="headerlink" href="#qapidoc-155" title="Permalink to this headline">¶</a></h4>
<p>2.10</p>
</div>
</div>
<div class="section" id="qapidoc-159">
<h3><code class="docutils literal notranslate"><span class="pre">ImageInfoSpecificQCow2Encryption</span></code> (Object)<a class="headerlink" href="#qapidoc-159" title="Permalink to this headline">¶</a></h3>
<div class="section" id="qapidoc-157">
<h4>Members<a class="headerlink" href="#qapidoc-157" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt>The members of <code class="docutils literal notranslate"><span class="pre">ImageInfoSpecificQCow2EncryptionBase</span></code><dt>The members of <code class="docutils literal notranslate"><span class="pre">QCryptoBlockInfoLUKS</span></code> when <code class="docutils literal notranslate"><span class="pre">format</span></code> is <code class="docutils literal notranslate"><span class="pre">&quot;luks&quot;</span></code></dl>
</div>
<div class="section" id="qapidoc-158">
<h4>Since<a class="headerlink" href="#qapidoc-158" title="Permalink to this headline">¶</a></h4>
<p>2.10</p>
</div>
</div>
<div class="section" id="qapidoc-162">
<h3><code class="docutils literal notranslate"><span class="pre">ImageInfoSpecificQCow2</span></code> (Object)<a class="headerlink" href="#qapidoc-162" title="Permalink to this headline">¶</a></h3>
<div class="section" id="qapidoc-160">
<h4>Members<a class="headerlink" href="#qapidoc-160" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">compat</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code></dt>
<dd>compatibility level</dd>
<dt><code class="docutils literal notranslate"><span class="pre">data-file</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code> (optional)</dt>
<dd>the filename of the external data file that is stored in the
image and used as a default for opening the image (since: 4.0)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">data-file-raw</span></code>: <code class="docutils literal notranslate"><span class="pre">boolean</span></code> (optional)</dt>
<dd>True if the external data file must stay valid as a
standalone (read-only) raw image without looking at qcow2
metadata (since: 4.0)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">extended-l2</span></code>: <code class="docutils literal notranslate"><span class="pre">boolean</span></code> (optional)</dt>
<dd>true if the image has extended L2 entries; only valid for
compat &gt;= 1.1 (since 5.2)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">lazy-refcounts</span></code>: <code class="docutils literal notranslate"><span class="pre">boolean</span></code> (optional)</dt>
<dd>on or off; only valid for compat &gt;= 1.1</dd>
<dt><code class="docutils literal notranslate"><span class="pre">corrupt</span></code>: <code class="docutils literal notranslate"><span class="pre">boolean</span></code> (optional)</dt>
<dd>true if the image has been marked corrupt; only valid for
compat &gt;= 1.1 (since 2.2)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">refcount-bits</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code></dt>
<dd>width of a refcount entry in bits (since 2.3)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">encrypt</span></code>: <code class="docutils literal notranslate"><span class="pre">ImageInfoSpecificQCow2Encryption</span></code> (optional)</dt>
<dd>details about encryption parameters; only set if image
is encrypted (since 2.10)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">bitmaps</span></code>: <code class="docutils literal notranslate"><span class="pre">array</span> <span class="pre">of</span> <span class="pre">Qcow2BitmapInfo</span></code> (optional)</dt>
<dd>A list of qcow2 bitmap details (since 4.0)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">compression-type</span></code>: <code class="docutils literal notranslate"><span class="pre">Qcow2CompressionType</span></code></dt>
<dd>the image cluster compression method (since 5.1)</dd>
</dl>
</div>
<div class="section" id="qapidoc-161">
<h4>Since<a class="headerlink" href="#qapidoc-161" title="Permalink to this headline">¶</a></h4>
<p>1.7</p>
</div>
</div>
<div class="section" id="qapidoc-165">
<h3><code class="docutils literal notranslate"><span class="pre">ImageInfoSpecificVmdk</span></code> (Object)<a class="headerlink" href="#qapidoc-165" title="Permalink to this headline">¶</a></h3>
<div class="section" id="qapidoc-163">
<h4>Members<a class="headerlink" href="#qapidoc-163" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">create-type</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code></dt>
<dd>The create type of VMDK image</dd>
<dt><code class="docutils literal notranslate"><span class="pre">cid</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code></dt>
<dd>Content id of image</dd>
<dt><code class="docutils literal notranslate"><span class="pre">parent-cid</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code></dt>
<dd>Parent VMDK image’s cid</dd>
<dt><code class="docutils literal notranslate"><span class="pre">extents</span></code>: <code class="docutils literal notranslate"><span class="pre">array</span> <span class="pre">of</span> <span class="pre">ImageInfo</span></code></dt>
<dd>List of extent files</dd>
</dl>
</div>
<div class="section" id="qapidoc-164">
<h4>Since<a class="headerlink" href="#qapidoc-164" title="Permalink to this headline">¶</a></h4>
<p>1.7</p>
</div>
</div>
<div class="section" id="qapidoc-168">
<h3><code class="docutils literal notranslate"><span class="pre">ImageInfoSpecific</span></code> (Object)<a class="headerlink" href="#qapidoc-168" title="Permalink to this headline">¶</a></h3>
<p>A discriminated record of image format specific information structures.</p>
<div class="section" id="qapidoc-166">
<h4>Members<a class="headerlink" href="#qapidoc-166" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">type</span></code></dt>
<dd>One of <code class="docutils literal notranslate"><span class="pre">qcow2</span></code>, <code class="docutils literal notranslate"><span class="pre">vmdk</span></code>, <code class="docutils literal notranslate"><span class="pre">luks</span></code></dd>
<dt><code class="docutils literal notranslate"><span class="pre">data</span></code>: <code class="docutils literal notranslate"><span class="pre">ImageInfoSpecificQCow2</span></code> when <code class="docutils literal notranslate"><span class="pre">type</span></code> is <code class="docutils literal notranslate"><span class="pre">&quot;qcow2&quot;</span></code><dt><code class="docutils literal notranslate"><span class="pre">data</span></code>: <code class="docutils literal notranslate"><span class="pre">ImageInfoSpecificVmdk</span></code> when <code class="docutils literal notranslate"><span class="pre">type</span></code> is <code class="docutils literal notranslate"><span class="pre">&quot;vmdk&quot;</span></code><dt><code class="docutils literal notranslate"><span class="pre">data</span></code>: <code class="docutils literal notranslate"><span class="pre">QCryptoBlockInfoLUKS</span></code> when <code class="docutils literal notranslate"><span class="pre">type</span></code> is <code class="docutils literal notranslate"><span class="pre">&quot;luks&quot;</span></code></dl>
</div>
<div class="section" id="qapidoc-167">
<h4>Since<a class="headerlink" href="#qapidoc-167" title="Permalink to this headline">¶</a></h4>
<p>1.7</p>
</div>
</div>
<div class="section" id="qapidoc-171">
<h3><code class="docutils literal notranslate"><span class="pre">ImageInfo</span></code> (Object)<a class="headerlink" href="#qapidoc-171" title="Permalink to this headline">¶</a></h3>
<p>Information about a QEMU image file</p>
<div class="section" id="qapidoc-169">
<h4>Members<a class="headerlink" href="#qapidoc-169" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">filename</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code></dt>
<dd>name of the image file</dd>
<dt><code class="docutils literal notranslate"><span class="pre">format</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code></dt>
<dd>format of the image file</dd>
<dt><code class="docutils literal notranslate"><span class="pre">virtual-size</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code></dt>
<dd>maximum capacity in bytes of the image</dd>
<dt><code class="docutils literal notranslate"><span class="pre">actual-size</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code> (optional)</dt>
<dd>actual size on disk in bytes of the image</dd>
<dt><code class="docutils literal notranslate"><span class="pre">dirty-flag</span></code>: <code class="docutils literal notranslate"><span class="pre">boolean</span></code> (optional)</dt>
<dd>true if image is not cleanly closed</dd>
<dt><code class="docutils literal notranslate"><span class="pre">cluster-size</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code> (optional)</dt>
<dd>size of a cluster in bytes</dd>
<dt><code class="docutils literal notranslate"><span class="pre">encrypted</span></code>: <code class="docutils literal notranslate"><span class="pre">boolean</span></code> (optional)</dt>
<dd>true if the image is encrypted</dd>
<dt><code class="docutils literal notranslate"><span class="pre">compressed</span></code>: <code class="docutils literal notranslate"><span class="pre">boolean</span></code> (optional)</dt>
<dd>true if the image is compressed (Since 1.7)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">backing-filename</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code> (optional)</dt>
<dd>name of the backing file</dd>
<dt><code class="docutils literal notranslate"><span class="pre">full-backing-filename</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code> (optional)</dt>
<dd>full path of the backing file</dd>
<dt><code class="docutils literal notranslate"><span class="pre">backing-filename-format</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code> (optional)</dt>
<dd>the format of the backing file</dd>
<dt><code class="docutils literal notranslate"><span class="pre">snapshots</span></code>: <code class="docutils literal notranslate"><span class="pre">array</span> <span class="pre">of</span> <span class="pre">SnapshotInfo</span></code> (optional)</dt>
<dd>list of VM snapshots</dd>
<dt><code class="docutils literal notranslate"><span class="pre">backing-image</span></code>: <code class="docutils literal notranslate"><span class="pre">ImageInfo</span></code> (optional)</dt>
<dd>info of the backing image (since 1.6)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">format-specific</span></code>: <code class="docutils literal notranslate"><span class="pre">ImageInfoSpecific</span></code> (optional)</dt>
<dd>structure supplying additional format-specific
information (since 1.7)</dd>
</dl>
</div>
<div class="section" id="qapidoc-170">
<h4>Since<a class="headerlink" href="#qapidoc-170" title="Permalink to this headline">¶</a></h4>
<p>1.3</p>
</div>
</div>
<div class="section" id="qapidoc-174">
<h3><code class="docutils literal notranslate"><span class="pre">ImageCheck</span></code> (Object)<a class="headerlink" href="#qapidoc-174" title="Permalink to this headline">¶</a></h3>
<p>Information about a QEMU image file check</p>
<div class="section" id="qapidoc-172">
<h4>Members<a class="headerlink" href="#qapidoc-172" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">filename</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code></dt>
<dd>name of the image file checked</dd>
<dt><code class="docutils literal notranslate"><span class="pre">format</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code></dt>
<dd>format of the image file checked</dd>
<dt><code class="docutils literal notranslate"><span class="pre">check-errors</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code></dt>
<dd>number of unexpected errors occurred during check</dd>
<dt><code class="docutils literal notranslate"><span class="pre">image-end-offset</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code> (optional)</dt>
<dd>offset (in bytes) where the image ends, this
field is present if the driver for the image format
supports it</dd>
<dt><code class="docutils literal notranslate"><span class="pre">corruptions</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code> (optional)</dt>
<dd>number of corruptions found during the check if any</dd>
<dt><code class="docutils literal notranslate"><span class="pre">leaks</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code> (optional)</dt>
<dd>number of leaks found during the check if any</dd>
<dt><code class="docutils literal notranslate"><span class="pre">corruptions-fixed</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code> (optional)</dt>
<dd>number of corruptions fixed during the check
if any</dd>
<dt><code class="docutils literal notranslate"><span class="pre">leaks-fixed</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code> (optional)</dt>
<dd>number of leaks fixed during the check if any</dd>
<dt><code class="docutils literal notranslate"><span class="pre">total-clusters</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code> (optional)</dt>
<dd>total number of clusters, this field is present
if the driver for the image format supports it</dd>
<dt><code class="docutils literal notranslate"><span class="pre">allocated-clusters</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code> (optional)</dt>
<dd>total number of allocated clusters, this
field is present if the driver for the image format
supports it</dd>
<dt><code class="docutils literal notranslate"><span class="pre">fragmented-clusters</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code> (optional)</dt>
<dd>total number of fragmented clusters, this
field is present if the driver for the image format
supports it</dd>
<dt><code class="docutils literal notranslate"><span class="pre">compressed-clusters</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code> (optional)</dt>
<dd>total number of compressed clusters, this
field is present if the driver for the image format
supports it</dd>
</dl>
</div>
<div class="section" id="qapidoc-173">
<h4>Since<a class="headerlink" href="#qapidoc-173" title="Permalink to this headline">¶</a></h4>
<p>1.4</p>
</div>
</div>
<div class="section" id="qapidoc-177">
<h3><code class="docutils literal notranslate"><span class="pre">MapEntry</span></code> (Object)<a class="headerlink" href="#qapidoc-177" title="Permalink to this headline">¶</a></h3>
<p>Mapping information from a virtual block range to a host file range</p>
<div class="section" id="qapidoc-175">
<h4>Members<a class="headerlink" href="#qapidoc-175" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">start</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code></dt>
<dd>virtual (guest) offset of the first byte described by this
entry</dd>
<dt><code class="docutils literal notranslate"><span class="pre">length</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code></dt>
<dd>the number of bytes of the mapped virtual range</dd>
<dt><code class="docutils literal notranslate"><span class="pre">data</span></code>: <code class="docutils literal notranslate"><span class="pre">boolean</span></code></dt>
<dd>reading the image will actually read data from a file (in
particular, if <code class="docutils literal notranslate"><span class="pre">offset</span></code> is present this means that the sectors
are not simply preallocated, but contain actual data in raw
format)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">zero</span></code>: <code class="docutils literal notranslate"><span class="pre">boolean</span></code></dt>
<dd>whether the virtual blocks read as zeroes</dd>
<dt><code class="docutils literal notranslate"><span class="pre">depth</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code></dt>
<dd>number of layers (0 = top image, 1 = top image’s backing
file, …, n - 1 = bottom image (where n is the number of
images in the chain)) before reaching one for which the
range is allocated</dd>
<dt><code class="docutils literal notranslate"><span class="pre">offset</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code> (optional)</dt>
<dd>if present, the image file stores the data for this range
in raw format at the given (host) offset</dd>
<dt><code class="docutils literal notranslate"><span class="pre">filename</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code> (optional)</dt>
<dd>filename that is referred to by <code class="docutils literal notranslate"><span class="pre">offset</span></code></dd>
</dl>
</div>
<div class="section" id="qapidoc-176">
<h4>Since<a class="headerlink" href="#qapidoc-176" title="Permalink to this headline">¶</a></h4>
<p>2.6</p>
</div>
</div>
<div class="section" id="qapidoc-180">
<h3><code class="docutils literal notranslate"><span class="pre">BlockdevCacheInfo</span></code> (Object)<a class="headerlink" href="#qapidoc-180" title="Permalink to this headline">¶</a></h3>
<p>Cache mode information for a block device</p>
<div class="section" id="qapidoc-178">
<h4>Members<a class="headerlink" href="#qapidoc-178" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">writeback</span></code>: <code class="docutils literal notranslate"><span class="pre">boolean</span></code></dt>
<dd>true if writeback mode is enabled</dd>
<dt><code class="docutils literal notranslate"><span class="pre">direct</span></code>: <code class="docutils literal notranslate"><span class="pre">boolean</span></code></dt>
<dd>true if the host page cache is bypassed (O_DIRECT)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">no-flush</span></code>: <code class="docutils literal notranslate"><span class="pre">boolean</span></code></dt>
<dd>true if flush requests are ignored for the device</dd>
</dl>
</div>
<div class="section" id="qapidoc-179">
<h4>Since<a class="headerlink" href="#qapidoc-179" title="Permalink to this headline">¶</a></h4>
<p>2.3</p>
</div>
</div>
<div class="section" id="qapidoc-184">
<h3><code class="docutils literal notranslate"><span class="pre">BlockDeviceInfo</span></code> (Object)<a class="headerlink" href="#qapidoc-184" title="Permalink to this headline">¶</a></h3>
<p>Information about the backing device for a block device.</p>
<div class="section" id="qapidoc-181">
<h4>Members<a class="headerlink" href="#qapidoc-181" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">file</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code></dt>
<dd>the filename of the backing device</dd>
<dt><code class="docutils literal notranslate"><span class="pre">node-name</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code> (optional)</dt>
<dd>the name of the block driver node (Since 2.0)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">ro</span></code>: <code class="docutils literal notranslate"><span class="pre">boolean</span></code></dt>
<dd>true if the backing device was open read-only</dd>
<dt><code class="docutils literal notranslate"><span class="pre">drv</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code></dt>
<dd>the name of the block format used to open the backing device. As of
0.14 this can be: ‘blkdebug’, ‘bochs’, ‘cloop’, ‘cow’, ‘dmg’,
‘file’, ‘file’, ‘ftp’, ‘ftps’, ‘host_cdrom’, ‘host_device’,
‘http’, ‘https’, ‘luks’, ‘nbd’, ‘parallels’, ‘qcow’,
‘qcow2’, ‘raw’, ‘vdi’, ‘vmdk’, ‘vpc’, ‘vvfat’
2.2: ‘archipelago’ added, ‘cow’ dropped
2.3: ‘host_floppy’ deprecated
2.5: ‘host_floppy’ dropped
2.6: ‘luks’ added
2.8: ‘replication’ added, ‘tftp’ dropped
2.9: ‘archipelago’ dropped</dd>
<dt><code class="docutils literal notranslate"><span class="pre">backing_file</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code> (optional)</dt>
<dd>the name of the backing file (for copy-on-write)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">backing_file_depth</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code></dt>
<dd>number of files in the backing file chain (since: 1.2)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">encrypted</span></code>: <code class="docutils literal notranslate"><span class="pre">boolean</span></code></dt>
<dd>true if the backing device is encrypted</dd>
<dt><code class="docutils literal notranslate"><span class="pre">encryption_key_missing</span></code>: <code class="docutils literal notranslate"><span class="pre">boolean</span></code></dt>
<dd>always false</dd>
<dt><code class="docutils literal notranslate"><span class="pre">detect_zeroes</span></code>: <code class="docutils literal notranslate"><span class="pre">BlockdevDetectZeroesOptions</span></code></dt>
<dd>detect and optimize zero writes (Since 2.1)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">bps</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code></dt>
<dd>total throughput limit in bytes per second is specified</dd>
<dt><code class="docutils literal notranslate"><span class="pre">bps_rd</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code></dt>
<dd>read throughput limit in bytes per second is specified</dd>
<dt><code class="docutils literal notranslate"><span class="pre">bps_wr</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code></dt>
<dd>write throughput limit in bytes per second is specified</dd>
<dt><code class="docutils literal notranslate"><span class="pre">iops</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code></dt>
<dd>total I/O operations per second is specified</dd>
<dt><code class="docutils literal notranslate"><span class="pre">iops_rd</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code></dt>
<dd>read I/O operations per second is specified</dd>
<dt><code class="docutils literal notranslate"><span class="pre">iops_wr</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code></dt>
<dd>write I/O operations per second is specified</dd>
<dt><code class="docutils literal notranslate"><span class="pre">image</span></code>: <code class="docutils literal notranslate"><span class="pre">ImageInfo</span></code></dt>
<dd>the info of image used (since: 1.6)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">bps_max</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code> (optional)</dt>
<dd><dl class="first last docutils">
<dt>total throughput limit during bursts,</dt>
<dd>in bytes (Since 1.7)</dd>
</dl>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">bps_rd_max</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code> (optional)</dt>
<dd><dl class="first last docutils">
<dt>read throughput limit during bursts,</dt>
<dd>in bytes (Since 1.7)</dd>
</dl>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">bps_wr_max</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code> (optional)</dt>
<dd><dl class="first last docutils">
<dt>write throughput limit during bursts,</dt>
<dd>in bytes (Since 1.7)</dd>
</dl>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">iops_max</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code> (optional)</dt>
<dd><dl class="first last docutils">
<dt>total I/O operations per second during bursts,</dt>
<dd>in bytes (Since 1.7)</dd>
</dl>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">iops_rd_max</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code> (optional)</dt>
<dd><dl class="first last docutils">
<dt>read I/O operations per second during bursts,</dt>
<dd>in bytes (Since 1.7)</dd>
</dl>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">iops_wr_max</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code> (optional)</dt>
<dd><dl class="first last docutils">
<dt>write I/O operations per second during bursts,</dt>
<dd>in bytes (Since 1.7)</dd>
</dl>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">bps_max_length</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code> (optional)</dt>
<dd><dl class="first last docutils">
<dt>maximum length of the <code class="docutils literal notranslate"><span class="pre">bps_max</span></code> burst</dt>
<dd>period, in seconds. (Since 2.6)</dd>
</dl>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">bps_rd_max_length</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code> (optional)</dt>
<dd><dl class="first last docutils">
<dt>maximum length of the <code class="docutils literal notranslate"><span class="pre">bps_rd_max</span></code></dt>
<dd>burst period, in seconds. (Since 2.6)</dd>
</dl>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">bps_wr_max_length</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code> (optional)</dt>
<dd><dl class="first last docutils">
<dt>maximum length of the <code class="docutils literal notranslate"><span class="pre">bps_wr_max</span></code></dt>
<dd>burst period, in seconds. (Since 2.6)</dd>
</dl>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">iops_max_length</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code> (optional)</dt>
<dd><dl class="first last docutils">
<dt>maximum length of the <code class="docutils literal notranslate"><span class="pre">iops</span></code> burst</dt>
<dd>period, in seconds. (Since 2.6)</dd>
</dl>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">iops_rd_max_length</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code> (optional)</dt>
<dd><dl class="first last docutils">
<dt>maximum length of the <code class="docutils literal notranslate"><span class="pre">iops_rd_max</span></code></dt>
<dd>burst period, in seconds. (Since 2.6)</dd>
</dl>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">iops_wr_max_length</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code> (optional)</dt>
<dd><dl class="first last docutils">
<dt>maximum length of the <code class="docutils literal notranslate"><span class="pre">iops_wr_max</span></code></dt>
<dd>burst period, in seconds. (Since 2.6)</dd>
</dl>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">iops_size</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code> (optional)</dt>
<dd>an I/O size in bytes (Since 1.7)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">group</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code> (optional)</dt>
<dd>throttle group name (Since 2.4)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">cache</span></code>: <code class="docutils literal notranslate"><span class="pre">BlockdevCacheInfo</span></code></dt>
<dd>the cache mode used for the block device (since: 2.3)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">write_threshold</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code></dt>
<dd>configured write threshold for the device.
0 if disabled. (Since 2.3)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">dirty-bitmaps</span></code>: <code class="docutils literal notranslate"><span class="pre">array</span> <span class="pre">of</span> <span class="pre">BlockDirtyInfo</span></code> (optional)</dt>
<dd>dirty bitmaps information (only present if node
has one or more dirty bitmaps) (Since 4.2)</dd>
</dl>
</div>
<div class="section" id="qapidoc-182">
<h4>Features<a class="headerlink" href="#qapidoc-182" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">deprecated</span></code></dt>
<dd>Member <code class="docutils literal notranslate"><span class="pre">encryption_key_missing</span></code> is deprecated.  It is
always false.</dd>
</dl>
</div>
<div class="section" id="qapidoc-183">
<h4>Since<a class="headerlink" href="#qapidoc-183" title="Permalink to this headline">¶</a></h4>
<p>0.14</p>
</div>
</div>
<div class="section" id="qapidoc-187">
<h3><code class="docutils literal notranslate"><span class="pre">BlockDeviceIoStatus</span></code> (Enum)<a class="headerlink" href="#qapidoc-187" title="Permalink to this headline">¶</a></h3>
<p>An enumeration of block device I/O status.</p>
<div class="section" id="qapidoc-185">
<h4>Values<a class="headerlink" href="#qapidoc-185" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">ok</span></code></dt>
<dd>The last I/O operation has succeeded</dd>
<dt><code class="docutils literal notranslate"><span class="pre">failed</span></code></dt>
<dd>The last I/O operation has failed</dd>
<dt><code class="docutils literal notranslate"><span class="pre">nospace</span></code></dt>
<dd>The last I/O operation has failed due to a no-space condition</dd>
</dl>
</div>
<div class="section" id="qapidoc-186">
<h4>Since<a class="headerlink" href="#qapidoc-186" title="Permalink to this headline">¶</a></h4>
<p>1.0</p>
</div>
</div>
<div class="section" id="qapidoc-190">
<h3><code class="docutils literal notranslate"><span class="pre">DirtyBitmapStatus</span></code> (Enum)<a class="headerlink" href="#qapidoc-190" title="Permalink to this headline">¶</a></h3>
<p>An enumeration of possible states that a dirty bitmap can report to the user.</p>
<div class="section" id="qapidoc-188">
<h4>Values<a class="headerlink" href="#qapidoc-188" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">frozen</span></code></dt>
<dd>The bitmap is currently in-use by some operation and is immutable.
If the bitmap was <code class="docutils literal notranslate"><span class="pre">active</span></code> prior to the operation, new writes by the
guest are being recorded in a temporary buffer, and will not be lost.
Generally, bitmaps are cleared on successful use in an operation and
the temporary buffer is committed into the bitmap. On failure, the
temporary buffer is merged back into the bitmap without first
clearing it.
Please refer to the documentation for each bitmap-using operation,
See also <code class="docutils literal notranslate"><span class="pre">blockdev-backup</span></code>, <code class="docutils literal notranslate"><span class="pre">drive-backup</span></code>.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">disabled</span></code></dt>
<dd>The bitmap is not currently recording new writes by the guest.
This is requested explicitly via <code class="docutils literal notranslate"><span class="pre">block-dirty-bitmap-disable</span></code>.
It can still be cleared, deleted, or used for backup operations.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">active</span></code></dt>
<dd>The bitmap is actively monitoring for new writes, and can be cleared,
deleted, or used for backup operations.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">locked</span></code></dt>
<dd>The bitmap is currently in-use by some operation and is immutable.
If the bitmap was <code class="docutils literal notranslate"><span class="pre">active</span></code> prior to the operation, it is still
recording new writes. If the bitmap was <code class="docutils literal notranslate"><span class="pre">disabled</span></code>, it is not
recording new writes. (Since 2.12)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">inconsistent</span></code></dt>
<dd>This is a persistent dirty bitmap that was marked in-use on
disk, and is unusable by QEMU. It can only be deleted.
Please rely on the inconsistent field in <code class="docutils literal notranslate"><span class="pre">BlockDirtyInfo</span></code>
instead, as the status field is deprecated. (Since 4.0)</dd>
</dl>
</div>
<div class="section" id="qapidoc-189">
<h4>Since<a class="headerlink" href="#qapidoc-189" title="Permalink to this headline">¶</a></h4>
<p>2.4</p>
</div>
</div>
<div class="section" id="qapidoc-194">
<h3><code class="docutils literal notranslate"><span class="pre">BlockDirtyInfo</span></code> (Object)<a class="headerlink" href="#qapidoc-194" title="Permalink to this headline">¶</a></h3>
<p>Block dirty bitmap information.</p>
<div class="section" id="qapidoc-191">
<h4>Members<a class="headerlink" href="#qapidoc-191" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">name</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code> (optional)</dt>
<dd>the name of the dirty bitmap (Since 2.4)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">count</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code></dt>
<dd>number of dirty bytes according to the dirty bitmap</dd>
<dt><code class="docutils literal notranslate"><span class="pre">granularity</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code></dt>
<dd>granularity of the dirty bitmap in bytes (since 1.4)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">status</span></code>: <code class="docutils literal notranslate"><span class="pre">DirtyBitmapStatus</span></code></dt>
<dd>current status of the dirty bitmap (since 2.4)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">recording</span></code>: <code class="docutils literal notranslate"><span class="pre">boolean</span></code></dt>
<dd>true if the bitmap is recording new writes from the guest.
Replaces <cite>active</cite> and <cite>disabled</cite> statuses. (since 4.0)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">busy</span></code>: <code class="docutils literal notranslate"><span class="pre">boolean</span></code></dt>
<dd>true if the bitmap is in-use by some operation (NBD or jobs)
and cannot be modified via QMP or used by another operation.
Replaces <cite>locked</cite> and <cite>frozen</cite> statuses. (since 4.0)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">persistent</span></code>: <code class="docutils literal notranslate"><span class="pre">boolean</span></code></dt>
<dd>true if the bitmap was stored on disk, is scheduled to be stored
on disk, or both. (since 4.0)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">inconsistent</span></code>: <code class="docutils literal notranslate"><span class="pre">boolean</span></code> (optional)</dt>
<dd>true if this is a persistent bitmap that was improperly
stored. Implies <code class="docutils literal notranslate"><span class="pre">persistent</span></code> to be true; <code class="docutils literal notranslate"><span class="pre">recording</span></code> and
<code class="docutils literal notranslate"><span class="pre">busy</span></code> to be false. This bitmap cannot be used. To remove
it, use <code class="docutils literal notranslate"><span class="pre">block-dirty-bitmap-remove</span></code>. (Since 4.0)</dd>
</dl>
</div>
<div class="section" id="qapidoc-192">
<h4>Features<a class="headerlink" href="#qapidoc-192" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">deprecated</span></code></dt>
<dd>Member <code class="docutils literal notranslate"><span class="pre">status</span></code> is deprecated.  Use <code class="docutils literal notranslate"><span class="pre">recording</span></code> and
<code class="docutils literal notranslate"><span class="pre">locked</span></code> instead.</dd>
</dl>
</div>
<div class="section" id="qapidoc-193">
<h4>Since<a class="headerlink" href="#qapidoc-193" title="Permalink to this headline">¶</a></h4>
<p>1.3</p>
</div>
</div>
<div class="section" id="qapidoc-197">
<h3><code class="docutils literal notranslate"><span class="pre">Qcow2BitmapInfoFlags</span></code> (Enum)<a class="headerlink" href="#qapidoc-197" title="Permalink to this headline">¶</a></h3>
<p>An enumeration of flags that a bitmap can report to the user.</p>
<div class="section" id="qapidoc-195">
<h4>Values<a class="headerlink" href="#qapidoc-195" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">in-use</span></code></dt>
<dd>This flag is set by any process actively modifying the qcow2 file,
and cleared when the updated bitmap is flushed to the qcow2 image.
The presence of this flag in an offline image means that the bitmap
was not saved correctly after its last usage, and may contain
inconsistent data.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">auto</span></code></dt>
<dd>The bitmap must reflect all changes of the virtual disk by any
application that would write to this qcow2 file.</dd>
</dl>
</div>
<div class="section" id="qapidoc-196">
<h4>Since<a class="headerlink" href="#qapidoc-196" title="Permalink to this headline">¶</a></h4>
<p>4.0</p>
</div>
</div>
<div class="section" id="qapidoc-200">
<h3><code class="docutils literal notranslate"><span class="pre">Qcow2BitmapInfo</span></code> (Object)<a class="headerlink" href="#qapidoc-200" title="Permalink to this headline">¶</a></h3>
<p>Qcow2 bitmap information.</p>
<div class="section" id="qapidoc-198">
<h4>Members<a class="headerlink" href="#qapidoc-198" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">name</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code></dt>
<dd>the name of the bitmap</dd>
<dt><code class="docutils literal notranslate"><span class="pre">granularity</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code></dt>
<dd>granularity of the bitmap in bytes</dd>
<dt><code class="docutils literal notranslate"><span class="pre">flags</span></code>: <code class="docutils literal notranslate"><span class="pre">array</span> <span class="pre">of</span> <span class="pre">Qcow2BitmapInfoFlags</span></code></dt>
<dd>flags of the bitmap</dd>
</dl>
</div>
<div class="section" id="qapidoc-199">
<h4>Since<a class="headerlink" href="#qapidoc-199" title="Permalink to this headline">¶</a></h4>
<p>4.0</p>
</div>
</div>
<div class="section" id="qapidoc-204">
<h3><code class="docutils literal notranslate"><span class="pre">BlockLatencyHistogramInfo</span></code> (Object)<a class="headerlink" href="#qapidoc-204" title="Permalink to this headline">¶</a></h3>
<p>Block latency histogram.</p>
<div class="section" id="qapidoc-201">
<h4>Members<a class="headerlink" href="#qapidoc-201" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">boundaries</span></code>: <code class="docutils literal notranslate"><span class="pre">array</span> <span class="pre">of</span> <span class="pre">int</span></code></dt>
<dd>list of interval boundary values in nanoseconds, all greater
than zero and in ascending order.
For example, the list [10, 50, 100] produces the following
histogram intervals: [0, 10), [10, 50), [50, 100), [100, +inf).</dd>
<dt><code class="docutils literal notranslate"><span class="pre">bins</span></code>: <code class="docutils literal notranslate"><span class="pre">array</span> <span class="pre">of</span> <span class="pre">int</span></code></dt>
<dd>list of io request counts corresponding to histogram intervals.
len(<code class="docutils literal notranslate"><span class="pre">bins</span></code>) = len(<code class="docutils literal notranslate"><span class="pre">boundaries</span></code>) + 1
For the example above, <code class="docutils literal notranslate"><span class="pre">bins</span></code> may be something like [3, 1, 5, 2],
and corresponding histogram looks like:</dd>
</dl>
</div>
<div class="section" id="qapidoc-202">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">5</span><span class="o">|</span>           <span class="o">*</span>
<span class="mi">4</span><span class="o">|</span>           <span class="o">*</span>
<span class="mi">3</span><span class="o">|</span> <span class="o">*</span>         <span class="o">*</span>
<span class="mi">2</span><span class="o">|</span> <span class="o">*</span>         <span class="o">*</span>    <span class="o">*</span>
<span class="mi">1</span><span class="o">|</span> <span class="o">*</span>    <span class="o">*</span>    <span class="o">*</span>    <span class="o">*</span>
 <span class="o">+------------------</span>
     <span class="mi">10</span>   <span class="mi">50</span>   <span class="mi">100</span>
</pre></div>
</div>
</div>
<div class="section" id="qapidoc-203">
<h4>Since<a class="headerlink" href="#qapidoc-203" title="Permalink to this headline">¶</a></h4>
<p>4.0</p>
</div>
</div>
<div class="section" id="qapidoc-208">
<h3><code class="docutils literal notranslate"><span class="pre">BlockInfo</span></code> (Object)<a class="headerlink" href="#qapidoc-208" title="Permalink to this headline">¶</a></h3>
<p>Block device information.  This structure describes a virtual device and
the backing device associated with it.</p>
<div class="section" id="qapidoc-205">
<h4>Members<a class="headerlink" href="#qapidoc-205" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">device</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code></dt>
<dd>The device name associated with the virtual device.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">qdev</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code> (optional)</dt>
<dd>The qdev ID, or if no ID is assigned, the QOM path of the block
device. (since 2.10)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">type</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code></dt>
<dd>This field is returned only for compatibility reasons, it should
not be used (always returns ‘unknown’)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">removable</span></code>: <code class="docutils literal notranslate"><span class="pre">boolean</span></code></dt>
<dd>True if the device supports removable media.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">locked</span></code>: <code class="docutils literal notranslate"><span class="pre">boolean</span></code></dt>
<dd>True if the guest has locked this device from having its media
removed</dd>
<dt><code class="docutils literal notranslate"><span class="pre">tray_open</span></code>: <code class="docutils literal notranslate"><span class="pre">boolean</span></code> (optional)</dt>
<dd>True if the device’s tray is open
(only present if it has a tray)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">dirty-bitmaps</span></code>: <code class="docutils literal notranslate"><span class="pre">array</span> <span class="pre">of</span> <span class="pre">BlockDirtyInfo</span></code> (optional)</dt>
<dd>dirty bitmaps information (only present if the
driver has one or more dirty bitmaps) (Since 2.0)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">io-status</span></code>: <code class="docutils literal notranslate"><span class="pre">BlockDeviceIoStatus</span></code> (optional)</dt>
<dd><code class="docutils literal notranslate"><span class="pre">BlockDeviceIoStatus</span></code>. Only present if the device
supports it and the VM is configured to stop on errors
(supported device models: virtio-blk, IDE, SCSI except
scsi-generic)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">inserted</span></code>: <code class="docutils literal notranslate"><span class="pre">BlockDeviceInfo</span></code> (optional)</dt>
<dd><code class="docutils literal notranslate"><span class="pre">BlockDeviceInfo</span></code> describing the device if media is
present</dd>
</dl>
</div>
<div class="section" id="qapidoc-206">
<h4>Features<a class="headerlink" href="#qapidoc-206" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">deprecated</span></code></dt>
<dd>Member <code class="docutils literal notranslate"><span class="pre">dirty-bitmaps</span></code> is deprecated.  Use <code class="docutils literal notranslate"><span class="pre">inserted</span></code>
member <code class="docutils literal notranslate"><span class="pre">dirty-bitmaps</span></code> instead.</dd>
</dl>
</div>
<div class="section" id="qapidoc-207">
<h4>Since<a class="headerlink" href="#qapidoc-207" title="Permalink to this headline">¶</a></h4>
<p>0.14</p>
</div>
</div>
<div class="section" id="qapidoc-211">
<h3><code class="docutils literal notranslate"><span class="pre">BlockMeasureInfo</span></code> (Object)<a class="headerlink" href="#qapidoc-211" title="Permalink to this headline">¶</a></h3>
<p>Image file size calculation information.  This structure describes the size
requirements for creating a new image file.</p>
<p>The size requirements depend on the new image file format.  File size always
equals virtual disk size for the ‘raw’ format, even for sparse POSIX files.
Compact formats such as ‘qcow2’ represent unallocated and zero regions
efficiently so file size may be smaller than virtual disk size.</p>
<p>The values are upper bounds that are guaranteed to fit the new image file.
Subsequent modification, such as internal snapshot or further bitmap
creation, may require additional space and is not covered here.</p>
<div class="section" id="qapidoc-209">
<h4>Members<a class="headerlink" href="#qapidoc-209" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">required</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code></dt>
<dd>Size required for a new image file, in bytes, when copying just
allocated guest-visible contents.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">fully-allocated</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code></dt>
<dd>Image file size, in bytes, once data has been written
to all sectors, when copying just guest-visible contents.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">bitmaps</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code> (optional)</dt>
<dd>Additional size required if all the top-level bitmap metadata
in the source image were to be copied to the destination,
present only when source and destination both support
persistent bitmaps. (since 5.1)</dd>
</dl>
</div>
<div class="section" id="qapidoc-210">
<h4>Since<a class="headerlink" href="#qapidoc-210" title="Permalink to this headline">¶</a></h4>
<p>2.10</p>
</div>
</div>
<div class="section" id="qapidoc-215">
<h3><code class="docutils literal notranslate"><span class="pre">query-block</span></code> (Command)<a class="headerlink" href="#qapidoc-215" title="Permalink to this headline">¶</a></h3>
<p>Get a list of BlockInfo for all virtual block devices.</p>
<div class="section" id="qapidoc-212">
<h4>Returns<a class="headerlink" href="#qapidoc-212" title="Permalink to this headline">¶</a></h4>
<p>a list of <code class="docutils literal notranslate"><span class="pre">BlockInfo</span></code> describing each virtual block device. Filter
nodes that were created implicitly are skipped over.</p>
</div>
<div class="section" id="qapidoc-213">
<h4>Since<a class="headerlink" href="#qapidoc-213" title="Permalink to this headline">¶</a></h4>
<p>0.14</p>
</div>
<div class="section" id="qapidoc-214">
<h4>Example<a class="headerlink" href="#qapidoc-214" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-&gt;</span> <span class="p">{</span> <span class="s2">&quot;execute&quot;</span><span class="p">:</span> <span class="s2">&quot;query-block&quot;</span> <span class="p">}</span>
<span class="o">&lt;-</span> <span class="p">{</span>
      <span class="s2">&quot;return&quot;</span><span class="p">:[</span>
         <span class="p">{</span>
            <span class="s2">&quot;io-status&quot;</span><span class="p">:</span> <span class="s2">&quot;ok&quot;</span><span class="p">,</span>
            <span class="s2">&quot;device&quot;</span><span class="p">:</span><span class="s2">&quot;ide0-hd0&quot;</span><span class="p">,</span>
            <span class="s2">&quot;locked&quot;</span><span class="p">:</span><span class="n">false</span><span class="p">,</span>
            <span class="s2">&quot;removable&quot;</span><span class="p">:</span><span class="n">false</span><span class="p">,</span>
            <span class="s2">&quot;inserted&quot;</span><span class="p">:{</span>
               <span class="s2">&quot;ro&quot;</span><span class="p">:</span><span class="n">false</span><span class="p">,</span>
               <span class="s2">&quot;drv&quot;</span><span class="p">:</span><span class="s2">&quot;qcow2&quot;</span><span class="p">,</span>
               <span class="s2">&quot;encrypted&quot;</span><span class="p">:</span><span class="n">false</span><span class="p">,</span>
               <span class="s2">&quot;file&quot;</span><span class="p">:</span><span class="s2">&quot;disks/test.qcow2&quot;</span><span class="p">,</span>
               <span class="s2">&quot;backing_file_depth&quot;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span>
               <span class="s2">&quot;bps&quot;</span><span class="p">:</span><span class="mi">1000000</span><span class="p">,</span>
               <span class="s2">&quot;bps_rd&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
               <span class="s2">&quot;bps_wr&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
               <span class="s2">&quot;iops&quot;</span><span class="p">:</span><span class="mi">1000000</span><span class="p">,</span>
               <span class="s2">&quot;iops_rd&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
               <span class="s2">&quot;iops_wr&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
               <span class="s2">&quot;bps_max&quot;</span><span class="p">:</span> <span class="mi">8000000</span><span class="p">,</span>
               <span class="s2">&quot;bps_rd_max&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
               <span class="s2">&quot;bps_wr_max&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
               <span class="s2">&quot;iops_max&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
               <span class="s2">&quot;iops_rd_max&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
               <span class="s2">&quot;iops_wr_max&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
               <span class="s2">&quot;iops_size&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
               <span class="s2">&quot;detect_zeroes&quot;</span><span class="p">:</span> <span class="s2">&quot;on&quot;</span><span class="p">,</span>
               <span class="s2">&quot;write_threshold&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
               <span class="s2">&quot;image&quot;</span><span class="p">:{</span>
                  <span class="s2">&quot;filename&quot;</span><span class="p">:</span><span class="s2">&quot;disks/test.qcow2&quot;</span><span class="p">,</span>
                  <span class="s2">&quot;format&quot;</span><span class="p">:</span><span class="s2">&quot;qcow2&quot;</span><span class="p">,</span>
                  <span class="s2">&quot;virtual-size&quot;</span><span class="p">:</span><span class="mi">2048000</span><span class="p">,</span>
                  <span class="s2">&quot;backing_file&quot;</span><span class="p">:</span><span class="s2">&quot;base.qcow2&quot;</span><span class="p">,</span>
                  <span class="s2">&quot;full-backing-filename&quot;</span><span class="p">:</span><span class="s2">&quot;disks/base.qcow2&quot;</span><span class="p">,</span>
                  <span class="s2">&quot;backing-filename-format&quot;</span><span class="p">:</span><span class="s2">&quot;qcow2&quot;</span><span class="p">,</span>
                  <span class="s2">&quot;snapshots&quot;</span><span class="p">:[</span>
                     <span class="p">{</span>
                        <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;1&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;snapshot1&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;vm-state-size&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                        <span class="s2">&quot;date-sec&quot;</span><span class="p">:</span> <span class="mi">10000200</span><span class="p">,</span>
                        <span class="s2">&quot;date-nsec&quot;</span><span class="p">:</span> <span class="mi">12</span><span class="p">,</span>
                        <span class="s2">&quot;vm-clock-sec&quot;</span><span class="p">:</span> <span class="mi">206</span><span class="p">,</span>
                        <span class="s2">&quot;vm-clock-nsec&quot;</span><span class="p">:</span> <span class="mi">30</span>
                     <span class="p">}</span>
                  <span class="p">],</span>
                  <span class="s2">&quot;backing-image&quot;</span><span class="p">:{</span>
                      <span class="s2">&quot;filename&quot;</span><span class="p">:</span><span class="s2">&quot;disks/base.qcow2&quot;</span><span class="p">,</span>
                      <span class="s2">&quot;format&quot;</span><span class="p">:</span><span class="s2">&quot;qcow2&quot;</span><span class="p">,</span>
                      <span class="s2">&quot;virtual-size&quot;</span><span class="p">:</span><span class="mi">2048000</span>
                  <span class="p">}</span>
               <span class="p">}</span>
            <span class="p">},</span>
            <span class="s2">&quot;qdev&quot;</span><span class="p">:</span> <span class="s2">&quot;ide_disk&quot;</span><span class="p">,</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;unknown&quot;</span>
         <span class="p">},</span>
         <span class="p">{</span>
            <span class="s2">&quot;io-status&quot;</span><span class="p">:</span> <span class="s2">&quot;ok&quot;</span><span class="p">,</span>
            <span class="s2">&quot;device&quot;</span><span class="p">:</span><span class="s2">&quot;ide1-cd0&quot;</span><span class="p">,</span>
            <span class="s2">&quot;locked&quot;</span><span class="p">:</span><span class="n">false</span><span class="p">,</span>
            <span class="s2">&quot;removable&quot;</span><span class="p">:</span><span class="n">true</span><span class="p">,</span>
            <span class="s2">&quot;qdev&quot;</span><span class="p">:</span> <span class="s2">&quot;/machine/unattached/device[23]&quot;</span><span class="p">,</span>
            <span class="s2">&quot;tray_open&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;unknown&quot;</span>
         <span class="p">},</span>
         <span class="p">{</span>
            <span class="s2">&quot;device&quot;</span><span class="p">:</span><span class="s2">&quot;floppy0&quot;</span><span class="p">,</span>
            <span class="s2">&quot;locked&quot;</span><span class="p">:</span><span class="n">false</span><span class="p">,</span>
            <span class="s2">&quot;removable&quot;</span><span class="p">:</span><span class="n">true</span><span class="p">,</span>
            <span class="s2">&quot;qdev&quot;</span><span class="p">:</span> <span class="s2">&quot;/machine/unattached/device[20]&quot;</span><span class="p">,</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;unknown&quot;</span>
         <span class="p">},</span>
         <span class="p">{</span>
            <span class="s2">&quot;device&quot;</span><span class="p">:</span><span class="s2">&quot;sd0&quot;</span><span class="p">,</span>
            <span class="s2">&quot;locked&quot;</span><span class="p">:</span><span class="n">false</span><span class="p">,</span>
            <span class="s2">&quot;removable&quot;</span><span class="p">:</span><span class="n">true</span><span class="p">,</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;unknown&quot;</span>
         <span class="p">}</span>
      <span class="p">]</span>
   <span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="qapidoc-218">
<h3><code class="docutils literal notranslate"><span class="pre">BlockDeviceTimedStats</span></code> (Object)<a class="headerlink" href="#qapidoc-218" title="Permalink to this headline">¶</a></h3>
<p>Statistics of a block device during a given interval of time.</p>
<div class="section" id="qapidoc-216">
<h4>Members<a class="headerlink" href="#qapidoc-216" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">interval_length</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code></dt>
<dd>Interval used for calculating the statistics,
in seconds.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">min_rd_latency_ns</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code></dt>
<dd>Minimum latency of read operations in the
defined interval, in nanoseconds.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">min_wr_latency_ns</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code></dt>
<dd>Minimum latency of write operations in the
defined interval, in nanoseconds.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">min_flush_latency_ns</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code></dt>
<dd>Minimum latency of flush operations in the
defined interval, in nanoseconds.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">max_rd_latency_ns</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code></dt>
<dd>Maximum latency of read operations in the
defined interval, in nanoseconds.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">max_wr_latency_ns</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code></dt>
<dd>Maximum latency of write operations in the
defined interval, in nanoseconds.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">max_flush_latency_ns</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code></dt>
<dd>Maximum latency of flush operations in the
defined interval, in nanoseconds.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">avg_rd_latency_ns</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code></dt>
<dd>Average latency of read operations in the
defined interval, in nanoseconds.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">avg_wr_latency_ns</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code></dt>
<dd>Average latency of write operations in the
defined interval, in nanoseconds.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">avg_flush_latency_ns</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code></dt>
<dd>Average latency of flush operations in the
defined interval, in nanoseconds.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">avg_rd_queue_depth</span></code>: <code class="docutils literal notranslate"><span class="pre">number</span></code></dt>
<dd>Average number of pending read operations
in the defined interval.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">avg_wr_queue_depth</span></code>: <code class="docutils literal notranslate"><span class="pre">number</span></code></dt>
<dd>Average number of pending write operations
in the defined interval.</dd>
</dl>
</div>
<div class="section" id="qapidoc-217">
<h4>Since<a class="headerlink" href="#qapidoc-217" title="Permalink to this headline">¶</a></h4>
<p>2.5</p>
</div>
</div>
<div class="section" id="qapidoc-221">
<h3><code class="docutils literal notranslate"><span class="pre">BlockDeviceStats</span></code> (Object)<a class="headerlink" href="#qapidoc-221" title="Permalink to this headline">¶</a></h3>
<p>Statistics of a virtual block device or a block backing device.</p>
<div class="section" id="qapidoc-219">
<h4>Members<a class="headerlink" href="#qapidoc-219" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">rd_bytes</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code></dt>
<dd>The number of bytes read by the device.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">wr_bytes</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code></dt>
<dd>The number of bytes written by the device.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">unmap_bytes</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code></dt>
<dd>The number of bytes unmapped by the device (Since 4.2)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">rd_operations</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code></dt>
<dd>The number of read operations performed by the device.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">wr_operations</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code></dt>
<dd>The number of write operations performed by the device.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">flush_operations</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code></dt>
<dd>The number of cache flush operations performed by the
device (since 0.15)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">unmap_operations</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code></dt>
<dd>The number of unmap operations performed by the device
(Since 4.2)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">rd_total_time_ns</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code></dt>
<dd>Total time spent on reads in nanoseconds (since 0.15).</dd>
<dt><code class="docutils literal notranslate"><span class="pre">wr_total_time_ns</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code></dt>
<dd>Total time spent on writes in nanoseconds (since 0.15).</dd>
<dt><code class="docutils literal notranslate"><span class="pre">flush_total_time_ns</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code></dt>
<dd>Total time spent on cache flushes in nanoseconds
(since 0.15).</dd>
<dt><code class="docutils literal notranslate"><span class="pre">unmap_total_time_ns</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code></dt>
<dd>Total time spent on unmap operations in nanoseconds
(Since 4.2)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">wr_highest_offset</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code></dt>
<dd>The offset after the greatest byte written to the
device.  The intended use of this information is for
growable sparse files (like qcow2) that are used on top
of a physical device.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">rd_merged</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code></dt>
<dd>Number of read requests that have been merged into another
request (Since 2.3).</dd>
<dt><code class="docutils literal notranslate"><span class="pre">wr_merged</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code></dt>
<dd>Number of write requests that have been merged into another
request (Since 2.3).</dd>
<dt><code class="docutils literal notranslate"><span class="pre">unmap_merged</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code></dt>
<dd>Number of unmap requests that have been merged into another
request (Since 4.2)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">idle_time_ns</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code> (optional)</dt>
<dd>Time since the last I/O operation, in
nanoseconds. If the field is absent it means that
there haven’t been any operations yet (Since 2.5).</dd>
<dt><code class="docutils literal notranslate"><span class="pre">failed_rd_operations</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code></dt>
<dd>The number of failed read operations
performed by the device (Since 2.5)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">failed_wr_operations</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code></dt>
<dd>The number of failed write operations
performed by the device (Since 2.5)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">failed_flush_operations</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code></dt>
<dd>The number of failed flush operations
performed by the device (Since 2.5)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">failed_unmap_operations</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code></dt>
<dd>The number of failed unmap operations performed
by the device (Since 4.2)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">invalid_rd_operations</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code></dt>
<dd><dl class="first last docutils">
<dt>The number of invalid read operations</dt>
<dd>performed by the device (Since 2.5)</dd>
</dl>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">invalid_wr_operations</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code></dt>
<dd>The number of invalid write operations
performed by the device (Since 2.5)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">invalid_flush_operations</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code></dt>
<dd>The number of invalid flush operations
performed by the device (Since 2.5)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">invalid_unmap_operations</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code></dt>
<dd>The number of invalid unmap operations performed
by the device (Since 4.2)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">account_invalid</span></code>: <code class="docutils literal notranslate"><span class="pre">boolean</span></code></dt>
<dd>Whether invalid operations are included in the
last access statistics (Since 2.5)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">account_failed</span></code>: <code class="docutils literal notranslate"><span class="pre">boolean</span></code></dt>
<dd>Whether failed operations are included in the
latency and last access statistics (Since 2.5)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">timed_stats</span></code>: <code class="docutils literal notranslate"><span class="pre">array</span> <span class="pre">of</span> <span class="pre">BlockDeviceTimedStats</span></code></dt>
<dd>Statistics specific to the set of previously defined
intervals of time (Since 2.5)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">rd_latency_histogram</span></code>: <code class="docutils literal notranslate"><span class="pre">BlockLatencyHistogramInfo</span></code> (optional)</dt>
<dd><code class="docutils literal notranslate"><span class="pre">BlockLatencyHistogramInfo</span></code>. (Since 4.0)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">wr_latency_histogram</span></code>: <code class="docutils literal notranslate"><span class="pre">BlockLatencyHistogramInfo</span></code> (optional)</dt>
<dd><code class="docutils literal notranslate"><span class="pre">BlockLatencyHistogramInfo</span></code>. (Since 4.0)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">flush_latency_histogram</span></code>: <code class="docutils literal notranslate"><span class="pre">BlockLatencyHistogramInfo</span></code> (optional)</dt>
<dd><code class="docutils literal notranslate"><span class="pre">BlockLatencyHistogramInfo</span></code>. (Since 4.0)</dd>
</dl>
</div>
<div class="section" id="qapidoc-220">
<h4>Since<a class="headerlink" href="#qapidoc-220" title="Permalink to this headline">¶</a></h4>
<p>0.14</p>
</div>
</div>
<div class="section" id="qapidoc-224">
<h3><code class="docutils literal notranslate"><span class="pre">BlockStatsSpecificFile</span></code> (Object)<a class="headerlink" href="#qapidoc-224" title="Permalink to this headline">¶</a></h3>
<p>File driver statistics</p>
<div class="section" id="qapidoc-222">
<h4>Members<a class="headerlink" href="#qapidoc-222" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">discard-nb-ok</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code></dt>
<dd>The number of successful discard operations performed by
the driver.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">discard-nb-failed</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code></dt>
<dd>The number of failed discard operations performed by
the driver.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">discard-bytes-ok</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code></dt>
<dd>The number of bytes discarded by the driver.</dd>
</dl>
</div>
<div class="section" id="qapidoc-223">
<h4>Since<a class="headerlink" href="#qapidoc-223" title="Permalink to this headline">¶</a></h4>
<p>4.2</p>
</div>
</div>
<div class="section" id="qapidoc-227">
<h3><code class="docutils literal notranslate"><span class="pre">BlockStatsSpecificNvme</span></code> (Object)<a class="headerlink" href="#qapidoc-227" title="Permalink to this headline">¶</a></h3>
<p>NVMe driver statistics</p>
<div class="section" id="qapidoc-225">
<h4>Members<a class="headerlink" href="#qapidoc-225" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">completion-errors</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code></dt>
<dd>The number of completion errors.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">aligned-accesses</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code></dt>
<dd>The number of aligned accesses performed by
the driver.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">unaligned-accesses</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code></dt>
<dd>The number of unaligned accesses performed by
the driver.</dd>
</dl>
</div>
<div class="section" id="qapidoc-226">
<h4>Since<a class="headerlink" href="#qapidoc-226" title="Permalink to this headline">¶</a></h4>
<p>5.2</p>
</div>
</div>
<div class="section" id="qapidoc-230">
<h3><code class="docutils literal notranslate"><span class="pre">BlockStatsSpecific</span></code> (Object)<a class="headerlink" href="#qapidoc-230" title="Permalink to this headline">¶</a></h3>
<p>Block driver specific statistics</p>
<div class="section" id="qapidoc-228">
<h4>Members<a class="headerlink" href="#qapidoc-228" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">driver</span></code>: <code class="docutils literal notranslate"><span class="pre">BlockdevDriver</span></code></dt>
<dd>Not documented</dd>
<dt>The members of <code class="docutils literal notranslate"><span class="pre">BlockStatsSpecificFile</span></code> when <code class="docutils literal notranslate"><span class="pre">driver</span></code> is <code class="docutils literal notranslate"><span class="pre">&quot;file&quot;</span></code><dt>The members of <code class="docutils literal notranslate"><span class="pre">BlockStatsSpecificFile</span></code> when <code class="docutils literal notranslate"><span class="pre">driver</span></code> is <code class="docutils literal notranslate"><span class="pre">&quot;host_device&quot;</span></code><dt>The members of <code class="docutils literal notranslate"><span class="pre">BlockStatsSpecificNvme</span></code> when <code class="docutils literal notranslate"><span class="pre">driver</span></code> is <code class="docutils literal notranslate"><span class="pre">&quot;nvme&quot;</span></code></dl>
</div>
<div class="section" id="qapidoc-229">
<h4>Since<a class="headerlink" href="#qapidoc-229" title="Permalink to this headline">¶</a></h4>
<p>4.2</p>
</div>
</div>
<div class="section" id="qapidoc-233">
<h3><code class="docutils literal notranslate"><span class="pre">BlockStats</span></code> (Object)<a class="headerlink" href="#qapidoc-233" title="Permalink to this headline">¶</a></h3>
<p>Statistics of a virtual block device or a block backing device.</p>
<div class="section" id="qapidoc-231">
<h4>Members<a class="headerlink" href="#qapidoc-231" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">device</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code> (optional)</dt>
<dd>If the stats are for a virtual block device, the name
corresponding to the virtual block device.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">node-name</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code> (optional)</dt>
<dd>The node name of the device. (Since 2.3)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">qdev</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code> (optional)</dt>
<dd>The qdev ID, or if no ID is assigned, the QOM path of the block
device. (since 3.0)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">stats</span></code>: <code class="docutils literal notranslate"><span class="pre">BlockDeviceStats</span></code></dt>
<dd>A <code class="docutils literal notranslate"><span class="pre">BlockDeviceStats</span></code> for the device.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">driver-specific</span></code>: <code class="docutils literal notranslate"><span class="pre">BlockStatsSpecific</span></code> (optional)</dt>
<dd>Optional driver-specific stats. (Since 4.2)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">parent</span></code>: <code class="docutils literal notranslate"><span class="pre">BlockStats</span></code> (optional)</dt>
<dd>This describes the file block device if it has one.
Contains recursively the statistics of the underlying
protocol (e.g. the host file for a qcow2 image). If there is
no underlying protocol, this field is omitted</dd>
<dt><code class="docutils literal notranslate"><span class="pre">backing</span></code>: <code class="docutils literal notranslate"><span class="pre">BlockStats</span></code> (optional)</dt>
<dd>This describes the backing block device if it has one.
(Since 2.0)</dd>
</dl>
</div>
<div class="section" id="qapidoc-232">
<h4>Since<a class="headerlink" href="#qapidoc-232" title="Permalink to this headline">¶</a></h4>
<p>0.14</p>
</div>
</div>
<div class="section" id="qapidoc-238">
<h3><code class="docutils literal notranslate"><span class="pre">query-blockstats</span></code> (Command)<a class="headerlink" href="#qapidoc-238" title="Permalink to this headline">¶</a></h3>
<p>Query the <code class="docutils literal notranslate"><span class="pre">BlockStats</span></code> for all virtual block devices.</p>
<div class="section" id="qapidoc-234">
<h4>Arguments<a class="headerlink" href="#qapidoc-234" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">query-nodes</span></code>: <code class="docutils literal notranslate"><span class="pre">boolean</span></code> (optional)</dt>
<dd>If true, the command will query all the block nodes
that have a node name, in a list which will include “parent”
information, but not “backing”.
If false or omitted, the behavior is as before - query all the
device backends, recursively including their “parent” and
“backing”. Filter nodes that were created implicitly are
skipped over in this mode. (Since 2.3)</dd>
</dl>
</div>
<div class="section" id="qapidoc-235">
<h4>Returns<a class="headerlink" href="#qapidoc-235" title="Permalink to this headline">¶</a></h4>
<p>A list of <code class="docutils literal notranslate"><span class="pre">BlockStats</span></code> for each virtual block devices.</p>
</div>
<div class="section" id="qapidoc-236">
<h4>Since<a class="headerlink" href="#qapidoc-236" title="Permalink to this headline">¶</a></h4>
<p>0.14</p>
</div>
<div class="section" id="qapidoc-237">
<h4>Example<a class="headerlink" href="#qapidoc-237" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-&gt;</span> <span class="p">{</span> <span class="s2">&quot;execute&quot;</span><span class="p">:</span> <span class="s2">&quot;query-blockstats&quot;</span> <span class="p">}</span>
<span class="o">&lt;-</span> <span class="p">{</span>
      <span class="s2">&quot;return&quot;</span><span class="p">:[</span>
         <span class="p">{</span>
            <span class="s2">&quot;device&quot;</span><span class="p">:</span><span class="s2">&quot;ide0-hd0&quot;</span><span class="p">,</span>
            <span class="s2">&quot;parent&quot;</span><span class="p">:{</span>
               <span class="s2">&quot;stats&quot;</span><span class="p">:{</span>
                  <span class="s2">&quot;wr_highest_offset&quot;</span><span class="p">:</span><span class="mi">3686448128</span><span class="p">,</span>
                  <span class="s2">&quot;wr_bytes&quot;</span><span class="p">:</span><span class="mi">9786368</span><span class="p">,</span>
                  <span class="s2">&quot;wr_operations&quot;</span><span class="p">:</span><span class="mi">751</span><span class="p">,</span>
                  <span class="s2">&quot;rd_bytes&quot;</span><span class="p">:</span><span class="mi">122567168</span><span class="p">,</span>
                  <span class="s2">&quot;rd_operations&quot;</span><span class="p">:</span><span class="mi">36772</span>
                  <span class="s2">&quot;wr_total_times_ns&quot;</span><span class="p">:</span><span class="mi">313253456</span>
                  <span class="s2">&quot;rd_total_times_ns&quot;</span><span class="p">:</span><span class="mi">3465673657</span>
                  <span class="s2">&quot;flush_total_times_ns&quot;</span><span class="p">:</span><span class="mi">49653</span>
                  <span class="s2">&quot;flush_operations&quot;</span><span class="p">:</span><span class="mi">61</span><span class="p">,</span>
                  <span class="s2">&quot;rd_merged&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
                  <span class="s2">&quot;wr_merged&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
                  <span class="s2">&quot;idle_time_ns&quot;</span><span class="p">:</span><span class="mi">2953431879</span><span class="p">,</span>
                  <span class="s2">&quot;account_invalid&quot;</span><span class="p">:</span><span class="n">true</span><span class="p">,</span>
                  <span class="s2">&quot;account_failed&quot;</span><span class="p">:</span><span class="n">false</span>
               <span class="p">}</span>
            <span class="p">},</span>
            <span class="s2">&quot;stats&quot;</span><span class="p">:{</span>
               <span class="s2">&quot;wr_highest_offset&quot;</span><span class="p">:</span><span class="mi">2821110784</span><span class="p">,</span>
               <span class="s2">&quot;wr_bytes&quot;</span><span class="p">:</span><span class="mi">9786368</span><span class="p">,</span>
               <span class="s2">&quot;wr_operations&quot;</span><span class="p">:</span><span class="mi">692</span><span class="p">,</span>
               <span class="s2">&quot;rd_bytes&quot;</span><span class="p">:</span><span class="mi">122739200</span><span class="p">,</span>
               <span class="s2">&quot;rd_operations&quot;</span><span class="p">:</span><span class="mi">36604</span>
               <span class="s2">&quot;flush_operations&quot;</span><span class="p">:</span><span class="mi">51</span><span class="p">,</span>
               <span class="s2">&quot;wr_total_times_ns&quot;</span><span class="p">:</span><span class="mi">313253456</span>
               <span class="s2">&quot;rd_total_times_ns&quot;</span><span class="p">:</span><span class="mi">3465673657</span>
               <span class="s2">&quot;flush_total_times_ns&quot;</span><span class="p">:</span><span class="mi">49653</span><span class="p">,</span>
               <span class="s2">&quot;rd_merged&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
               <span class="s2">&quot;wr_merged&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
               <span class="s2">&quot;idle_time_ns&quot;</span><span class="p">:</span><span class="mi">2953431879</span><span class="p">,</span>
               <span class="s2">&quot;account_invalid&quot;</span><span class="p">:</span><span class="n">true</span><span class="p">,</span>
               <span class="s2">&quot;account_failed&quot;</span><span class="p">:</span><span class="n">false</span>
            <span class="p">},</span>
            <span class="s2">&quot;qdev&quot;</span><span class="p">:</span> <span class="s2">&quot;/machine/unattached/device[23]&quot;</span>
         <span class="p">},</span>
         <span class="p">{</span>
            <span class="s2">&quot;device&quot;</span><span class="p">:</span><span class="s2">&quot;ide1-cd0&quot;</span><span class="p">,</span>
            <span class="s2">&quot;stats&quot;</span><span class="p">:{</span>
               <span class="s2">&quot;wr_highest_offset&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
               <span class="s2">&quot;wr_bytes&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
               <span class="s2">&quot;wr_operations&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
               <span class="s2">&quot;rd_bytes&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
               <span class="s2">&quot;rd_operations&quot;</span><span class="p">:</span><span class="mi">0</span>
               <span class="s2">&quot;flush_operations&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
               <span class="s2">&quot;wr_total_times_ns&quot;</span><span class="p">:</span><span class="mi">0</span>
               <span class="s2">&quot;rd_total_times_ns&quot;</span><span class="p">:</span><span class="mi">0</span>
               <span class="s2">&quot;flush_total_times_ns&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
               <span class="s2">&quot;rd_merged&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
               <span class="s2">&quot;wr_merged&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
               <span class="s2">&quot;account_invalid&quot;</span><span class="p">:</span><span class="n">false</span><span class="p">,</span>
               <span class="s2">&quot;account_failed&quot;</span><span class="p">:</span><span class="n">false</span>
            <span class="p">},</span>
            <span class="s2">&quot;qdev&quot;</span><span class="p">:</span> <span class="s2">&quot;/machine/unattached/device[24]&quot;</span>
         <span class="p">},</span>
         <span class="p">{</span>
            <span class="s2">&quot;device&quot;</span><span class="p">:</span><span class="s2">&quot;floppy0&quot;</span><span class="p">,</span>
            <span class="s2">&quot;stats&quot;</span><span class="p">:{</span>
               <span class="s2">&quot;wr_highest_offset&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
               <span class="s2">&quot;wr_bytes&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
               <span class="s2">&quot;wr_operations&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
               <span class="s2">&quot;rd_bytes&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
               <span class="s2">&quot;rd_operations&quot;</span><span class="p">:</span><span class="mi">0</span>
               <span class="s2">&quot;flush_operations&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
               <span class="s2">&quot;wr_total_times_ns&quot;</span><span class="p">:</span><span class="mi">0</span>
               <span class="s2">&quot;rd_total_times_ns&quot;</span><span class="p">:</span><span class="mi">0</span>
               <span class="s2">&quot;flush_total_times_ns&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
               <span class="s2">&quot;rd_merged&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
               <span class="s2">&quot;wr_merged&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
               <span class="s2">&quot;account_invalid&quot;</span><span class="p">:</span><span class="n">false</span><span class="p">,</span>
               <span class="s2">&quot;account_failed&quot;</span><span class="p">:</span><span class="n">false</span>
            <span class="p">},</span>
            <span class="s2">&quot;qdev&quot;</span><span class="p">:</span> <span class="s2">&quot;/machine/unattached/device[16]&quot;</span>
         <span class="p">},</span>
         <span class="p">{</span>
            <span class="s2">&quot;device&quot;</span><span class="p">:</span><span class="s2">&quot;sd0&quot;</span><span class="p">,</span>
            <span class="s2">&quot;stats&quot;</span><span class="p">:{</span>
               <span class="s2">&quot;wr_highest_offset&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
               <span class="s2">&quot;wr_bytes&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
               <span class="s2">&quot;wr_operations&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
               <span class="s2">&quot;rd_bytes&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
               <span class="s2">&quot;rd_operations&quot;</span><span class="p">:</span><span class="mi">0</span>
               <span class="s2">&quot;flush_operations&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
               <span class="s2">&quot;wr_total_times_ns&quot;</span><span class="p">:</span><span class="mi">0</span>
               <span class="s2">&quot;rd_total_times_ns&quot;</span><span class="p">:</span><span class="mi">0</span>
               <span class="s2">&quot;flush_total_times_ns&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
               <span class="s2">&quot;rd_merged&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
               <span class="s2">&quot;wr_merged&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
               <span class="s2">&quot;account_invalid&quot;</span><span class="p">:</span><span class="n">false</span><span class="p">,</span>
               <span class="s2">&quot;account_failed&quot;</span><span class="p">:</span><span class="n">false</span>
            <span class="p">}</span>
         <span class="p">}</span>
      <span class="p">]</span>
   <span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="qapidoc-241">
<h3><code class="docutils literal notranslate"><span class="pre">BlockdevOnError</span></code> (Enum)<a class="headerlink" href="#qapidoc-241" title="Permalink to this headline">¶</a></h3>
<p>An enumeration of possible behaviors for errors on I/O operations.
The exact meaning depends on whether the I/O was initiated by a guest
or by a block job</p>
<div class="section" id="qapidoc-239">
<h4>Values<a class="headerlink" href="#qapidoc-239" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">report</span></code></dt>
<dd>for guest operations, report the error to the guest;
for jobs, cancel the job</dd>
<dt><code class="docutils literal notranslate"><span class="pre">ignore</span></code></dt>
<dd>ignore the error, only report a QMP event (BLOCK_IO_ERROR
or BLOCK_JOB_ERROR). The backup, mirror and commit block jobs retry
the failing request later and may still complete successfully. The
stream block job continues to stream and will complete with an
error.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">enospc</span></code></dt>
<dd>same as <code class="docutils literal notranslate"><span class="pre">stop</span></code> on ENOSPC, same as <code class="docutils literal notranslate"><span class="pre">report</span></code> otherwise.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">stop</span></code></dt>
<dd>for guest operations, stop the virtual machine;
for jobs, pause the job</dd>
<dt><code class="docutils literal notranslate"><span class="pre">auto</span></code></dt>
<dd>inherit the error handling policy of the backend (since: 2.7)</dd>
</dl>
</div>
<div class="section" id="qapidoc-240">
<h4>Since<a class="headerlink" href="#qapidoc-240" title="Permalink to this headline">¶</a></h4>
<p>1.3</p>
</div>
</div>
<div class="section" id="qapidoc-244">
<h3><code class="docutils literal notranslate"><span class="pre">MirrorSyncMode</span></code> (Enum)<a class="headerlink" href="#qapidoc-244" title="Permalink to this headline">¶</a></h3>
<p>An enumeration of possible behaviors for the initial synchronization
phase of storage mirroring.</p>
<div class="section" id="qapidoc-242">
<h4>Values<a class="headerlink" href="#qapidoc-242" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">top</span></code></dt>
<dd>copies data in the topmost image to the destination</dd>
<dt><code class="docutils literal notranslate"><span class="pre">full</span></code></dt>
<dd>copies data from all images to the destination</dd>
<dt><code class="docutils literal notranslate"><span class="pre">none</span></code></dt>
<dd>only copy data written from now on</dd>
<dt><code class="docutils literal notranslate"><span class="pre">incremental</span></code></dt>
<dd>only copy data described by the dirty bitmap. (since: 2.4)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">bitmap</span></code></dt>
<dd>only copy data described by the dirty bitmap. (since: 4.2)
Behavior on completion is determined by the BitmapSyncMode.</dd>
</dl>
</div>
<div class="section" id="qapidoc-243">
<h4>Since<a class="headerlink" href="#qapidoc-243" title="Permalink to this headline">¶</a></h4>
<p>1.3</p>
</div>
</div>
<div class="section" id="qapidoc-247">
<h3><code class="docutils literal notranslate"><span class="pre">BitmapSyncMode</span></code> (Enum)<a class="headerlink" href="#qapidoc-247" title="Permalink to this headline">¶</a></h3>
<p>An enumeration of possible behaviors for the synchronization of a bitmap
when used for data copy operations.</p>
<div class="section" id="qapidoc-245">
<h4>Values<a class="headerlink" href="#qapidoc-245" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">on-success</span></code></dt>
<dd>The bitmap is only synced when the operation is successful.
This is the behavior always used for ‘INCREMENTAL’ backups.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">never</span></code></dt>
<dd>The bitmap is never synchronized with the operation, and is
treated solely as a read-only manifest of blocks to copy.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">always</span></code></dt>
<dd>The bitmap is always synchronized with the operation,
regardless of whether or not the operation was successful.</dd>
</dl>
</div>
<div class="section" id="qapidoc-246">
<h4>Since<a class="headerlink" href="#qapidoc-246" title="Permalink to this headline">¶</a></h4>
<p>4.2</p>
</div>
</div>
<div class="section" id="qapidoc-250">
<h3><code class="docutils literal notranslate"><span class="pre">MirrorCopyMode</span></code> (Enum)<a class="headerlink" href="#qapidoc-250" title="Permalink to this headline">¶</a></h3>
<p>An enumeration whose values tell the mirror block job when to
trigger writes to the target.</p>
<div class="section" id="qapidoc-248">
<h4>Values<a class="headerlink" href="#qapidoc-248" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">background</span></code></dt>
<dd>copy data in background only.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">write-blocking</span></code></dt>
<dd>when data is written to the source, write it
(synchronously) to the target as well.  In
addition, data is copied in background just like in
<code class="docutils literal notranslate"><span class="pre">background</span></code> mode.</dd>
</dl>
</div>
<div class="section" id="qapidoc-249">
<h4>Since<a class="headerlink" href="#qapidoc-249" title="Permalink to this headline">¶</a></h4>
<p>3.0</p>
</div>
</div>
<div class="section" id="qapidoc-253">
<h3><code class="docutils literal notranslate"><span class="pre">BlockJobInfo</span></code> (Object)<a class="headerlink" href="#qapidoc-253" title="Permalink to this headline">¶</a></h3>
<p>Information about a long-running block device operation.</p>
<div class="section" id="qapidoc-251">
<h4>Members<a class="headerlink" href="#qapidoc-251" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">type</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code></dt>
<dd>the job type (‘stream’ for image streaming)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">device</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code></dt>
<dd>The job identifier. Originally the device name but other
values are allowed since QEMU 2.7</dd>
<dt><code class="docutils literal notranslate"><span class="pre">len</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code></dt>
<dd>Estimated <code class="docutils literal notranslate"><span class="pre">offset</span></code> value at the completion of the job. This value can
arbitrarily change while the job is running, in both directions.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">offset</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code></dt>
<dd>Progress made until now. The unit is arbitrary and the value can
only meaningfully be used for the ratio of <code class="docutils literal notranslate"><span class="pre">offset</span></code> to <code class="docutils literal notranslate"><span class="pre">len</span></code>. The
value is monotonically increasing.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">busy</span></code>: <code class="docutils literal notranslate"><span class="pre">boolean</span></code></dt>
<dd>false if the job is known to be in a quiescent state, with
no pending I/O.  Since 1.3.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">paused</span></code>: <code class="docutils literal notranslate"><span class="pre">boolean</span></code></dt>
<dd>whether the job is paused or, if <code class="docutils literal notranslate"><span class="pre">busy</span></code> is true, will
pause itself as soon as possible.  Since 1.3.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">speed</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code></dt>
<dd>the rate limit, bytes per second</dd>
<dt><code class="docutils literal notranslate"><span class="pre">io-status</span></code>: <code class="docutils literal notranslate"><span class="pre">BlockDeviceIoStatus</span></code></dt>
<dd>the status of the job (since 1.3)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">ready</span></code>: <code class="docutils literal notranslate"><span class="pre">boolean</span></code></dt>
<dd>true if the job may be completed (since 2.2)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">status</span></code>: <code class="docutils literal notranslate"><span class="pre">JobStatus</span></code></dt>
<dd>Current job state/status (since 2.12)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">auto-finalize</span></code>: <code class="docutils literal notranslate"><span class="pre">boolean</span></code></dt>
<dd>Job will finalize itself when PENDING, moving to
the CONCLUDED state. (since 2.12)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">auto-dismiss</span></code>: <code class="docutils literal notranslate"><span class="pre">boolean</span></code></dt>
<dd>Job will dismiss itself when CONCLUDED, moving to the NULL
state and disappearing from the query list. (since 2.12)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">error</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code> (optional)</dt>
<dd>Error information if the job did not complete successfully.
Not set if the job completed successfully. (since 2.12.1)</dd>
</dl>
</div>
<div class="section" id="qapidoc-252">
<h4>Since<a class="headerlink" href="#qapidoc-252" title="Permalink to this headline">¶</a></h4>
<p>1.1</p>
</div>
</div>
<div class="section" id="qapidoc-256">
<h3><code class="docutils literal notranslate"><span class="pre">query-block-jobs</span></code> (Command)<a class="headerlink" href="#qapidoc-256" title="Permalink to this headline">¶</a></h3>
<p>Return information about long-running block device operations.</p>
<div class="section" id="qapidoc-254">
<h4>Returns<a class="headerlink" href="#qapidoc-254" title="Permalink to this headline">¶</a></h4>
<p>a list of <code class="docutils literal notranslate"><span class="pre">BlockJobInfo</span></code> for each active block job</p>
</div>
<div class="section" id="qapidoc-255">
<h4>Since<a class="headerlink" href="#qapidoc-255" title="Permalink to this headline">¶</a></h4>
<p>1.1</p>
</div>
</div>
<div class="section" id="qapidoc-258">
<h3><code class="docutils literal notranslate"><span class="pre">block_passwd</span></code> (Command)<a class="headerlink" href="#qapidoc-258" title="Permalink to this headline">¶</a></h3>
<p>This command sets the password of a block device that has not been open
with a password and requires one.</p>
<p>This command is now obsolete and will always return an error since 2.10</p>
<div class="section" id="qapidoc-257">
<h4>Arguments<a class="headerlink" href="#qapidoc-257" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">device</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code> (optional)</dt>
<dd>Not documented</dd>
<dt><code class="docutils literal notranslate"><span class="pre">node-name</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code> (optional)</dt>
<dd>Not documented</dd>
<dt><code class="docutils literal notranslate"><span class="pre">password</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code></dt>
<dd>Not documented</dd>
</dl>
</div>
</div>
<div class="section" id="qapidoc-263">
<h3><code class="docutils literal notranslate"><span class="pre">block_resize</span></code> (Command)<a class="headerlink" href="#qapidoc-263" title="Permalink to this headline">¶</a></h3>
<p>Resize a block image while a guest is running.</p>
<p>Either <code class="docutils literal notranslate"><span class="pre">device</span></code> or <code class="docutils literal notranslate"><span class="pre">node-name</span></code> must be set but not both.</p>
<div class="section" id="qapidoc-259">
<h4>Arguments<a class="headerlink" href="#qapidoc-259" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">device</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code> (optional)</dt>
<dd>the name of the device to get the image resized</dd>
<dt><code class="docutils literal notranslate"><span class="pre">node-name</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code> (optional)</dt>
<dd>graph node name to get the image resized (Since 2.0)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">size</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code></dt>
<dd>new image size in bytes</dd>
</dl>
</div>
<div class="section" id="qapidoc-260">
<h4>Returns<a class="headerlink" href="#qapidoc-260" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>nothing on success</li>
<li>If <code class="docutils literal notranslate"><span class="pre">device</span></code> is not a valid block device, DeviceNotFound</li>
</ul>
</div>
<div class="section" id="qapidoc-261">
<h4>Since<a class="headerlink" href="#qapidoc-261" title="Permalink to this headline">¶</a></h4>
<p>0.14</p>
</div>
<div class="section" id="qapidoc-262">
<h4>Example<a class="headerlink" href="#qapidoc-262" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-&gt;</span> <span class="p">{</span> <span class="s2">&quot;execute&quot;</span><span class="p">:</span> <span class="s2">&quot;block_resize&quot;</span><span class="p">,</span>
     <span class="s2">&quot;arguments&quot;</span><span class="p">:</span> <span class="p">{</span> <span class="s2">&quot;device&quot;</span><span class="p">:</span> <span class="s2">&quot;scratch&quot;</span><span class="p">,</span> <span class="s2">&quot;size&quot;</span><span class="p">:</span> <span class="mi">1073741824</span> <span class="p">}</span> <span class="p">}</span>
<span class="o">&lt;-</span> <span class="p">{</span> <span class="s2">&quot;return&quot;</span><span class="p">:</span> <span class="p">{}</span> <span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="qapidoc-266">
<h3><code class="docutils literal notranslate"><span class="pre">NewImageMode</span></code> (Enum)<a class="headerlink" href="#qapidoc-266" title="Permalink to this headline">¶</a></h3>
<p>An enumeration that tells QEMU how to set the backing file path in
a new image file.</p>
<div class="section" id="qapidoc-264">
<h4>Values<a class="headerlink" href="#qapidoc-264" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">existing</span></code></dt>
<dd>QEMU should look for an existing image file.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">absolute-paths</span></code></dt>
<dd>QEMU should create a new image with absolute paths
for the backing file. If there is no backing file available, the new
image will not be backed either.</dd>
</dl>
</div>
<div class="section" id="qapidoc-265">
<h4>Since<a class="headerlink" href="#qapidoc-265" title="Permalink to this headline">¶</a></h4>
<p>1.1</p>
</div>
</div>
<div class="section" id="qapidoc-268">
<h3><code class="docutils literal notranslate"><span class="pre">BlockdevSnapshotSync</span></code> (Object)<a class="headerlink" href="#qapidoc-268" title="Permalink to this headline">¶</a></h3>
<p>Either <code class="docutils literal notranslate"><span class="pre">device</span></code> or <code class="docutils literal notranslate"><span class="pre">node-name</span></code> must be set but not both.</p>
<div class="section" id="qapidoc-267">
<h4>Members<a class="headerlink" href="#qapidoc-267" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">device</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code> (optional)</dt>
<dd>the name of the device to take a snapshot of.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">node-name</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code> (optional)</dt>
<dd>graph node name to generate the snapshot from (Since 2.0)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">snapshot-file</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code></dt>
<dd>the target of the new overlay image. If the file
exists, or if it is a device, the overlay will be created in the
existing file/device. Otherwise, a new file will be created.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">snapshot-node-name</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code> (optional)</dt>
<dd>the graph node name of the new image (Since 2.0)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">format</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code> (optional)</dt>
<dd>the format of the overlay image, default is ‘qcow2’.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">mode</span></code>: <code class="docutils literal notranslate"><span class="pre">NewImageMode</span></code> (optional)</dt>
<dd>whether and how QEMU should create a new image, default is
‘absolute-paths’.</dd>
</dl>
</div>
</div>
<div class="section" id="qapidoc-271">
<h3><code class="docutils literal notranslate"><span class="pre">BlockdevSnapshot</span></code> (Object)<a class="headerlink" href="#qapidoc-271" title="Permalink to this headline">¶</a></h3>
<div class="section" id="qapidoc-269">
<h4>Members<a class="headerlink" href="#qapidoc-269" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">node</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code></dt>
<dd>device or node name that will have a snapshot taken.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">overlay</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code></dt>
<dd>reference to the existing block device that will become
the overlay of <code class="docutils literal notranslate"><span class="pre">node</span></code>, as part of taking the snapshot.
It must not have a current backing file (this can be
achieved by passing “backing”: null to blockdev-add).</dd>
</dl>
</div>
<div class="section" id="qapidoc-270">
<h4>Since<a class="headerlink" href="#qapidoc-270" title="Permalink to this headline">¶</a></h4>
<p>2.5</p>
</div>
</div>
<div class="section" id="qapidoc-275">
<h3><code class="docutils literal notranslate"><span class="pre">BackupCommon</span></code> (Object)<a class="headerlink" href="#qapidoc-275" title="Permalink to this headline">¶</a></h3>
<div class="section" id="qapidoc-272">
<h4>Members<a class="headerlink" href="#qapidoc-272" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">job-id</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code> (optional)</dt>
<dd>identifier for the newly-created block job. If
omitted, the device name will be used. (Since 2.7)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">device</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code></dt>
<dd>the device name or node-name of a root node which should be copied.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">sync</span></code>: <code class="docutils literal notranslate"><span class="pre">MirrorSyncMode</span></code></dt>
<dd>what parts of the disk image should be copied to the destination
(all the disk, only the sectors allocated in the topmost image, from a
dirty bitmap, or only new I/O).</dd>
<dt><code class="docutils literal notranslate"><span class="pre">speed</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code> (optional)</dt>
<dd>the maximum speed, in bytes per second. The default is 0,
for unlimited.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">bitmap</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code> (optional)</dt>
<dd>The name of a dirty bitmap to use.
Must be present if sync is “bitmap” or “incremental”.
Can be present if sync is “full” or “top”.
Must not be present otherwise.
(Since 2.4 (drive-backup), 3.1 (blockdev-backup))</dd>
<dt><code class="docutils literal notranslate"><span class="pre">bitmap-mode</span></code>: <code class="docutils literal notranslate"><span class="pre">BitmapSyncMode</span></code> (optional)</dt>
<dd>Specifies the type of data the bitmap should contain after
the operation concludes.
Must be present if a bitmap was provided,
Must NOT be present otherwise. (Since 4.2)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">compress</span></code>: <code class="docutils literal notranslate"><span class="pre">boolean</span></code> (optional)</dt>
<dd>true to compress data, if the target format supports it.
(default: false) (since 2.8)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">on-source-error</span></code>: <code class="docutils literal notranslate"><span class="pre">BlockdevOnError</span></code> (optional)</dt>
<dd>the action to take on an error on the source,
default ‘report’.  ‘stop’ and ‘enospc’ can only be used
if the block device supports io-status (see BlockInfo).</dd>
<dt><code class="docutils literal notranslate"><span class="pre">on-target-error</span></code>: <code class="docutils literal notranslate"><span class="pre">BlockdevOnError</span></code> (optional)</dt>
<dd>the action to take on an error on the target,
default ‘report’ (no limitations, since this applies to
a different block device than <code class="docutils literal notranslate"><span class="pre">device</span></code>).</dd>
<dt><code class="docutils literal notranslate"><span class="pre">auto-finalize</span></code>: <code class="docutils literal notranslate"><span class="pre">boolean</span></code> (optional)</dt>
<dd>When false, this job will wait in a PENDING state after it has
finished its work, waiting for <code class="docutils literal notranslate"><span class="pre">block-job-finalize</span></code> before
making any block graph changes.
When true, this job will automatically
perform its abort or commit actions.
Defaults to true. (Since 2.12)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">auto-dismiss</span></code>: <code class="docutils literal notranslate"><span class="pre">boolean</span></code> (optional)</dt>
<dd>When false, this job will wait in a CONCLUDED state after it
has completely ceased all work, and awaits <code class="docutils literal notranslate"><span class="pre">block-job-dismiss</span></code>.
When true, this job will automatically disappear from the query
list without user intervention.
Defaults to true. (Since 2.12)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">filter-node-name</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code> (optional)</dt>
<dd>the node name that should be assigned to the
filter driver that the backup job inserts into the graph
above node specified by <code class="docutils literal notranslate"><span class="pre">drive</span></code>. If this option is not given,
a node name is autogenerated. (Since: 4.2)</dd>
</dl>
</div>
<div class="section" id="qapidoc-273">
<h4>Note<a class="headerlink" href="#qapidoc-273" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">on-source-error</span></code> and <code class="docutils literal notranslate"><span class="pre">on-target-error</span></code> only affect background
I/O.  If an error occurs during a guest write request, the device’s
rerror/werror actions will be used.</p>
</div>
<div class="section" id="qapidoc-274">
<h4>Since<a class="headerlink" href="#qapidoc-274" title="Permalink to this headline">¶</a></h4>
<p>4.2</p>
</div>
</div>
<div class="section" id="qapidoc-278">
<h3><code class="docutils literal notranslate"><span class="pre">DriveBackup</span></code> (Object)<a class="headerlink" href="#qapidoc-278" title="Permalink to this headline">¶</a></h3>
<div class="section" id="qapidoc-276">
<h4>Members<a class="headerlink" href="#qapidoc-276" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">target</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code></dt>
<dd>the target of the new image. If the file exists, or if it
is a device, the existing file/device will be used as the new
destination.  If it does not exist, a new file will be created.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">format</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code> (optional)</dt>
<dd>the format of the new destination, default is to
probe if <code class="docutils literal notranslate"><span class="pre">mode</span></code> is ‘existing’, else the format of the source</dd>
<dt><code class="docutils literal notranslate"><span class="pre">mode</span></code>: <code class="docutils literal notranslate"><span class="pre">NewImageMode</span></code> (optional)</dt>
<dd>whether and how QEMU should create a new image, default is
‘absolute-paths’.</dd>
<dt>The members of <code class="docutils literal notranslate"><span class="pre">BackupCommon</span></code></dl>
</div>
<div class="section" id="qapidoc-277">
<h4>Since<a class="headerlink" href="#qapidoc-277" title="Permalink to this headline">¶</a></h4>
<p>1.6</p>
</div>
</div>
<div class="section" id="qapidoc-281">
<h3><code class="docutils literal notranslate"><span class="pre">BlockdevBackup</span></code> (Object)<a class="headerlink" href="#qapidoc-281" title="Permalink to this headline">¶</a></h3>
<div class="section" id="qapidoc-279">
<h4>Members<a class="headerlink" href="#qapidoc-279" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">target</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code></dt>
<dd>the device name or node-name of the backup target node.</dd>
<dt>The members of <code class="docutils literal notranslate"><span class="pre">BackupCommon</span></code></dl>
</div>
<div class="section" id="qapidoc-280">
<h4>Since<a class="headerlink" href="#qapidoc-280" title="Permalink to this headline">¶</a></h4>
<p>2.3</p>
</div>
</div>
<div class="section" id="qapidoc-285">
<h3><code class="docutils literal notranslate"><span class="pre">blockdev-snapshot-sync</span></code> (Command)<a class="headerlink" href="#qapidoc-285" title="Permalink to this headline">¶</a></h3>
<p>Takes a synchronous snapshot of a block device.</p>
<p>For the arguments, see the documentation of BlockdevSnapshotSync.</p>
<div class="section" id="qapidoc-282">
<h4>Returns<a class="headerlink" href="#qapidoc-282" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>nothing on success</li>
<li>If <code class="docutils literal notranslate"><span class="pre">device</span></code> is not a valid block device, DeviceNotFound</li>
</ul>
</div>
<div class="section" id="qapidoc-283">
<h4>Since<a class="headerlink" href="#qapidoc-283" title="Permalink to this headline">¶</a></h4>
<p>0.14</p>
</div>
<div class="section" id="qapidoc-284">
<h4>Example<a class="headerlink" href="#qapidoc-284" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-&gt;</span> <span class="p">{</span> <span class="s2">&quot;execute&quot;</span><span class="p">:</span> <span class="s2">&quot;blockdev-snapshot-sync&quot;</span><span class="p">,</span>
     <span class="s2">&quot;arguments&quot;</span><span class="p">:</span> <span class="p">{</span> <span class="s2">&quot;device&quot;</span><span class="p">:</span> <span class="s2">&quot;ide-hd0&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;snapshot-file&quot;</span><span class="p">:</span>
                    <span class="s2">&quot;/some/place/my-image&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;format&quot;</span><span class="p">:</span> <span class="s2">&quot;qcow2&quot;</span> <span class="p">}</span> <span class="p">}</span>
<span class="o">&lt;-</span> <span class="p">{</span> <span class="s2">&quot;return&quot;</span><span class="p">:</span> <span class="p">{}</span> <span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="qapidoc-289">
<h3><code class="docutils literal notranslate"><span class="pre">blockdev-snapshot</span></code> (Command)<a class="headerlink" href="#qapidoc-289" title="Permalink to this headline">¶</a></h3>
<p>Takes a snapshot of a block device.</p>
<p>Take a snapshot, by installing ‘node’ as the backing image of
‘overlay’. Additionally, if ‘node’ is associated with a block
device, the block device changes to using ‘overlay’ as its new active
image.</p>
<p>For the arguments, see the documentation of BlockdevSnapshot.</p>
<div class="section" id="qapidoc-286">
<h4>Features<a class="headerlink" href="#qapidoc-286" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">allow-write-only-overlay</span></code></dt>
<dd>If present, the check whether this operation is safe
was relaxed so that it can be used to change
backing file of a destination of a blockdev-mirror.
(since 5.0)</dd>
</dl>
</div>
<div class="section" id="qapidoc-287">
<h4>Since<a class="headerlink" href="#qapidoc-287" title="Permalink to this headline">¶</a></h4>
<p>2.5</p>
</div>
<div class="section" id="qapidoc-288">
<h4>Example<a class="headerlink" href="#qapidoc-288" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-&gt;</span> <span class="p">{</span> <span class="s2">&quot;execute&quot;</span><span class="p">:</span> <span class="s2">&quot;blockdev-add&quot;</span><span class="p">,</span>
     <span class="s2">&quot;arguments&quot;</span><span class="p">:</span> <span class="p">{</span> <span class="s2">&quot;driver&quot;</span><span class="p">:</span> <span class="s2">&quot;qcow2&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;node-name&quot;</span><span class="p">:</span> <span class="s2">&quot;node1534&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;file&quot;</span><span class="p">:</span> <span class="p">{</span> <span class="s2">&quot;driver&quot;</span><span class="p">:</span> <span class="s2">&quot;file&quot;</span><span class="p">,</span>
                              <span class="s2">&quot;filename&quot;</span><span class="p">:</span> <span class="s2">&quot;hd1.qcow2&quot;</span> <span class="p">},</span>
                    <span class="s2">&quot;backing&quot;</span><span class="p">:</span> <span class="n">null</span> <span class="p">}</span> <span class="p">}</span>

<span class="o">&lt;-</span> <span class="p">{</span> <span class="s2">&quot;return&quot;</span><span class="p">:</span> <span class="p">{}</span> <span class="p">}</span>

<span class="o">-&gt;</span> <span class="p">{</span> <span class="s2">&quot;execute&quot;</span><span class="p">:</span> <span class="s2">&quot;blockdev-snapshot&quot;</span><span class="p">,</span>
     <span class="s2">&quot;arguments&quot;</span><span class="p">:</span> <span class="p">{</span> <span class="s2">&quot;node&quot;</span><span class="p">:</span> <span class="s2">&quot;ide-hd0&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;overlay&quot;</span><span class="p">:</span> <span class="s2">&quot;node1534&quot;</span> <span class="p">}</span> <span class="p">}</span>
<span class="o">&lt;-</span> <span class="p">{</span> <span class="s2">&quot;return&quot;</span><span class="p">:</span> <span class="p">{}</span> <span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="qapidoc-293">
<h3><code class="docutils literal notranslate"><span class="pre">change-backing-file</span></code> (Command)<a class="headerlink" href="#qapidoc-293" title="Permalink to this headline">¶</a></h3>
<p>Change the backing file in the image file metadata.  This does not
cause QEMU to reopen the image file to reparse the backing filename
(it may, however, perform a reopen to change permissions from
r/o -&gt; r/w -&gt; r/o, if needed). The new backing file string is written
into the image file metadata, and the QEMU internal strings are
updated.</p>
<div class="section" id="qapidoc-290">
<h4>Arguments<a class="headerlink" href="#qapidoc-290" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">image-node-name</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code></dt>
<dd>The name of the block driver state node of the
image to modify. The “device” argument is used
to verify “image-node-name” is in the chain
described by “device”.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">device</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code></dt>
<dd>The device name or node-name of the root node that owns
image-node-name.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">backing-file</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code></dt>
<dd>The string to write as the backing file.  This
string is not validated, so care should be taken
when specifying the string or the image chain may
not be able to be reopened again.</dd>
</dl>
</div>
<div class="section" id="qapidoc-291">
<h4>Returns<a class="headerlink" href="#qapidoc-291" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>Nothing on success</li>
<li>If “device” does not exist or cannot be determined, DeviceNotFound</li>
</ul>
</div>
<div class="section" id="qapidoc-292">
<h4>Since<a class="headerlink" href="#qapidoc-292" title="Permalink to this headline">¶</a></h4>
<p>2.1</p>
</div>
</div>
<div class="section" id="qapidoc-299">
<h3><code class="docutils literal notranslate"><span class="pre">block-commit</span></code> (Command)<a class="headerlink" href="#qapidoc-299" title="Permalink to this headline">¶</a></h3>
<p>Live commit of data from overlay image nodes into backing nodes - i.e.,
writes data between ‘top’ and ‘base’ into ‘base’.</p>
<p>If top == base, that is an error.
If top has no overlays on top of it, or if it is in use by a writer,
the job will not be completed by itself.  The user needs to complete
the job with the block-job-complete command after getting the ready
event. (Since 2.0)</p>
<p>If the base image is smaller than top, then the base image will be
resized to be the same size as top.  If top is smaller than the base
image, the base will not be truncated.  If you want the base image
size to match the size of the smaller top, you can safely truncate
it yourself once the commit operation successfully completes.</p>
<div class="section" id="qapidoc-294">
<h4>Arguments<a class="headerlink" href="#qapidoc-294" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">job-id</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code> (optional)</dt>
<dd>identifier for the newly-created block job. If
omitted, the device name will be used. (Since 2.7)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">device</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code></dt>
<dd>the device name or node-name of a root node</dd>
<dt><code class="docutils literal notranslate"><span class="pre">base-node</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code> (optional)</dt>
<dd>The node name of the backing image to write data into.
If not specified, this is the deepest backing image.
(since: 3.1)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">base</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code> (optional)</dt>
<dd>Same as <code class="docutils literal notranslate"><span class="pre">base-node</span></code>, except that it is a file name rather than a node
name. This must be the exact filename string that was used to open the
node; other strings, even if addressing the same file, are not
accepted</dd>
<dt><code class="docutils literal notranslate"><span class="pre">top-node</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code> (optional)</dt>
<dd>The node name of the backing image within the image chain
which contains the topmost data to be committed down. If
not specified, this is the active layer. (since: 3.1)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">top</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code> (optional)</dt>
<dd>Same as <code class="docutils literal notranslate"><span class="pre">top-node</span></code>, except that it is a file name rather than a node
name. This must be the exact filename string that was used to open the
node; other strings, even if addressing the same file, are not
accepted</dd>
<dt><code class="docutils literal notranslate"><span class="pre">backing-file</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code> (optional)</dt>
<dd><p class="first">The backing file string to write into the overlay
image of ‘top’.  If ‘top’ does not have an overlay
image, or if ‘top’ is in use by a writer, specifying
a backing file string is an error.</p>
<p>This filename is not validated.  If a pathname string
is such that it cannot be resolved by QEMU, that
means that subsequent QMP or HMP commands must use
node-names for the image in question, as filename
lookup methods will fail.</p>
<p class="last">If not specified, QEMU will automatically determine
the backing file string to use, or error out if
there is no obvious choice. Care should be taken
when specifying the string, to specify a valid
filename or protocol.
(Since 2.1)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">speed</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code> (optional)</dt>
<dd>the maximum speed, in bytes per second</dd>
<dt><code class="docutils literal notranslate"><span class="pre">on-error</span></code>: <code class="docutils literal notranslate"><span class="pre">BlockdevOnError</span></code> (optional)</dt>
<dd>the action to take on an error. ‘ignore’ means that the request
should be retried. (default: report; Since: 5.0)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">filter-node-name</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code> (optional)</dt>
<dd>the node name that should be assigned to the
filter driver that the commit job inserts into the graph
above <code class="docutils literal notranslate"><span class="pre">top</span></code>. If this option is not given, a node name is
autogenerated. (Since: 2.9)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">auto-finalize</span></code>: <code class="docutils literal notranslate"><span class="pre">boolean</span></code> (optional)</dt>
<dd>When false, this job will wait in a PENDING state after it has
finished its work, waiting for <code class="docutils literal notranslate"><span class="pre">block-job-finalize</span></code> before
making any block graph changes.
When true, this job will automatically
perform its abort or commit actions.
Defaults to true. (Since 3.1)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">auto-dismiss</span></code>: <code class="docutils literal notranslate"><span class="pre">boolean</span></code> (optional)</dt>
<dd>When false, this job will wait in a CONCLUDED state after it
has completely ceased all work, and awaits <code class="docutils literal notranslate"><span class="pre">block-job-dismiss</span></code>.
When true, this job will automatically disappear from the query
list without user intervention.
Defaults to true. (Since 3.1)</dd>
</dl>
</div>
<div class="section" id="qapidoc-295">
<h4>Features<a class="headerlink" href="#qapidoc-295" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">deprecated</span></code></dt>
<dd>Members <code class="docutils literal notranslate"><span class="pre">base</span></code> and <code class="docutils literal notranslate"><span class="pre">top</span></code> are deprecated.  Use <code class="docutils literal notranslate"><span class="pre">base-node</span></code>
and <code class="docutils literal notranslate"><span class="pre">top-node</span></code> instead.</dd>
</dl>
</div>
<div class="section" id="qapidoc-296">
<h4>Returns<a class="headerlink" href="#qapidoc-296" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>Nothing on success</li>
<li>If <code class="docutils literal notranslate"><span class="pre">device</span></code> does not exist, DeviceNotFound</li>
<li>Any other error returns a GenericError.</li>
</ul>
</div>
<div class="section" id="qapidoc-297">
<h4>Since<a class="headerlink" href="#qapidoc-297" title="Permalink to this headline">¶</a></h4>
<p>1.3</p>
</div>
<div class="section" id="qapidoc-298">
<h4>Example<a class="headerlink" href="#qapidoc-298" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-&gt;</span> <span class="p">{</span> <span class="s2">&quot;execute&quot;</span><span class="p">:</span> <span class="s2">&quot;block-commit&quot;</span><span class="p">,</span>
     <span class="s2">&quot;arguments&quot;</span><span class="p">:</span> <span class="p">{</span> <span class="s2">&quot;device&quot;</span><span class="p">:</span> <span class="s2">&quot;virtio0&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;top&quot;</span><span class="p">:</span> <span class="s2">&quot;/tmp/snap1.qcow2&quot;</span> <span class="p">}</span> <span class="p">}</span>
<span class="o">&lt;-</span> <span class="p">{</span> <span class="s2">&quot;return&quot;</span><span class="p">:</span> <span class="p">{}</span> <span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="qapidoc-304">
<h3><code class="docutils literal notranslate"><span class="pre">drive-backup</span></code> (Command)<a class="headerlink" href="#qapidoc-304" title="Permalink to this headline">¶</a></h3>
<p>Start a point-in-time copy of a block device to a new destination.  The
status of ongoing drive-backup operations can be checked with
query-block-jobs where the BlockJobInfo.type field has the value ‘backup’.
The operation can be stopped before it has completed using the
block-job-cancel command.</p>
<div class="section" id="qapidoc-300">
<h4>Arguments<a class="headerlink" href="#qapidoc-300" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt>The members of <code class="docutils literal notranslate"><span class="pre">DriveBackup</span></code></dl>
</div>
<div class="section" id="qapidoc-301">
<h4>Returns<a class="headerlink" href="#qapidoc-301" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>nothing on success</li>
<li>If <code class="docutils literal notranslate"><span class="pre">device</span></code> is not a valid block device, GenericError</li>
</ul>
</div>
<div class="section" id="qapidoc-302">
<h4>Since<a class="headerlink" href="#qapidoc-302" title="Permalink to this headline">¶</a></h4>
<p>1.6</p>
</div>
<div class="section" id="qapidoc-303">
<h4>Example<a class="headerlink" href="#qapidoc-303" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-&gt;</span> <span class="p">{</span> <span class="s2">&quot;execute&quot;</span><span class="p">:</span> <span class="s2">&quot;drive-backup&quot;</span><span class="p">,</span>
     <span class="s2">&quot;arguments&quot;</span><span class="p">:</span> <span class="p">{</span> <span class="s2">&quot;device&quot;</span><span class="p">:</span> <span class="s2">&quot;drive0&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;sync&quot;</span><span class="p">:</span> <span class="s2">&quot;full&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;backup.img&quot;</span> <span class="p">}</span> <span class="p">}</span>
<span class="o">&lt;-</span> <span class="p">{</span> <span class="s2">&quot;return&quot;</span><span class="p">:</span> <span class="p">{}</span> <span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="qapidoc-309">
<h3><code class="docutils literal notranslate"><span class="pre">blockdev-backup</span></code> (Command)<a class="headerlink" href="#qapidoc-309" title="Permalink to this headline">¶</a></h3>
<p>Start a point-in-time copy of a block device to a new destination.  The
status of ongoing blockdev-backup operations can be checked with
query-block-jobs where the BlockJobInfo.type field has the value ‘backup’.
The operation can be stopped before it has completed using the
block-job-cancel command.</p>
<div class="section" id="qapidoc-305">
<h4>Arguments<a class="headerlink" href="#qapidoc-305" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt>The members of <code class="docutils literal notranslate"><span class="pre">BlockdevBackup</span></code></dl>
</div>
<div class="section" id="qapidoc-306">
<h4>Returns<a class="headerlink" href="#qapidoc-306" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>nothing on success</li>
<li>If <code class="docutils literal notranslate"><span class="pre">device</span></code> is not a valid block device, DeviceNotFound</li>
</ul>
</div>
<div class="section" id="qapidoc-307">
<h4>Since<a class="headerlink" href="#qapidoc-307" title="Permalink to this headline">¶</a></h4>
<p>2.3</p>
</div>
<div class="section" id="qapidoc-308">
<h4>Example<a class="headerlink" href="#qapidoc-308" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-&gt;</span> <span class="p">{</span> <span class="s2">&quot;execute&quot;</span><span class="p">:</span> <span class="s2">&quot;blockdev-backup&quot;</span><span class="p">,</span>
     <span class="s2">&quot;arguments&quot;</span><span class="p">:</span> <span class="p">{</span> <span class="s2">&quot;device&quot;</span><span class="p">:</span> <span class="s2">&quot;src-id&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;sync&quot;</span><span class="p">:</span> <span class="s2">&quot;full&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;tgt-id&quot;</span> <span class="p">}</span> <span class="p">}</span>
<span class="o">&lt;-</span> <span class="p">{</span> <span class="s2">&quot;return&quot;</span><span class="p">:</span> <span class="p">{}</span> <span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="qapidoc-314">
<h3><code class="docutils literal notranslate"><span class="pre">query-named-block-nodes</span></code> (Command)<a class="headerlink" href="#qapidoc-314" title="Permalink to this headline">¶</a></h3>
<p>Get the named block driver list</p>
<div class="section" id="qapidoc-310">
<h4>Arguments<a class="headerlink" href="#qapidoc-310" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">flat</span></code>: <code class="docutils literal notranslate"><span class="pre">boolean</span></code> (optional)</dt>
<dd>Omit the nested data about backing image (“backing-image” key) if true.
Default is false (Since 5.0)</dd>
</dl>
</div>
<div class="section" id="qapidoc-311">
<h4>Returns<a class="headerlink" href="#qapidoc-311" title="Permalink to this headline">¶</a></h4>
<p>the list of BlockDeviceInfo</p>
</div>
<div class="section" id="qapidoc-312">
<h4>Since<a class="headerlink" href="#qapidoc-312" title="Permalink to this headline">¶</a></h4>
<p>2.0</p>
</div>
<div class="section" id="qapidoc-313">
<h4>Example<a class="headerlink" href="#qapidoc-313" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-&gt;</span> <span class="p">{</span> <span class="s2">&quot;execute&quot;</span><span class="p">:</span> <span class="s2">&quot;query-named-block-nodes&quot;</span> <span class="p">}</span>
<span class="o">&lt;-</span> <span class="p">{</span> <span class="s2">&quot;return&quot;</span><span class="p">:</span> <span class="p">[</span> <span class="p">{</span> <span class="s2">&quot;ro&quot;</span><span class="p">:</span><span class="n">false</span><span class="p">,</span>
                   <span class="s2">&quot;drv&quot;</span><span class="p">:</span><span class="s2">&quot;qcow2&quot;</span><span class="p">,</span>
                   <span class="s2">&quot;encrypted&quot;</span><span class="p">:</span><span class="n">false</span><span class="p">,</span>
                   <span class="s2">&quot;file&quot;</span><span class="p">:</span><span class="s2">&quot;disks/test.qcow2&quot;</span><span class="p">,</span>
                   <span class="s2">&quot;node-name&quot;</span><span class="p">:</span> <span class="s2">&quot;my-node&quot;</span><span class="p">,</span>
                   <span class="s2">&quot;backing_file_depth&quot;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span>
                   <span class="s2">&quot;bps&quot;</span><span class="p">:</span><span class="mi">1000000</span><span class="p">,</span>
                   <span class="s2">&quot;bps_rd&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
                   <span class="s2">&quot;bps_wr&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
                   <span class="s2">&quot;iops&quot;</span><span class="p">:</span><span class="mi">1000000</span><span class="p">,</span>
                   <span class="s2">&quot;iops_rd&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
                   <span class="s2">&quot;iops_wr&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
                   <span class="s2">&quot;bps_max&quot;</span><span class="p">:</span> <span class="mi">8000000</span><span class="p">,</span>
                   <span class="s2">&quot;bps_rd_max&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                   <span class="s2">&quot;bps_wr_max&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                   <span class="s2">&quot;iops_max&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                   <span class="s2">&quot;iops_rd_max&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                   <span class="s2">&quot;iops_wr_max&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                   <span class="s2">&quot;iops_size&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                   <span class="s2">&quot;write_threshold&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                   <span class="s2">&quot;image&quot;</span><span class="p">:{</span>
                      <span class="s2">&quot;filename&quot;</span><span class="p">:</span><span class="s2">&quot;disks/test.qcow2&quot;</span><span class="p">,</span>
                      <span class="s2">&quot;format&quot;</span><span class="p">:</span><span class="s2">&quot;qcow2&quot;</span><span class="p">,</span>
                      <span class="s2">&quot;virtual-size&quot;</span><span class="p">:</span><span class="mi">2048000</span><span class="p">,</span>
                      <span class="s2">&quot;backing_file&quot;</span><span class="p">:</span><span class="s2">&quot;base.qcow2&quot;</span><span class="p">,</span>
                      <span class="s2">&quot;full-backing-filename&quot;</span><span class="p">:</span><span class="s2">&quot;disks/base.qcow2&quot;</span><span class="p">,</span>
                      <span class="s2">&quot;backing-filename-format&quot;</span><span class="p">:</span><span class="s2">&quot;qcow2&quot;</span><span class="p">,</span>
                      <span class="s2">&quot;snapshots&quot;</span><span class="p">:[</span>
                         <span class="p">{</span>
                            <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;1&quot;</span><span class="p">,</span>
                            <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;snapshot1&quot;</span><span class="p">,</span>
                            <span class="s2">&quot;vm-state-size&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                            <span class="s2">&quot;date-sec&quot;</span><span class="p">:</span> <span class="mi">10000200</span><span class="p">,</span>
                            <span class="s2">&quot;date-nsec&quot;</span><span class="p">:</span> <span class="mi">12</span><span class="p">,</span>
                            <span class="s2">&quot;vm-clock-sec&quot;</span><span class="p">:</span> <span class="mi">206</span><span class="p">,</span>
                            <span class="s2">&quot;vm-clock-nsec&quot;</span><span class="p">:</span> <span class="mi">30</span>
                         <span class="p">}</span>
                      <span class="p">],</span>
                      <span class="s2">&quot;backing-image&quot;</span><span class="p">:{</span>
                          <span class="s2">&quot;filename&quot;</span><span class="p">:</span><span class="s2">&quot;disks/base.qcow2&quot;</span><span class="p">,</span>
                          <span class="s2">&quot;format&quot;</span><span class="p">:</span><span class="s2">&quot;qcow2&quot;</span><span class="p">,</span>
                          <span class="s2">&quot;virtual-size&quot;</span><span class="p">:</span><span class="mi">2048000</span>
                      <span class="p">}</span>
                   <span class="p">}</span> <span class="p">}</span> <span class="p">]</span> <span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="qapidoc-317">
<h3><code class="docutils literal notranslate"><span class="pre">XDbgBlockGraphNodeType</span></code> (Enum)<a class="headerlink" href="#qapidoc-317" title="Permalink to this headline">¶</a></h3>
<div class="section" id="qapidoc-315">
<h4>Values<a class="headerlink" href="#qapidoc-315" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">block-backend</span></code></dt>
<dd>corresponds to BlockBackend</dd>
<dt><code class="docutils literal notranslate"><span class="pre">block-job</span></code></dt>
<dd>corresponds to BlockJob</dd>
<dt><code class="docutils literal notranslate"><span class="pre">block-driver</span></code></dt>
<dd>corresponds to BlockDriverState</dd>
</dl>
</div>
<div class="section" id="qapidoc-316">
<h4>Since<a class="headerlink" href="#qapidoc-316" title="Permalink to this headline">¶</a></h4>
<p>4.0</p>
</div>
</div>
<div class="section" id="qapidoc-320">
<h3><code class="docutils literal notranslate"><span class="pre">XDbgBlockGraphNode</span></code> (Object)<a class="headerlink" href="#qapidoc-320" title="Permalink to this headline">¶</a></h3>
<div class="section" id="qapidoc-318">
<h4>Members<a class="headerlink" href="#qapidoc-318" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">id</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code></dt>
<dd>Block graph node identifier. This <code class="docutils literal notranslate"><span class="pre">id</span></code> is generated only for
x-debug-query-block-graph and does not relate to any other identifiers in
Qemu.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">type</span></code>: <code class="docutils literal notranslate"><span class="pre">XDbgBlockGraphNodeType</span></code></dt>
<dd>Type of graph node. Can be one of block-backend, block-job or
block-driver-state.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">name</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code></dt>
<dd>Human readable name of the node. Corresponds to node-name for
block-driver-state nodes; is not guaranteed to be unique in the whole
graph (with block-jobs and block-backends).</dd>
</dl>
</div>
<div class="section" id="qapidoc-319">
<h4>Since<a class="headerlink" href="#qapidoc-319" title="Permalink to this headline">¶</a></h4>
<p>4.0</p>
</div>
</div>
<div class="section" id="qapidoc-323">
<h3><code class="docutils literal notranslate"><span class="pre">BlockPermission</span></code> (Enum)<a class="headerlink" href="#qapidoc-323" title="Permalink to this headline">¶</a></h3>
<p>Enum of base block permissions.</p>
<div class="section" id="qapidoc-321">
<h4>Values<a class="headerlink" href="#qapidoc-321" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">consistent-read</span></code></dt>
<dd>A user that has the “permission” of consistent reads is
guaranteed that their view of the contents of the block
device is complete and self-consistent, representing the
contents of a disk at a specific point.
For most block devices (including their backing files) this
is true, but the property cannot be maintained in a few
situations like for intermediate nodes of a commit block
job.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">write</span></code></dt>
<dd>This permission is required to change the visible disk contents.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">write-unchanged</span></code></dt>
<dd>This permission (which is weaker than BLK_PERM_WRITE) is
both enough and required for writes to the block node when
the caller promises that the visible disk content doesn’t
change.
As the BLK_PERM_WRITE permission is strictly stronger,
either is sufficient to perform an unchanging write.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">resize</span></code></dt>
<dd>This permission is required to change the size of a block node.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">graph-mod</span></code></dt>
<dd>This permission is required to change the node that this
BdrvChild points to.</dd>
</dl>
</div>
<div class="section" id="qapidoc-322">
<h4>Since<a class="headerlink" href="#qapidoc-322" title="Permalink to this headline">¶</a></h4>
<p>4.0</p>
</div>
</div>
<div class="section" id="qapidoc-326">
<h3><code class="docutils literal notranslate"><span class="pre">XDbgBlockGraphEdge</span></code> (Object)<a class="headerlink" href="#qapidoc-326" title="Permalink to this headline">¶</a></h3>
<p>Block Graph edge description for x-debug-query-block-graph.</p>
<div class="section" id="qapidoc-324">
<h4>Members<a class="headerlink" href="#qapidoc-324" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">parent</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code></dt>
<dd>parent id</dd>
<dt><code class="docutils literal notranslate"><span class="pre">child</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code></dt>
<dd>child id</dd>
<dt><code class="docutils literal notranslate"><span class="pre">name</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code></dt>
<dd>name of the relation (examples are ‘file’ and ‘backing’)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">perm</span></code>: <code class="docutils literal notranslate"><span class="pre">array</span> <span class="pre">of</span> <span class="pre">BlockPermission</span></code></dt>
<dd>granted permissions for the parent operating on the child</dd>
<dt><code class="docutils literal notranslate"><span class="pre">shared-perm</span></code>: <code class="docutils literal notranslate"><span class="pre">array</span> <span class="pre">of</span> <span class="pre">BlockPermission</span></code></dt>
<dd>permissions that can still be granted to other users of the
child while it is still attached to this parent</dd>
</dl>
</div>
<div class="section" id="qapidoc-325">
<h4>Since<a class="headerlink" href="#qapidoc-325" title="Permalink to this headline">¶</a></h4>
<p>4.0</p>
</div>
</div>
<div class="section" id="qapidoc-329">
<h3><code class="docutils literal notranslate"><span class="pre">XDbgBlockGraph</span></code> (Object)<a class="headerlink" href="#qapidoc-329" title="Permalink to this headline">¶</a></h3>
<p>Block Graph - list of nodes and list of edges.</p>
<div class="section" id="qapidoc-327">
<h4>Members<a class="headerlink" href="#qapidoc-327" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">nodes</span></code>: <code class="docutils literal notranslate"><span class="pre">array</span> <span class="pre">of</span> <span class="pre">XDbgBlockGraphNode</span></code></dt>
<dd>Not documented</dd>
<dt><code class="docutils literal notranslate"><span class="pre">edges</span></code>: <code class="docutils literal notranslate"><span class="pre">array</span> <span class="pre">of</span> <span class="pre">XDbgBlockGraphEdge</span></code></dt>
<dd>Not documented</dd>
</dl>
</div>
<div class="section" id="qapidoc-328">
<h4>Since<a class="headerlink" href="#qapidoc-328" title="Permalink to this headline">¶</a></h4>
<p>4.0</p>
</div>
</div>
<div class="section" id="qapidoc-331">
<h3><code class="docutils literal notranslate"><span class="pre">x-debug-query-block-graph</span></code> (Command)<a class="headerlink" href="#qapidoc-331" title="Permalink to this headline">¶</a></h3>
<p>Get the block graph.</p>
<div class="section" id="qapidoc-330">
<h4>Since<a class="headerlink" href="#qapidoc-330" title="Permalink to this headline">¶</a></h4>
<p>4.0</p>
</div>
</div>
<div class="section" id="qapidoc-336">
<h3><code class="docutils literal notranslate"><span class="pre">drive-mirror</span></code> (Command)<a class="headerlink" href="#qapidoc-336" title="Permalink to this headline">¶</a></h3>
<p>Start mirroring a block device’s writes to a new destination. target
specifies the target of the new image. If the file exists, or if it
is a device, it will be used as the new destination for writes. If
it does not exist, a new file will be created. format specifies the
format of the mirror image, default is to probe if mode=’existing’,
else the format of the source.</p>
<div class="section" id="qapidoc-332">
<h4>Arguments<a class="headerlink" href="#qapidoc-332" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt>The members of <code class="docutils literal notranslate"><span class="pre">DriveMirror</span></code></dl>
</div>
<div class="section" id="qapidoc-333">
<h4>Returns<a class="headerlink" href="#qapidoc-333" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>nothing on success</li>
<li>If <code class="docutils literal notranslate"><span class="pre">device</span></code> is not a valid block device, GenericError</li>
</ul>
</div>
<div class="section" id="qapidoc-334">
<h4>Since<a class="headerlink" href="#qapidoc-334" title="Permalink to this headline">¶</a></h4>
<p>1.3</p>
</div>
<div class="section" id="qapidoc-335">
<h4>Example<a class="headerlink" href="#qapidoc-335" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-&gt;</span> <span class="p">{</span> <span class="s2">&quot;execute&quot;</span><span class="p">:</span> <span class="s2">&quot;drive-mirror&quot;</span><span class="p">,</span>
     <span class="s2">&quot;arguments&quot;</span><span class="p">:</span> <span class="p">{</span> <span class="s2">&quot;device&quot;</span><span class="p">:</span> <span class="s2">&quot;ide-hd0&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;/some/place/my-image&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;sync&quot;</span><span class="p">:</span> <span class="s2">&quot;full&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;format&quot;</span><span class="p">:</span> <span class="s2">&quot;qcow2&quot;</span> <span class="p">}</span> <span class="p">}</span>
<span class="o">&lt;-</span> <span class="p">{</span> <span class="s2">&quot;return&quot;</span><span class="p">:</span> <span class="p">{}</span> <span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="qapidoc-339">
<h3><code class="docutils literal notranslate"><span class="pre">DriveMirror</span></code> (Object)<a class="headerlink" href="#qapidoc-339" title="Permalink to this headline">¶</a></h3>
<p>A set of parameters describing drive mirror setup.</p>
<div class="section" id="qapidoc-337">
<h4>Members<a class="headerlink" href="#qapidoc-337" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">job-id</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code> (optional)</dt>
<dd>identifier for the newly-created block job. If
omitted, the device name will be used. (Since 2.7)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">device</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code></dt>
<dd>the device name or node-name of a root node whose writes should be
mirrored.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">target</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code></dt>
<dd>the target of the new image. If the file exists, or if it
is a device, the existing file/device will be used as the new
destination.  If it does not exist, a new file will be created.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">format</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code> (optional)</dt>
<dd>the format of the new destination, default is to
probe if <code class="docutils literal notranslate"><span class="pre">mode</span></code> is ‘existing’, else the format of the source</dd>
<dt><code class="docutils literal notranslate"><span class="pre">node-name</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code> (optional)</dt>
<dd>the new block driver state node name in the graph
(Since 2.1)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">replaces</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code> (optional)</dt>
<dd>with sync=full graph node name to be replaced by the new
image when a whole image copy is done. This can be used to repair
broken Quorum files.  By default, <code class="docutils literal notranslate"><span class="pre">device</span></code> is replaced, although
implicitly created filters on it are kept. (Since 2.1)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">mode</span></code>: <code class="docutils literal notranslate"><span class="pre">NewImageMode</span></code> (optional)</dt>
<dd>whether and how QEMU should create a new image, default is
‘absolute-paths’.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">speed</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code> (optional)</dt>
<dd>the maximum speed, in bytes per second</dd>
<dt><code class="docutils literal notranslate"><span class="pre">sync</span></code>: <code class="docutils literal notranslate"><span class="pre">MirrorSyncMode</span></code></dt>
<dd>what parts of the disk image should be copied to the destination
(all the disk, only the sectors allocated in the topmost image, or
only new I/O).</dd>
<dt><code class="docutils literal notranslate"><span class="pre">granularity</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code> (optional)</dt>
<dd>granularity of the dirty bitmap, default is 64K
if the image format doesn’t have clusters, 4K if the clusters
are smaller than that, else the cluster size.  Must be a
power of 2 between 512 and 64M (since 1.4).</dd>
<dt><code class="docutils literal notranslate"><span class="pre">buf-size</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code> (optional)</dt>
<dd>maximum amount of data in flight from source to
target (since 1.4).</dd>
<dt><code class="docutils literal notranslate"><span class="pre">on-source-error</span></code>: <code class="docutils literal notranslate"><span class="pre">BlockdevOnError</span></code> (optional)</dt>
<dd>the action to take on an error on the source,
default ‘report’.  ‘stop’ and ‘enospc’ can only be used
if the block device supports io-status (see BlockInfo).</dd>
<dt><code class="docutils literal notranslate"><span class="pre">on-target-error</span></code>: <code class="docutils literal notranslate"><span class="pre">BlockdevOnError</span></code> (optional)</dt>
<dd>the action to take on an error on the target,
default ‘report’ (no limitations, since this applies to
a different block device than <code class="docutils literal notranslate"><span class="pre">device</span></code>).</dd>
<dt><code class="docutils literal notranslate"><span class="pre">unmap</span></code>: <code class="docutils literal notranslate"><span class="pre">boolean</span></code> (optional)</dt>
<dd>Whether to try to unmap target sectors where source has
only zero. If true, and target unallocated sectors will read as zero,
target image sectors will be unmapped; otherwise, zeroes will be
written. Both will result in identical contents.
Default is true. (Since 2.4)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">copy-mode</span></code>: <code class="docutils literal notranslate"><span class="pre">MirrorCopyMode</span></code> (optional)</dt>
<dd>when to copy data to the destination; defaults to ‘background’
(Since: 3.0)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">auto-finalize</span></code>: <code class="docutils literal notranslate"><span class="pre">boolean</span></code> (optional)</dt>
<dd>When false, this job will wait in a PENDING state after it has
finished its work, waiting for <code class="docutils literal notranslate"><span class="pre">block-job-finalize</span></code> before
making any block graph changes.
When true, this job will automatically
perform its abort or commit actions.
Defaults to true. (Since 3.1)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">auto-dismiss</span></code>: <code class="docutils literal notranslate"><span class="pre">boolean</span></code> (optional)</dt>
<dd>When false, this job will wait in a CONCLUDED state after it
has completely ceased all work, and awaits <code class="docutils literal notranslate"><span class="pre">block-job-dismiss</span></code>.
When true, this job will automatically disappear from the query
list without user intervention.
Defaults to true. (Since 3.1)</dd>
</dl>
</div>
<div class="section" id="qapidoc-338">
<h4>Since<a class="headerlink" href="#qapidoc-338" title="Permalink to this headline">¶</a></h4>
<p>1.3</p>
</div>
</div>
<div class="section" id="qapidoc-342">
<h3><code class="docutils literal notranslate"><span class="pre">BlockDirtyBitmap</span></code> (Object)<a class="headerlink" href="#qapidoc-342" title="Permalink to this headline">¶</a></h3>
<div class="section" id="qapidoc-340">
<h4>Members<a class="headerlink" href="#qapidoc-340" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">node</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code></dt>
<dd>name of device/node which the bitmap is tracking</dd>
<dt><code class="docutils literal notranslate"><span class="pre">name</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code></dt>
<dd>name of the dirty bitmap</dd>
</dl>
</div>
<div class="section" id="qapidoc-341">
<h4>Since<a class="headerlink" href="#qapidoc-341" title="Permalink to this headline">¶</a></h4>
<p>2.4</p>
</div>
</div>
<div class="section" id="qapidoc-345">
<h3><code class="docutils literal notranslate"><span class="pre">BlockDirtyBitmapAdd</span></code> (Object)<a class="headerlink" href="#qapidoc-345" title="Permalink to this headline">¶</a></h3>
<div class="section" id="qapidoc-343">
<h4>Members<a class="headerlink" href="#qapidoc-343" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">node</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code></dt>
<dd>name of device/node which the bitmap is tracking</dd>
<dt><code class="docutils literal notranslate"><span class="pre">name</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code></dt>
<dd>name of the dirty bitmap (must be less than 1024 bytes)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">granularity</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code> (optional)</dt>
<dd>the bitmap granularity, default is 64k for
block-dirty-bitmap-add</dd>
<dt><code class="docutils literal notranslate"><span class="pre">persistent</span></code>: <code class="docutils literal notranslate"><span class="pre">boolean</span></code> (optional)</dt>
<dd>the bitmap is persistent, i.e. it will be saved to the
corresponding block device image file on its close. For now only
Qcow2 disks support persistent bitmaps. Default is false for
block-dirty-bitmap-add. (Since: 2.10)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">disabled</span></code>: <code class="docutils literal notranslate"><span class="pre">boolean</span></code> (optional)</dt>
<dd>the bitmap is created in the disabled state, which means that
it will not track drive changes. The bitmap may be enabled with
block-dirty-bitmap-enable. Default is false. (Since: 4.0)</dd>
</dl>
</div>
<div class="section" id="qapidoc-344">
<h4>Since<a class="headerlink" href="#qapidoc-344" title="Permalink to this headline">¶</a></h4>
<p>2.4</p>
</div>
</div>
<div class="section" id="qapidoc-348">
<h3><code class="docutils literal notranslate"><span class="pre">BlockDirtyBitmapMergeSource</span></code> (Alternate)<a class="headerlink" href="#qapidoc-348" title="Permalink to this headline">¶</a></h3>
<div class="section" id="qapidoc-346">
<h4>Members<a class="headerlink" href="#qapidoc-346" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">local</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code></dt>
<dd>name of the bitmap, attached to the same node as target bitmap.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">external</span></code>: <code class="docutils literal notranslate"><span class="pre">BlockDirtyBitmap</span></code></dt>
<dd>bitmap with specified node</dd>
</dl>
</div>
<div class="section" id="qapidoc-347">
<h4>Since<a class="headerlink" href="#qapidoc-347" title="Permalink to this headline">¶</a></h4>
<p>4.1</p>
</div>
</div>
<div class="section" id="qapidoc-351">
<h3><code class="docutils literal notranslate"><span class="pre">BlockDirtyBitmapMerge</span></code> (Object)<a class="headerlink" href="#qapidoc-351" title="Permalink to this headline">¶</a></h3>
<div class="section" id="qapidoc-349">
<h4>Members<a class="headerlink" href="#qapidoc-349" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">node</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code></dt>
<dd>name of device/node which the <code class="docutils literal notranslate"><span class="pre">target</span></code> bitmap is tracking</dd>
<dt><code class="docutils literal notranslate"><span class="pre">target</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code></dt>
<dd>name of the destination dirty bitmap</dd>
<dt><code class="docutils literal notranslate"><span class="pre">bitmaps</span></code>: <code class="docutils literal notranslate"><span class="pre">array</span> <span class="pre">of</span> <span class="pre">BlockDirtyBitmapMergeSource</span></code></dt>
<dd>name(s) of the source dirty bitmap(s) at <code class="docutils literal notranslate"><span class="pre">node</span></code> and/or fully
specified BlockDirtyBitmap elements. The latter are supported
since 4.1.</dd>
</dl>
</div>
<div class="section" id="qapidoc-350">
<h4>Since<a class="headerlink" href="#qapidoc-350" title="Permalink to this headline">¶</a></h4>
<p>4.0</p>
</div>
</div>
<div class="section" id="qapidoc-355">
<h3><code class="docutils literal notranslate"><span class="pre">block-dirty-bitmap-add</span></code> (Command)<a class="headerlink" href="#qapidoc-355" title="Permalink to this headline">¶</a></h3>
<p>Create a dirty bitmap with a name on the node, and start tracking the writes.</p>
<div class="section" id="qapidoc-352">
<h4>Returns<a class="headerlink" href="#qapidoc-352" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>nothing on success</li>
<li>If <code class="docutils literal notranslate"><span class="pre">node</span></code> is not a valid block device or node, DeviceNotFound</li>
<li>If <code class="docutils literal notranslate"><span class="pre">name</span></code> is already taken, GenericError with an explanation</li>
</ul>
</div>
<div class="section" id="qapidoc-353">
<h4>Since<a class="headerlink" href="#qapidoc-353" title="Permalink to this headline">¶</a></h4>
<p>2.4</p>
</div>
<div class="section" id="qapidoc-354">
<h4>Example<a class="headerlink" href="#qapidoc-354" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-&gt;</span> <span class="p">{</span> <span class="s2">&quot;execute&quot;</span><span class="p">:</span> <span class="s2">&quot;block-dirty-bitmap-add&quot;</span><span class="p">,</span>
     <span class="s2">&quot;arguments&quot;</span><span class="p">:</span> <span class="p">{</span> <span class="s2">&quot;node&quot;</span><span class="p">:</span> <span class="s2">&quot;drive0&quot;</span><span class="p">,</span> <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;bitmap0&quot;</span> <span class="p">}</span> <span class="p">}</span>
<span class="o">&lt;-</span> <span class="p">{</span> <span class="s2">&quot;return&quot;</span><span class="p">:</span> <span class="p">{}</span> <span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="qapidoc-359">
<h3><code class="docutils literal notranslate"><span class="pre">block-dirty-bitmap-remove</span></code> (Command)<a class="headerlink" href="#qapidoc-359" title="Permalink to this headline">¶</a></h3>
<p>Stop write tracking and remove the dirty bitmap that was created
with block-dirty-bitmap-add. If the bitmap is persistent, remove it from its
storage too.</p>
<div class="section" id="qapidoc-356">
<h4>Returns<a class="headerlink" href="#qapidoc-356" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>nothing on success</li>
<li>If <code class="docutils literal notranslate"><span class="pre">node</span></code> is not a valid block device or node, DeviceNotFound</li>
<li>If <code class="docutils literal notranslate"><span class="pre">name</span></code> is not found, GenericError with an explanation</li>
<li>if <code class="docutils literal notranslate"><span class="pre">name</span></code> is frozen by an operation, GenericError</li>
</ul>
</div>
<div class="section" id="qapidoc-357">
<h4>Since<a class="headerlink" href="#qapidoc-357" title="Permalink to this headline">¶</a></h4>
<p>2.4</p>
</div>
<div class="section" id="qapidoc-358">
<h4>Example<a class="headerlink" href="#qapidoc-358" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-&gt;</span> <span class="p">{</span> <span class="s2">&quot;execute&quot;</span><span class="p">:</span> <span class="s2">&quot;block-dirty-bitmap-remove&quot;</span><span class="p">,</span>
     <span class="s2">&quot;arguments&quot;</span><span class="p">:</span> <span class="p">{</span> <span class="s2">&quot;node&quot;</span><span class="p">:</span> <span class="s2">&quot;drive0&quot;</span><span class="p">,</span> <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;bitmap0&quot;</span> <span class="p">}</span> <span class="p">}</span>
<span class="o">&lt;-</span> <span class="p">{</span> <span class="s2">&quot;return&quot;</span><span class="p">:</span> <span class="p">{}</span> <span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="qapidoc-363">
<h3><code class="docutils literal notranslate"><span class="pre">block-dirty-bitmap-clear</span></code> (Command)<a class="headerlink" href="#qapidoc-363" title="Permalink to this headline">¶</a></h3>
<p>Clear (reset) a dirty bitmap on the device, so that an incremental
backup from this point in time forward will only backup clusters
modified after this clear operation.</p>
<div class="section" id="qapidoc-360">
<h4>Returns<a class="headerlink" href="#qapidoc-360" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>nothing on success</li>
<li>If <code class="docutils literal notranslate"><span class="pre">node</span></code> is not a valid block device, DeviceNotFound</li>
<li>If <code class="docutils literal notranslate"><span class="pre">name</span></code> is not found, GenericError with an explanation</li>
</ul>
</div>
<div class="section" id="qapidoc-361">
<h4>Since<a class="headerlink" href="#qapidoc-361" title="Permalink to this headline">¶</a></h4>
<p>2.4</p>
</div>
<div class="section" id="qapidoc-362">
<h4>Example<a class="headerlink" href="#qapidoc-362" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-&gt;</span> <span class="p">{</span> <span class="s2">&quot;execute&quot;</span><span class="p">:</span> <span class="s2">&quot;block-dirty-bitmap-clear&quot;</span><span class="p">,</span>
     <span class="s2">&quot;arguments&quot;</span><span class="p">:</span> <span class="p">{</span> <span class="s2">&quot;node&quot;</span><span class="p">:</span> <span class="s2">&quot;drive0&quot;</span><span class="p">,</span> <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;bitmap0&quot;</span> <span class="p">}</span> <span class="p">}</span>
<span class="o">&lt;-</span> <span class="p">{</span> <span class="s2">&quot;return&quot;</span><span class="p">:</span> <span class="p">{}</span> <span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="qapidoc-367">
<h3><code class="docutils literal notranslate"><span class="pre">block-dirty-bitmap-enable</span></code> (Command)<a class="headerlink" href="#qapidoc-367" title="Permalink to this headline">¶</a></h3>
<p>Enables a dirty bitmap so that it will begin tracking disk changes.</p>
<div class="section" id="qapidoc-364">
<h4>Returns<a class="headerlink" href="#qapidoc-364" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>nothing on success</li>
<li>If <code class="docutils literal notranslate"><span class="pre">node</span></code> is not a valid block device, DeviceNotFound</li>
<li>If <code class="docutils literal notranslate"><span class="pre">name</span></code> is not found, GenericError with an explanation</li>
</ul>
</div>
<div class="section" id="qapidoc-365">
<h4>Since<a class="headerlink" href="#qapidoc-365" title="Permalink to this headline">¶</a></h4>
<p>4.0</p>
</div>
<div class="section" id="qapidoc-366">
<h4>Example<a class="headerlink" href="#qapidoc-366" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-&gt;</span> <span class="p">{</span> <span class="s2">&quot;execute&quot;</span><span class="p">:</span> <span class="s2">&quot;block-dirty-bitmap-enable&quot;</span><span class="p">,</span>
     <span class="s2">&quot;arguments&quot;</span><span class="p">:</span> <span class="p">{</span> <span class="s2">&quot;node&quot;</span><span class="p">:</span> <span class="s2">&quot;drive0&quot;</span><span class="p">,</span> <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;bitmap0&quot;</span> <span class="p">}</span> <span class="p">}</span>
<span class="o">&lt;-</span> <span class="p">{</span> <span class="s2">&quot;return&quot;</span><span class="p">:</span> <span class="p">{}</span> <span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="qapidoc-371">
<h3><code class="docutils literal notranslate"><span class="pre">block-dirty-bitmap-disable</span></code> (Command)<a class="headerlink" href="#qapidoc-371" title="Permalink to this headline">¶</a></h3>
<p>Disables a dirty bitmap so that it will stop tracking disk changes.</p>
<div class="section" id="qapidoc-368">
<h4>Returns<a class="headerlink" href="#qapidoc-368" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>nothing on success</li>
<li>If <code class="docutils literal notranslate"><span class="pre">node</span></code> is not a valid block device, DeviceNotFound</li>
<li>If <code class="docutils literal notranslate"><span class="pre">name</span></code> is not found, GenericError with an explanation</li>
</ul>
</div>
<div class="section" id="qapidoc-369">
<h4>Since<a class="headerlink" href="#qapidoc-369" title="Permalink to this headline">¶</a></h4>
<p>4.0</p>
</div>
<div class="section" id="qapidoc-370">
<h4>Example<a class="headerlink" href="#qapidoc-370" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-&gt;</span> <span class="p">{</span> <span class="s2">&quot;execute&quot;</span><span class="p">:</span> <span class="s2">&quot;block-dirty-bitmap-disable&quot;</span><span class="p">,</span>
     <span class="s2">&quot;arguments&quot;</span><span class="p">:</span> <span class="p">{</span> <span class="s2">&quot;node&quot;</span><span class="p">:</span> <span class="s2">&quot;drive0&quot;</span><span class="p">,</span> <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;bitmap0&quot;</span> <span class="p">}</span> <span class="p">}</span>
<span class="o">&lt;-</span> <span class="p">{</span> <span class="s2">&quot;return&quot;</span><span class="p">:</span> <span class="p">{}</span> <span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="qapidoc-375">
<h3><code class="docutils literal notranslate"><span class="pre">block-dirty-bitmap-merge</span></code> (Command)<a class="headerlink" href="#qapidoc-375" title="Permalink to this headline">¶</a></h3>
<p>Merge dirty bitmaps listed in <code class="docutils literal notranslate"><span class="pre">bitmaps</span></code> to the <code class="docutils literal notranslate"><span class="pre">target</span></code> dirty bitmap.
Dirty bitmaps in <code class="docutils literal notranslate"><span class="pre">bitmaps</span></code> will be unchanged, except if it also appears
as the <code class="docutils literal notranslate"><span class="pre">target</span></code> bitmap. Any bits already set in <code class="docutils literal notranslate"><span class="pre">target</span></code> will still be
set after the merge, i.e., this operation does not clear the target.
On error, <code class="docutils literal notranslate"><span class="pre">target</span></code> is unchanged.</p>
<p>The resulting bitmap will count as dirty any clusters that were dirty in any
of the source bitmaps. This can be used to achieve backup checkpoints, or in
simpler usages, to copy bitmaps.</p>
<div class="section" id="qapidoc-372">
<h4>Returns<a class="headerlink" href="#qapidoc-372" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>nothing on success</li>
<li>If <code class="docutils literal notranslate"><span class="pre">node</span></code> is not a valid block device, DeviceNotFound</li>
<li>If any bitmap in <code class="docutils literal notranslate"><span class="pre">bitmaps</span></code> or <code class="docutils literal notranslate"><span class="pre">target</span></code> is not found, GenericError</li>
<li>If any of the bitmaps have different sizes or granularities,
GenericError</li>
</ul>
</div>
<div class="section" id="qapidoc-373">
<h4>Since<a class="headerlink" href="#qapidoc-373" title="Permalink to this headline">¶</a></h4>
<p>4.0</p>
</div>
<div class="section" id="qapidoc-374">
<h4>Example<a class="headerlink" href="#qapidoc-374" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-&gt;</span> <span class="p">{</span> <span class="s2">&quot;execute&quot;</span><span class="p">:</span> <span class="s2">&quot;block-dirty-bitmap-merge&quot;</span><span class="p">,</span>
     <span class="s2">&quot;arguments&quot;</span><span class="p">:</span> <span class="p">{</span> <span class="s2">&quot;node&quot;</span><span class="p">:</span> <span class="s2">&quot;drive0&quot;</span><span class="p">,</span> <span class="s2">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;bitmap0&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;bitmaps&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;bitmap1&quot;</span><span class="p">]</span> <span class="p">}</span> <span class="p">}</span>
<span class="o">&lt;-</span> <span class="p">{</span> <span class="s2">&quot;return&quot;</span><span class="p">:</span> <span class="p">{}</span> <span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="qapidoc-378">
<h3><code class="docutils literal notranslate"><span class="pre">BlockDirtyBitmapSha256</span></code> (Object)<a class="headerlink" href="#qapidoc-378" title="Permalink to this headline">¶</a></h3>
<p>SHA256 hash of dirty bitmap data</p>
<div class="section" id="qapidoc-376">
<h4>Members<a class="headerlink" href="#qapidoc-376" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">sha256</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code></dt>
<dd>ASCII representation of SHA256 bitmap hash</dd>
</dl>
</div>
<div class="section" id="qapidoc-377">
<h4>Since<a class="headerlink" href="#qapidoc-377" title="Permalink to this headline">¶</a></h4>
<p>2.10</p>
</div>
</div>
<div class="section" id="qapidoc-381">
<h3><code class="docutils literal notranslate"><span class="pre">x-debug-block-dirty-bitmap-sha256</span></code> (Command)<a class="headerlink" href="#qapidoc-381" title="Permalink to this headline">¶</a></h3>
<p>Get bitmap SHA256.</p>
<div class="section" id="qapidoc-379">
<h4>Returns<a class="headerlink" href="#qapidoc-379" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>BlockDirtyBitmapSha256 on success</li>
<li>If <code class="docutils literal notranslate"><span class="pre">node</span></code> is not a valid block device, DeviceNotFound</li>
<li>If <code class="docutils literal notranslate"><span class="pre">name</span></code> is not found or if hashing has failed, GenericError with an
explanation</li>
</ul>
</div>
<div class="section" id="qapidoc-380">
<h4>Since<a class="headerlink" href="#qapidoc-380" title="Permalink to this headline">¶</a></h4>
<p>2.10</p>
</div>
</div>
<div class="section" id="qapidoc-386">
<h3><code class="docutils literal notranslate"><span class="pre">blockdev-mirror</span></code> (Command)<a class="headerlink" href="#qapidoc-386" title="Permalink to this headline">¶</a></h3>
<p>Start mirroring a block device’s writes to a new destination.</p>
<div class="section" id="qapidoc-382">
<h4>Arguments<a class="headerlink" href="#qapidoc-382" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">job-id</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code> (optional)</dt>
<dd>identifier for the newly-created block job. If
omitted, the device name will be used. (Since 2.7)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">device</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code></dt>
<dd>The device name or node-name of a root node whose writes should be
mirrored.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">target</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code></dt>
<dd>the id or node-name of the block device to mirror to. This mustn’t be
attached to guest.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">replaces</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code> (optional)</dt>
<dd>with sync=full graph node name to be replaced by the new
image when a whole image copy is done. This can be used to repair
broken Quorum files.  By default, <code class="docutils literal notranslate"><span class="pre">device</span></code> is replaced, although
implicitly created filters on it are kept.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">speed</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code> (optional)</dt>
<dd>the maximum speed, in bytes per second</dd>
<dt><code class="docutils literal notranslate"><span class="pre">sync</span></code>: <code class="docutils literal notranslate"><span class="pre">MirrorSyncMode</span></code></dt>
<dd>what parts of the disk image should be copied to the destination
(all the disk, only the sectors allocated in the topmost image, or
only new I/O).</dd>
<dt><code class="docutils literal notranslate"><span class="pre">granularity</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code> (optional)</dt>
<dd>granularity of the dirty bitmap, default is 64K
if the image format doesn’t have clusters, 4K if the clusters
are smaller than that, else the cluster size.  Must be a
power of 2 between 512 and 64M</dd>
<dt><code class="docutils literal notranslate"><span class="pre">buf-size</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code> (optional)</dt>
<dd>maximum amount of data in flight from source to
target</dd>
<dt><code class="docutils literal notranslate"><span class="pre">on-source-error</span></code>: <code class="docutils literal notranslate"><span class="pre">BlockdevOnError</span></code> (optional)</dt>
<dd>the action to take on an error on the source,
default ‘report’.  ‘stop’ and ‘enospc’ can only be used
if the block device supports io-status (see BlockInfo).</dd>
<dt><code class="docutils literal notranslate"><span class="pre">on-target-error</span></code>: <code class="docutils literal notranslate"><span class="pre">BlockdevOnError</span></code> (optional)</dt>
<dd>the action to take on an error on the target,
default ‘report’ (no limitations, since this applies to
a different block device than <code class="docutils literal notranslate"><span class="pre">device</span></code>).</dd>
<dt><code class="docutils literal notranslate"><span class="pre">filter-node-name</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code> (optional)</dt>
<dd>the node name that should be assigned to the
filter driver that the mirror job inserts into the graph
above <code class="docutils literal notranslate"><span class="pre">device</span></code>. If this option is not given, a node name is
autogenerated. (Since: 2.9)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">copy-mode</span></code>: <code class="docutils literal notranslate"><span class="pre">MirrorCopyMode</span></code> (optional)</dt>
<dd>when to copy data to the destination; defaults to ‘background’
(Since: 3.0)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">auto-finalize</span></code>: <code class="docutils literal notranslate"><span class="pre">boolean</span></code> (optional)</dt>
<dd>When false, this job will wait in a PENDING state after it has
finished its work, waiting for <code class="docutils literal notranslate"><span class="pre">block-job-finalize</span></code> before
making any block graph changes.
When true, this job will automatically
perform its abort or commit actions.
Defaults to true. (Since 3.1)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">auto-dismiss</span></code>: <code class="docutils literal notranslate"><span class="pre">boolean</span></code> (optional)</dt>
<dd>When false, this job will wait in a CONCLUDED state after it
has completely ceased all work, and awaits <code class="docutils literal notranslate"><span class="pre">block-job-dismiss</span></code>.
When true, this job will automatically disappear from the query
list without user intervention.
Defaults to true. (Since 3.1)</dd>
</dl>
</div>
<div class="section" id="qapidoc-383">
<h4>Returns<a class="headerlink" href="#qapidoc-383" title="Permalink to this headline">¶</a></h4>
<p>nothing on success.</p>
</div>
<div class="section" id="qapidoc-384">
<h4>Since<a class="headerlink" href="#qapidoc-384" title="Permalink to this headline">¶</a></h4>
<p>2.6</p>
</div>
<div class="section" id="qapidoc-385">
<h4>Example<a class="headerlink" href="#qapidoc-385" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-&gt;</span> <span class="p">{</span> <span class="s2">&quot;execute&quot;</span><span class="p">:</span> <span class="s2">&quot;blockdev-mirror&quot;</span><span class="p">,</span>
     <span class="s2">&quot;arguments&quot;</span><span class="p">:</span> <span class="p">{</span> <span class="s2">&quot;device&quot;</span><span class="p">:</span> <span class="s2">&quot;ide-hd0&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;target0&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;sync&quot;</span><span class="p">:</span> <span class="s2">&quot;full&quot;</span> <span class="p">}</span> <span class="p">}</span>
<span class="o">&lt;-</span> <span class="p">{</span> <span class="s2">&quot;return&quot;</span><span class="p">:</span> <span class="p">{}</span> <span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="qapidoc-390">
<h3><code class="docutils literal notranslate"><span class="pre">BlockIOThrottle</span></code> (Object)<a class="headerlink" href="#qapidoc-390" title="Permalink to this headline">¶</a></h3>
<p>A set of parameters describing block throttling.</p>
<div class="section" id="qapidoc-387">
<h4>Members<a class="headerlink" href="#qapidoc-387" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">device</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code> (optional)</dt>
<dd>Block device name</dd>
<dt><code class="docutils literal notranslate"><span class="pre">id</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code> (optional)</dt>
<dd>The name or QOM path of the guest device (since: 2.8)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">bps</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code></dt>
<dd>total throughput limit in bytes per second</dd>
<dt><code class="docutils literal notranslate"><span class="pre">bps_rd</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code></dt>
<dd>read throughput limit in bytes per second</dd>
<dt><code class="docutils literal notranslate"><span class="pre">bps_wr</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code></dt>
<dd>write throughput limit in bytes per second</dd>
<dt><code class="docutils literal notranslate"><span class="pre">iops</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code></dt>
<dd>total I/O operations per second</dd>
<dt><code class="docutils literal notranslate"><span class="pre">iops_rd</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code></dt>
<dd>read I/O operations per second</dd>
<dt><code class="docutils literal notranslate"><span class="pre">iops_wr</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code></dt>
<dd>write I/O operations per second</dd>
<dt><code class="docutils literal notranslate"><span class="pre">bps_max</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code> (optional)</dt>
<dd>total throughput limit during bursts,
in bytes (Since 1.7)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">bps_rd_max</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code> (optional)</dt>
<dd>read throughput limit during bursts,
in bytes (Since 1.7)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">bps_wr_max</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code> (optional)</dt>
<dd>write throughput limit during bursts,
in bytes (Since 1.7)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">iops_max</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code> (optional)</dt>
<dd>total I/O operations per second during bursts,
in bytes (Since 1.7)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">iops_rd_max</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code> (optional)</dt>
<dd>read I/O operations per second during bursts,
in bytes (Since 1.7)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">iops_wr_max</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code> (optional)</dt>
<dd>write I/O operations per second during bursts,
in bytes (Since 1.7)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">bps_max_length</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code> (optional)</dt>
<dd>maximum length of the <code class="docutils literal notranslate"><span class="pre">bps_max</span></code> burst
period, in seconds. It must only
be set if <code class="docutils literal notranslate"><span class="pre">bps_max</span></code> is set as well.
Defaults to 1. (Since 2.6)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">bps_rd_max_length</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code> (optional)</dt>
<dd>maximum length of the <code class="docutils literal notranslate"><span class="pre">bps_rd_max</span></code>
burst period, in seconds. It must only
be set if <code class="docutils literal notranslate"><span class="pre">bps_rd_max</span></code> is set as well.
Defaults to 1. (Since 2.6)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">bps_wr_max_length</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code> (optional)</dt>
<dd>maximum length of the <code class="docutils literal notranslate"><span class="pre">bps_wr_max</span></code>
burst period, in seconds. It must only
be set if <code class="docutils literal notranslate"><span class="pre">bps_wr_max</span></code> is set as well.
Defaults to 1. (Since 2.6)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">iops_max_length</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code> (optional)</dt>
<dd>maximum length of the <code class="docutils literal notranslate"><span class="pre">iops</span></code> burst
period, in seconds. It must only
be set if <code class="docutils literal notranslate"><span class="pre">iops_max</span></code> is set as well.
Defaults to 1. (Since 2.6)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">iops_rd_max_length</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code> (optional)</dt>
<dd>maximum length of the <code class="docutils literal notranslate"><span class="pre">iops_rd_max</span></code>
burst period, in seconds. It must only
be set if <code class="docutils literal notranslate"><span class="pre">iops_rd_max</span></code> is set as well.
Defaults to 1. (Since 2.6)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">iops_wr_max_length</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code> (optional)</dt>
<dd>maximum length of the <code class="docutils literal notranslate"><span class="pre">iops_wr_max</span></code>
burst period, in seconds. It must only
be set if <code class="docutils literal notranslate"><span class="pre">iops_wr_max</span></code> is set as well.
Defaults to 1. (Since 2.6)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">iops_size</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code> (optional)</dt>
<dd>an I/O size in bytes (Since 1.7)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">group</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code> (optional)</dt>
<dd>throttle group name (Since 2.4)</dd>
</dl>
</div>
<div class="section" id="qapidoc-388">
<h4>Features<a class="headerlink" href="#qapidoc-388" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">deprecated</span></code></dt>
<dd>Member <code class="docutils literal notranslate"><span class="pre">device</span></code> is deprecated.  Use <code class="docutils literal notranslate"><span class="pre">id</span></code> instead.</dd>
</dl>
</div>
<div class="section" id="qapidoc-389">
<h4>Since<a class="headerlink" href="#qapidoc-389" title="Permalink to this headline">¶</a></h4>
<p>1.1</p>
</div>
</div>
<div class="section" id="qapidoc-393">
<h3><code class="docutils literal notranslate"><span class="pre">ThrottleLimits</span></code> (Object)<a class="headerlink" href="#qapidoc-393" title="Permalink to this headline">¶</a></h3>
<p>Limit parameters for throttling.
Since some limit combinations are illegal, limits should always be set in one
transaction. All fields are optional. When setting limits, if a field is
missing the current value is not changed.</p>
<div class="section" id="qapidoc-391">
<h4>Members<a class="headerlink" href="#qapidoc-391" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">iops-total</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code> (optional)</dt>
<dd>limit total I/O operations per second</dd>
<dt><code class="docutils literal notranslate"><span class="pre">iops-total-max</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code> (optional)</dt>
<dd>I/O operations burst</dd>
<dt><code class="docutils literal notranslate"><span class="pre">iops-total-max-length</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code> (optional)</dt>
<dd>length of the iops-total-max burst period, in seconds
It must only be set if <code class="docutils literal notranslate"><span class="pre">iops-total-max</span></code> is set as well.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">iops-read</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code> (optional)</dt>
<dd>limit read operations per second</dd>
<dt><code class="docutils literal notranslate"><span class="pre">iops-read-max</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code> (optional)</dt>
<dd>I/O operations read burst</dd>
<dt><code class="docutils literal notranslate"><span class="pre">iops-read-max-length</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code> (optional)</dt>
<dd>length of the iops-read-max burst period, in seconds
It must only be set if <code class="docutils literal notranslate"><span class="pre">iops-read-max</span></code> is set as well.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">iops-write</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code> (optional)</dt>
<dd>limit write operations per second</dd>
<dt><code class="docutils literal notranslate"><span class="pre">iops-write-max</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code> (optional)</dt>
<dd>I/O operations write burst</dd>
<dt><code class="docutils literal notranslate"><span class="pre">iops-write-max-length</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code> (optional)</dt>
<dd>length of the iops-write-max burst period, in seconds
It must only be set if <code class="docutils literal notranslate"><span class="pre">iops-write-max</span></code> is set as well.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">bps-total</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code> (optional)</dt>
<dd>limit total bytes per second</dd>
<dt><code class="docutils literal notranslate"><span class="pre">bps-total-max</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code> (optional)</dt>
<dd>total bytes burst</dd>
<dt><code class="docutils literal notranslate"><span class="pre">bps-total-max-length</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code> (optional)</dt>
<dd>length of the bps-total-max burst period, in seconds.
It must only be set if <code class="docutils literal notranslate"><span class="pre">bps-total-max</span></code> is set as well.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">bps-read</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code> (optional)</dt>
<dd>limit read bytes per second</dd>
<dt><code class="docutils literal notranslate"><span class="pre">bps-read-max</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code> (optional)</dt>
<dd>total bytes read burst</dd>
<dt><code class="docutils literal notranslate"><span class="pre">bps-read-max-length</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code> (optional)</dt>
<dd>length of the bps-read-max burst period, in seconds
It must only be set if <code class="docutils literal notranslate"><span class="pre">bps-read-max</span></code> is set as well.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">bps-write</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code> (optional)</dt>
<dd>limit write bytes per second</dd>
<dt><code class="docutils literal notranslate"><span class="pre">bps-write-max</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code> (optional)</dt>
<dd>total bytes write burst</dd>
<dt><code class="docutils literal notranslate"><span class="pre">bps-write-max-length</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code> (optional)</dt>
<dd>length of the bps-write-max burst period, in seconds
It must only be set if <code class="docutils literal notranslate"><span class="pre">bps-write-max</span></code> is set as well.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">iops-size</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code> (optional)</dt>
<dd>when limiting by iops max size of an I/O in bytes</dd>
</dl>
</div>
<div class="section" id="qapidoc-392">
<h4>Since<a class="headerlink" href="#qapidoc-392" title="Permalink to this headline">¶</a></h4>
<p>2.11</p>
</div>
</div>
<div class="section" id="qapidoc-398">
<h3><code class="docutils literal notranslate"><span class="pre">block-stream</span></code> (Command)<a class="headerlink" href="#qapidoc-398" title="Permalink to this headline">¶</a></h3>
<p>Copy data from a backing file into a block device.</p>
<p>The block streaming operation is performed in the background until the entire
backing file has been copied.  This command returns immediately once streaming
has started.  The status of ongoing block streaming operations can be checked
with query-block-jobs.  The operation can be stopped before it has completed
using the block-job-cancel command.</p>
<p>The node that receives the data is called the top image, can be located in
any part of the chain (but always above the base image; see below) and can be
specified using its device or node name. Earlier qemu versions only allowed
‘device’ to name the top level node; presence of the ‘base-node’ parameter
during introspection can be used as a witness of the enhanced semantics
of ‘device’.</p>
<p>If a base file is specified then sectors are not copied from that base file and
its backing chain.  This can be used to stream a subset of the backing file
chain instead of flattening the entire image.
When streaming completes the image file will have the base file as its backing
file, unless that node was changed while the job was running.  In that case,
base’s parent’s backing (or filtered, whichever exists) child (i.e., base at
the beginning of the job) will be the new backing file.</p>
<p>On successful completion the image file is updated to drop the backing file
and the BLOCK_JOB_COMPLETED event is emitted.</p>
<p>In case <code class="docutils literal notranslate"><span class="pre">device</span></code> is a filter node, block-stream modifies the first non-filter
overlay node below it to point to the new backing node instead of modifying
<code class="docutils literal notranslate"><span class="pre">device</span></code> itself.</p>
<div class="section" id="qapidoc-394">
<h4>Arguments<a class="headerlink" href="#qapidoc-394" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">job-id</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code> (optional)</dt>
<dd>identifier for the newly-created block job. If
omitted, the device name will be used. (Since 2.7)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">device</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code></dt>
<dd>the device or node name of the top image</dd>
<dt><code class="docutils literal notranslate"><span class="pre">base</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code> (optional)</dt>
<dd>the common backing file name.
It cannot be set if <code class="docutils literal notranslate"><span class="pre">base-node</span></code> is also set.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">base-node</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code> (optional)</dt>
<dd>the node name of the backing file.
It cannot be set if <code class="docutils literal notranslate"><span class="pre">base</span></code> is also set. (Since 2.8)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">backing-file</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code> (optional)</dt>
<dd><p class="first">The backing file string to write into the top
image. This filename is not validated.</p>
<p>If a pathname string is such that it cannot be
resolved by QEMU, that means that subsequent QMP or
HMP commands must use node-names for the image in
question, as filename lookup methods will fail.</p>
<p class="last">If not specified, QEMU will automatically determine
the backing file string to use, or error out if there
is no obvious choice.  Care should be taken when
specifying the string, to specify a valid filename or
protocol.
(Since 2.1)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">speed</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code> (optional)</dt>
<dd>the maximum speed, in bytes per second</dd>
<dt><code class="docutils literal notranslate"><span class="pre">on-error</span></code>: <code class="docutils literal notranslate"><span class="pre">BlockdevOnError</span></code> (optional)</dt>
<dd>the action to take on an error (default report).
‘stop’ and ‘enospc’ can only be used if the block device
supports io-status (see BlockInfo).  Since 1.3.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">auto-finalize</span></code>: <code class="docutils literal notranslate"><span class="pre">boolean</span></code> (optional)</dt>
<dd>When false, this job will wait in a PENDING state after it has
finished its work, waiting for <code class="docutils literal notranslate"><span class="pre">block-job-finalize</span></code> before
making any block graph changes.
When true, this job will automatically
perform its abort or commit actions.
Defaults to true. (Since 3.1)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">auto-dismiss</span></code>: <code class="docutils literal notranslate"><span class="pre">boolean</span></code> (optional)</dt>
<dd>When false, this job will wait in a CONCLUDED state after it
has completely ceased all work, and awaits <code class="docutils literal notranslate"><span class="pre">block-job-dismiss</span></code>.
When true, this job will automatically disappear from the query
list without user intervention.
Defaults to true. (Since 3.1)</dd>
</dl>
</div>
<div class="section" id="qapidoc-395">
<h4>Returns<a class="headerlink" href="#qapidoc-395" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>Nothing on success.</li>
<li>If <code class="docutils literal notranslate"><span class="pre">device</span></code> does not exist, DeviceNotFound.</li>
</ul>
</div>
<div class="section" id="qapidoc-396">
<h4>Since<a class="headerlink" href="#qapidoc-396" title="Permalink to this headline">¶</a></h4>
<p>1.1</p>
</div>
<div class="section" id="qapidoc-397">
<h4>Example<a class="headerlink" href="#qapidoc-397" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-&gt;</span> <span class="p">{</span> <span class="s2">&quot;execute&quot;</span><span class="p">:</span> <span class="s2">&quot;block-stream&quot;</span><span class="p">,</span>
     <span class="s2">&quot;arguments&quot;</span><span class="p">:</span> <span class="p">{</span> <span class="s2">&quot;device&quot;</span><span class="p">:</span> <span class="s2">&quot;virtio0&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;base&quot;</span><span class="p">:</span> <span class="s2">&quot;/tmp/master.qcow2&quot;</span> <span class="p">}</span> <span class="p">}</span>
<span class="o">&lt;-</span> <span class="p">{</span> <span class="s2">&quot;return&quot;</span><span class="p">:</span> <span class="p">{}</span> <span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="qapidoc-402">
<h3><code class="docutils literal notranslate"><span class="pre">block-job-set-speed</span></code> (Command)<a class="headerlink" href="#qapidoc-402" title="Permalink to this headline">¶</a></h3>
<p>Set maximum speed for a background block operation.</p>
<p>This command can only be issued when there is an active block job.</p>
<p>Throttling can be disabled by setting the speed to 0.</p>
<div class="section" id="qapidoc-399">
<h4>Arguments<a class="headerlink" href="#qapidoc-399" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">device</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code></dt>
<dd>The job identifier. This used to be a device name (hence
the name of the parameter), but since QEMU 2.7 it can have
other values.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">speed</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code></dt>
<dd>the maximum speed, in bytes per second, or 0 for unlimited.
Defaults to 0.</dd>
</dl>
</div>
<div class="section" id="qapidoc-400">
<h4>Returns<a class="headerlink" href="#qapidoc-400" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>Nothing on success</li>
<li>If no background operation is active on this device, DeviceNotActive</li>
</ul>
</div>
<div class="section" id="qapidoc-401">
<h4>Since<a class="headerlink" href="#qapidoc-401" title="Permalink to this headline">¶</a></h4>
<p>1.1</p>
</div>
</div>
<div class="section" id="qapidoc-406">
<h3><code class="docutils literal notranslate"><span class="pre">block-job-cancel</span></code> (Command)<a class="headerlink" href="#qapidoc-406" title="Permalink to this headline">¶</a></h3>
<p>Stop an active background block operation.</p>
<p>This command returns immediately after marking the active background block
operation for cancellation.  It is an error to call this command if no
operation is in progress.</p>
<p>The operation will cancel as soon as possible and then emit the
BLOCK_JOB_CANCELLED event.  Before that happens the job is still visible when
enumerated using query-block-jobs.</p>
<p>Note that if you issue ‘block-job-cancel’ after ‘drive-mirror’ has indicated
(via the event BLOCK_JOB_READY) that the source and destination are
synchronized, then the event triggered by this command changes to
BLOCK_JOB_COMPLETED, to indicate that the mirroring has ended and the
destination now has a point-in-time copy tied to the time of the cancellation.</p>
<p>For streaming, the image file retains its backing file unless the streaming
operation happens to complete just as it is being cancelled.  A new streaming
operation can be started at a later time to finish copying all data from the
backing file.</p>
<div class="section" id="qapidoc-403">
<h4>Arguments<a class="headerlink" href="#qapidoc-403" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">device</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code></dt>
<dd>The job identifier. This used to be a device name (hence
the name of the parameter), but since QEMU 2.7 it can have
other values.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">force</span></code>: <code class="docutils literal notranslate"><span class="pre">boolean</span></code> (optional)</dt>
<dd>If true, and the job has already emitted the event BLOCK_JOB_READY,
abandon the job immediately (even if it is paused) instead of waiting
for the destination to complete its final synchronization (since 1.3)</dd>
</dl>
</div>
<div class="section" id="qapidoc-404">
<h4>Returns<a class="headerlink" href="#qapidoc-404" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>Nothing on success</li>
<li>If no background operation is active on this device, DeviceNotActive</li>
</ul>
</div>
<div class="section" id="qapidoc-405">
<h4>Since<a class="headerlink" href="#qapidoc-405" title="Permalink to this headline">¶</a></h4>
<p>1.1</p>
</div>
</div>
<div class="section" id="qapidoc-410">
<h3><code class="docutils literal notranslate"><span class="pre">block-job-pause</span></code> (Command)<a class="headerlink" href="#qapidoc-410" title="Permalink to this headline">¶</a></h3>
<p>Pause an active background block operation.</p>
<p>This command returns immediately after marking the active background block
operation for pausing.  It is an error to call this command if no
operation is in progress or if the job is already paused.</p>
<p>The operation will pause as soon as possible.  No event is emitted when
the operation is actually paused.  Cancelling a paused job automatically
resumes it.</p>
<div class="section" id="qapidoc-407">
<h4>Arguments<a class="headerlink" href="#qapidoc-407" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">device</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code></dt>
<dd>The job identifier. This used to be a device name (hence
the name of the parameter), but since QEMU 2.7 it can have
other values.</dd>
</dl>
</div>
<div class="section" id="qapidoc-408">
<h4>Returns<a class="headerlink" href="#qapidoc-408" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>Nothing on success</li>
<li>If no background operation is active on this device, DeviceNotActive</li>
</ul>
</div>
<div class="section" id="qapidoc-409">
<h4>Since<a class="headerlink" href="#qapidoc-409" title="Permalink to this headline">¶</a></h4>
<p>1.3</p>
</div>
</div>
<div class="section" id="qapidoc-414">
<h3><code class="docutils literal notranslate"><span class="pre">block-job-resume</span></code> (Command)<a class="headerlink" href="#qapidoc-414" title="Permalink to this headline">¶</a></h3>
<p>Resume an active background block operation.</p>
<p>This command returns immediately after resuming a paused background block
operation.  It is an error to call this command if no operation is in
progress or if the job is not paused.</p>
<p>This command also clears the error status of the job.</p>
<div class="section" id="qapidoc-411">
<h4>Arguments<a class="headerlink" href="#qapidoc-411" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">device</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code></dt>
<dd>The job identifier. This used to be a device name (hence
the name of the parameter), but since QEMU 2.7 it can have
other values.</dd>
</dl>
</div>
<div class="section" id="qapidoc-412">
<h4>Returns<a class="headerlink" href="#qapidoc-412" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>Nothing on success</li>
<li>If no background operation is active on this device, DeviceNotActive</li>
</ul>
</div>
<div class="section" id="qapidoc-413">
<h4>Since<a class="headerlink" href="#qapidoc-413" title="Permalink to this headline">¶</a></h4>
<p>1.3</p>
</div>
</div>
<div class="section" id="qapidoc-418">
<h3><code class="docutils literal notranslate"><span class="pre">block-job-complete</span></code> (Command)<a class="headerlink" href="#qapidoc-418" title="Permalink to this headline">¶</a></h3>
<p>Manually trigger completion of an active background block operation.  This
is supported for drive mirroring, where it also switches the device to
write to the target path only.  The ability to complete is signaled with
a BLOCK_JOB_READY event.</p>
<p>This command completes an active background block operation synchronously.
The ordering of this command’s return with the BLOCK_JOB_COMPLETED event
is not defined.  Note that if an I/O error occurs during the processing of
this command: 1) the command itself will fail; 2) the error will be processed
according to the rerror/werror arguments that were specified when starting
the operation.</p>
<p>A cancelled or paused job cannot be completed.</p>
<div class="section" id="qapidoc-415">
<h4>Arguments<a class="headerlink" href="#qapidoc-415" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">device</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code></dt>
<dd>The job identifier. This used to be a device name (hence
the name of the parameter), but since QEMU 2.7 it can have
other values.</dd>
</dl>
</div>
<div class="section" id="qapidoc-416">
<h4>Returns<a class="headerlink" href="#qapidoc-416" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>Nothing on success</li>
<li>If no background operation is active on this device, DeviceNotActive</li>
</ul>
</div>
<div class="section" id="qapidoc-417">
<h4>Since<a class="headerlink" href="#qapidoc-417" title="Permalink to this headline">¶</a></h4>
<p>1.3</p>
</div>
</div>
<div class="section" id="qapidoc-422">
<h3><code class="docutils literal notranslate"><span class="pre">block-job-dismiss</span></code> (Command)<a class="headerlink" href="#qapidoc-422" title="Permalink to this headline">¶</a></h3>
<p>For jobs that have already concluded, remove them from the block-job-query
list. This command only needs to be run for jobs which were started with
QEMU 2.12+ job lifetime management semantics.</p>
<p>This command will refuse to operate on any job that has not yet reached
its terminal state, JOB_STATUS_CONCLUDED. For jobs that make use of the
BLOCK_JOB_READY event, block-job-cancel or block-job-complete will still need
to be used as appropriate.</p>
<div class="section" id="qapidoc-419">
<h4>Arguments<a class="headerlink" href="#qapidoc-419" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">id</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code></dt>
<dd>The job identifier.</dd>
</dl>
</div>
<div class="section" id="qapidoc-420">
<h4>Returns<a class="headerlink" href="#qapidoc-420" title="Permalink to this headline">¶</a></h4>
<p>Nothing on success</p>
</div>
<div class="section" id="qapidoc-421">
<h4>Since<a class="headerlink" href="#qapidoc-421" title="Permalink to this headline">¶</a></h4>
<p>2.12</p>
</div>
</div>
<div class="section" id="qapidoc-426">
<h3><code class="docutils literal notranslate"><span class="pre">block-job-finalize</span></code> (Command)<a class="headerlink" href="#qapidoc-426" title="Permalink to this headline">¶</a></h3>
<p>Once a job that has manual=true reaches the pending state, it can be
instructed to finalize any graph changes and do any necessary cleanup
via this command.
For jobs in a transaction, instructing one job to finalize will force
ALL jobs in the transaction to finalize, so it is only necessary to instruct
a single member job to finalize.</p>
<div class="section" id="qapidoc-423">
<h4>Arguments<a class="headerlink" href="#qapidoc-423" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">id</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code></dt>
<dd>The job identifier.</dd>
</dl>
</div>
<div class="section" id="qapidoc-424">
<h4>Returns<a class="headerlink" href="#qapidoc-424" title="Permalink to this headline">¶</a></h4>
<p>Nothing on success</p>
</div>
<div class="section" id="qapidoc-425">
<h4>Since<a class="headerlink" href="#qapidoc-425" title="Permalink to this headline">¶</a></h4>
<p>2.12</p>
</div>
</div>
<div class="section" id="qapidoc-429">
<h3><code class="docutils literal notranslate"><span class="pre">BlockdevDiscardOptions</span></code> (Enum)<a class="headerlink" href="#qapidoc-429" title="Permalink to this headline">¶</a></h3>
<p>Determines how to handle discard requests.</p>
<div class="section" id="qapidoc-427">
<h4>Values<a class="headerlink" href="#qapidoc-427" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">ignore</span></code></dt>
<dd>Ignore the request</dd>
<dt><code class="docutils literal notranslate"><span class="pre">unmap</span></code></dt>
<dd>Forward as an unmap request</dd>
</dl>
</div>
<div class="section" id="qapidoc-428">
<h4>Since<a class="headerlink" href="#qapidoc-428" title="Permalink to this headline">¶</a></h4>
<p>2.9</p>
</div>
</div>
<div class="section" id="qapidoc-432">
<h3><code class="docutils literal notranslate"><span class="pre">BlockdevDetectZeroesOptions</span></code> (Enum)<a class="headerlink" href="#qapidoc-432" title="Permalink to this headline">¶</a></h3>
<p>Describes the operation mode for the automatic conversion of plain
zero writes by the OS to driver specific optimized zero write commands.</p>
<div class="section" id="qapidoc-430">
<h4>Values<a class="headerlink" href="#qapidoc-430" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">off</span></code></dt>
<dd>Disabled (default)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">on</span></code></dt>
<dd>Enabled</dd>
<dt><code class="docutils literal notranslate"><span class="pre">unmap</span></code></dt>
<dd>Enabled and even try to unmap blocks if possible. This requires
also that <code class="docutils literal notranslate"><span class="pre">BlockdevDiscardOptions</span></code> is set to unmap for this device.</dd>
</dl>
</div>
<div class="section" id="qapidoc-431">
<h4>Since<a class="headerlink" href="#qapidoc-431" title="Permalink to this headline">¶</a></h4>
<p>2.1</p>
</div>
</div>
<div class="section" id="qapidoc-435">
<h3><code class="docutils literal notranslate"><span class="pre">BlockdevAioOptions</span></code> (Enum)<a class="headerlink" href="#qapidoc-435" title="Permalink to this headline">¶</a></h3>
<p>Selects the AIO backend to handle I/O requests</p>
<div class="section" id="qapidoc-433">
<h4>Values<a class="headerlink" href="#qapidoc-433" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">threads</span></code></dt>
<dd>Use qemu’s thread pool</dd>
<dt><code class="docutils literal notranslate"><span class="pre">native</span></code></dt>
<dd>Use native AIO backend (only Linux and Windows)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">io_uring</span></code> (<strong>If: </strong><code class="docutils literal notranslate"><span class="pre">defined(CONFIG_LINUX_IO_URING)</span></code>)</dt>
<dd>Use linux io_uring (since 5.0)</dd>
</dl>
</div>
<div class="section" id="qapidoc-434">
<h4>Since<a class="headerlink" href="#qapidoc-434" title="Permalink to this headline">¶</a></h4>
<p>2.9</p>
</div>
</div>
<div class="section" id="qapidoc-438">
<h3><code class="docutils literal notranslate"><span class="pre">BlockdevCacheOptions</span></code> (Object)<a class="headerlink" href="#qapidoc-438" title="Permalink to this headline">¶</a></h3>
<p>Includes cache-related options for block devices</p>
<div class="section" id="qapidoc-436">
<h4>Members<a class="headerlink" href="#qapidoc-436" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">direct</span></code>: <code class="docutils literal notranslate"><span class="pre">boolean</span></code> (optional)</dt>
<dd>enables use of O_DIRECT (bypass the host page cache;
default: false)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">no-flush</span></code>: <code class="docutils literal notranslate"><span class="pre">boolean</span></code> (optional)</dt>
<dd>ignore any flush requests for the device (default:
false)</dd>
</dl>
</div>
<div class="section" id="qapidoc-437">
<h4>Since<a class="headerlink" href="#qapidoc-437" title="Permalink to this headline">¶</a></h4>
<p>2.9</p>
</div>
</div>
<div class="section" id="qapidoc-441">
<h3><code class="docutils literal notranslate"><span class="pre">BlockdevDriver</span></code> (Enum)<a class="headerlink" href="#qapidoc-441" title="Permalink to this headline">¶</a></h3>
<p>Drivers that are supported in block device operations.</p>
<div class="section" id="qapidoc-439">
<h4>Values<a class="headerlink" href="#qapidoc-439" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">throttle</span></code></dt>
<dd>Since 2.11</dd>
<dt><code class="docutils literal notranslate"><span class="pre">nvme</span></code></dt>
<dd>Since 2.12</dd>
<dt><code class="docutils literal notranslate"><span class="pre">copy-on-read</span></code></dt>
<dd>Since 3.0</dd>
<dt><code class="docutils literal notranslate"><span class="pre">blklogwrites</span></code></dt>
<dd>Since 3.0</dd>
<dt><code class="docutils literal notranslate"><span class="pre">blkreplay</span></code></dt>
<dd>Since 4.2</dd>
<dt><code class="docutils literal notranslate"><span class="pre">compress</span></code></dt>
<dd>Since 5.0</dd>
<dt><code class="docutils literal notranslate"><span class="pre">blkdebug</span></code></dt>
<dd>Not documented</dd>
<dt><code class="docutils literal notranslate"><span class="pre">blkverify</span></code></dt>
<dd>Not documented</dd>
<dt><code class="docutils literal notranslate"><span class="pre">bochs</span></code></dt>
<dd>Not documented</dd>
<dt><code class="docutils literal notranslate"><span class="pre">cloop</span></code></dt>
<dd>Not documented</dd>
<dt><code class="docutils literal notranslate"><span class="pre">dmg</span></code></dt>
<dd>Not documented</dd>
<dt><code class="docutils literal notranslate"><span class="pre">file</span></code></dt>
<dd>Not documented</dd>
<dt><code class="docutils literal notranslate"><span class="pre">ftp</span></code></dt>
<dd>Not documented</dd>
<dt><code class="docutils literal notranslate"><span class="pre">ftps</span></code></dt>
<dd>Not documented</dd>
<dt><code class="docutils literal notranslate"><span class="pre">gluster</span></code></dt>
<dd>Not documented</dd>
<dt><code class="docutils literal notranslate"><span class="pre">host_cdrom</span></code></dt>
<dd>Not documented</dd>
<dt><code class="docutils literal notranslate"><span class="pre">host_device</span></code></dt>
<dd>Not documented</dd>
<dt><code class="docutils literal notranslate"><span class="pre">http</span></code></dt>
<dd>Not documented</dd>
<dt><code class="docutils literal notranslate"><span class="pre">https</span></code></dt>
<dd>Not documented</dd>
<dt><code class="docutils literal notranslate"><span class="pre">iscsi</span></code></dt>
<dd>Not documented</dd>
<dt><code class="docutils literal notranslate"><span class="pre">luks</span></code></dt>
<dd>Not documented</dd>
<dt><code class="docutils literal notranslate"><span class="pre">nbd</span></code></dt>
<dd>Not documented</dd>
<dt><code class="docutils literal notranslate"><span class="pre">nfs</span></code></dt>
<dd>Not documented</dd>
<dt><code class="docutils literal notranslate"><span class="pre">null-aio</span></code></dt>
<dd>Not documented</dd>
<dt><code class="docutils literal notranslate"><span class="pre">null-co</span></code></dt>
<dd>Not documented</dd>
<dt><code class="docutils literal notranslate"><span class="pre">parallels</span></code></dt>
<dd>Not documented</dd>
<dt><code class="docutils literal notranslate"><span class="pre">preallocate</span></code></dt>
<dd>Not documented</dd>
<dt><code class="docutils literal notranslate"><span class="pre">qcow</span></code></dt>
<dd>Not documented</dd>
<dt><code class="docutils literal notranslate"><span class="pre">qcow2</span></code></dt>
<dd>Not documented</dd>
<dt><code class="docutils literal notranslate"><span class="pre">qed</span></code></dt>
<dd>Not documented</dd>
<dt><code class="docutils literal notranslate"><span class="pre">quorum</span></code></dt>
<dd>Not documented</dd>
<dt><code class="docutils literal notranslate"><span class="pre">raw</span></code></dt>
<dd>Not documented</dd>
<dt><code class="docutils literal notranslate"><span class="pre">rbd</span></code></dt>
<dd>Not documented</dd>
<dt><code class="docutils literal notranslate"><span class="pre">replication</span></code> (<strong>If: </strong><code class="docutils literal notranslate"><span class="pre">defined(CONFIG_REPLICATION)</span></code>)</dt>
<dd>Not documented</dd>
<dt><code class="docutils literal notranslate"><span class="pre">sheepdog</span></code></dt>
<dd>Not documented</dd>
<dt><code class="docutils literal notranslate"><span class="pre">ssh</span></code></dt>
<dd>Not documented</dd>
<dt><code class="docutils literal notranslate"><span class="pre">vdi</span></code></dt>
<dd>Not documented</dd>
<dt><code class="docutils literal notranslate"><span class="pre">vhdx</span></code></dt>
<dd>Not documented</dd>
<dt><code class="docutils literal notranslate"><span class="pre">vmdk</span></code></dt>
<dd>Not documented</dd>
<dt><code class="docutils literal notranslate"><span class="pre">vpc</span></code></dt>
<dd>Not documented</dd>
<dt><code class="docutils literal notranslate"><span class="pre">vvfat</span></code></dt>
<dd>Not documented</dd>
</dl>
</div>
<div class="section" id="qapidoc-440">
<h4>Since<a class="headerlink" href="#qapidoc-440" title="Permalink to this headline">¶</a></h4>
<p>2.9</p>
</div>
</div>
<div class="section" id="qapidoc-445">
<h3><code class="docutils literal notranslate"><span class="pre">BlockdevOptionsFile</span></code> (Object)<a class="headerlink" href="#qapidoc-445" title="Permalink to this headline">¶</a></h3>
<p>Driver specific block device options for the file backend.</p>
<div class="section" id="qapidoc-442">
<h4>Members<a class="headerlink" href="#qapidoc-442" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">filename</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code></dt>
<dd>path to the image file</dd>
<dt><code class="docutils literal notranslate"><span class="pre">pr-manager</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code> (optional)</dt>
<dd>the id for the object that will handle persistent reservations
for this device (default: none, forward the commands via SG_IO;
since 2.11)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">aio</span></code>: <code class="docutils literal notranslate"><span class="pre">BlockdevAioOptions</span></code> (optional)</dt>
<dd>AIO backend (default: threads) (since: 2.8)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">locking</span></code>: <code class="docutils literal notranslate"><span class="pre">OnOffAuto</span></code> (optional)</dt>
<dd>whether to enable file locking. If set to ‘auto’, only enable
when Open File Descriptor (OFD) locking API is available
(default: auto, since 2.10)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">drop-cache</span></code>: <code class="docutils literal notranslate"><span class="pre">boolean</span></code> (optional) (<strong>If: </strong><code class="docutils literal notranslate"><span class="pre">defined(CONFIG_LINUX)</span></code>)</dt>
<dd>invalidate page cache during live migration.  This prevents
stale data on the migration destination with cache.direct=off.
Currently only supported on Linux hosts.
(default: on, since: 4.0)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">x-check-cache-dropped</span></code>: <code class="docutils literal notranslate"><span class="pre">boolean</span></code> (optional)</dt>
<dd>whether to check that page cache was dropped on live
migration.  May cause noticeable delays if the image
file is large, do not use in production.
(default: off) (since: 3.0)</dd>
</dl>
</div>
<div class="section" id="qapidoc-443">
<h4>Features<a class="headerlink" href="#qapidoc-443" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">dynamic-auto-read-only</span></code></dt>
<dd>If present, enabled auto-read-only means that the
driver will open the image read-only at first,
dynamically reopen the image file read-write when
the first writer is attached to the node and reopen
read-only when the last writer is detached. This
allows giving QEMU write permissions only on demand
when an operation actually needs write access.</dd>
</dl>
</div>
<div class="section" id="qapidoc-444">
<h4>Since<a class="headerlink" href="#qapidoc-444" title="Permalink to this headline">¶</a></h4>
<p>2.9</p>
</div>
</div>
<div class="section" id="qapidoc-448">
<h3><code class="docutils literal notranslate"><span class="pre">BlockdevOptionsNull</span></code> (Object)<a class="headerlink" href="#qapidoc-448" title="Permalink to this headline">¶</a></h3>
<p>Driver specific block device options for the null backend.</p>
<div class="section" id="qapidoc-446">
<h4>Members<a class="headerlink" href="#qapidoc-446" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">size</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code> (optional)</dt>
<dd>size of the device in bytes.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">latency-ns</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code> (optional)</dt>
<dd>emulated latency (in nanoseconds) in processing
requests. Default to zero which completes requests immediately.
(Since 2.4)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">read-zeroes</span></code>: <code class="docutils literal notranslate"><span class="pre">boolean</span></code> (optional)</dt>
<dd>if true, reads from the device produce zeroes; if false, the
buffer is left unchanged. (default: false; since: 4.1)</dd>
</dl>
</div>
<div class="section" id="qapidoc-447">
<h4>Since<a class="headerlink" href="#qapidoc-447" title="Permalink to this headline">¶</a></h4>
<p>2.9</p>
</div>
</div>
<div class="section" id="qapidoc-452">
<h3><code class="docutils literal notranslate"><span class="pre">BlockdevOptionsNVMe</span></code> (Object)<a class="headerlink" href="#qapidoc-452" title="Permalink to this headline">¶</a></h3>
<p>Driver specific block device options for the NVMe backend.</p>
<div class="section" id="qapidoc-449">
<h4>Members<a class="headerlink" href="#qapidoc-449" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">device</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code></dt>
<dd>PCI controller address of the NVMe device in
format hhhh:bb:ss.f (host:bus:slot.function)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">namespace</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code></dt>
<dd>namespace number of the device, starting from 1.</dd>
</dl>
</div>
<div class="section" id="qapidoc-450">
Note that the PCI <code class="docutils literal notranslate"><span class="pre">device</span></code> must have been unbound from any host
kernel driver before instructing QEMU to add the blockdev.</div>
<div class="section" id="qapidoc-451">
<h4>Since<a class="headerlink" href="#qapidoc-451" title="Permalink to this headline">¶</a></h4>
<p>2.12</p>
</div>
</div>
<div class="section" id="qapidoc-455">
<h3><code class="docutils literal notranslate"><span class="pre">BlockdevOptionsVVFAT</span></code> (Object)<a class="headerlink" href="#qapidoc-455" title="Permalink to this headline">¶</a></h3>
<p>Driver specific block device options for the vvfat protocol.</p>
<div class="section" id="qapidoc-453">
<h4>Members<a class="headerlink" href="#qapidoc-453" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">dir</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code></dt>
<dd>directory to be exported as FAT image</dd>
<dt><code class="docutils literal notranslate"><span class="pre">fat-type</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code> (optional)</dt>
<dd>FAT type: 12, 16 or 32</dd>
<dt><code class="docutils literal notranslate"><span class="pre">floppy</span></code>: <code class="docutils literal notranslate"><span class="pre">boolean</span></code> (optional)</dt>
<dd>whether to export a floppy image (true) or
partitioned hard disk (false; default)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">label</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code> (optional)</dt>
<dd>set the volume label, limited to 11 bytes. FAT16 and
FAT32 traditionally have some restrictions on labels, which are
ignored by most operating systems. Defaults to “QEMU VVFAT”.
(since 2.4)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">rw</span></code>: <code class="docutils literal notranslate"><span class="pre">boolean</span></code> (optional)</dt>
<dd>whether to allow write operations (default: false)</dd>
</dl>
</div>
<div class="section" id="qapidoc-454">
<h4>Since<a class="headerlink" href="#qapidoc-454" title="Permalink to this headline">¶</a></h4>
<p>2.9</p>
</div>
</div>
<div class="section" id="qapidoc-458">
<h3><code class="docutils literal notranslate"><span class="pre">BlockdevOptionsGenericFormat</span></code> (Object)<a class="headerlink" href="#qapidoc-458" title="Permalink to this headline">¶</a></h3>
<p>Driver specific block device options for image format that have no option
besides their data source.</p>
<div class="section" id="qapidoc-456">
<h4>Members<a class="headerlink" href="#qapidoc-456" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">file</span></code>: <code class="docutils literal notranslate"><span class="pre">BlockdevRef</span></code></dt>
<dd>reference to or definition of the data source block device</dd>
</dl>
</div>
<div class="section" id="qapidoc-457">
<h4>Since<a class="headerlink" href="#qapidoc-457" title="Permalink to this headline">¶</a></h4>
<p>2.9</p>
</div>
</div>
<div class="section" id="qapidoc-461">
<h3><code class="docutils literal notranslate"><span class="pre">BlockdevOptionsLUKS</span></code> (Object)<a class="headerlink" href="#qapidoc-461" title="Permalink to this headline">¶</a></h3>
<p>Driver specific block device options for LUKS.</p>
<div class="section" id="qapidoc-459">
<h4>Members<a class="headerlink" href="#qapidoc-459" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">key-secret</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code> (optional)</dt>
<dd>the ID of a QCryptoSecret object providing
the decryption key (since 2.6). Mandatory except when
doing a metadata-only probe of the image.</dd>
<dt>The members of <code class="docutils literal notranslate"><span class="pre">BlockdevOptionsGenericFormat</span></code></dl>
</div>
<div class="section" id="qapidoc-460">
<h4>Since<a class="headerlink" href="#qapidoc-460" title="Permalink to this headline">¶</a></h4>
<p>2.9</p>
</div>
</div>
<div class="section" id="qapidoc-464">
<h3><code class="docutils literal notranslate"><span class="pre">BlockdevOptionsGenericCOWFormat</span></code> (Object)<a class="headerlink" href="#qapidoc-464" title="Permalink to this headline">¶</a></h3>
<p>Driver specific block device options for image format that have no option
besides their data source and an optional backing file.</p>
<div class="section" id="qapidoc-462">
<h4>Members<a class="headerlink" href="#qapidoc-462" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">backing</span></code>: <code class="docutils literal notranslate"><span class="pre">BlockdevRefOrNull</span></code> (optional)</dt>
<dd>reference to or definition of the backing file block
device, null disables the backing file entirely.
Defaults to the backing file stored the image file.</dd>
<dt>The members of <code class="docutils literal notranslate"><span class="pre">BlockdevOptionsGenericFormat</span></code></dl>
</div>
<div class="section" id="qapidoc-463">
<h4>Since<a class="headerlink" href="#qapidoc-463" title="Permalink to this headline">¶</a></h4>
<p>2.9</p>
</div>
</div>
<div class="section" id="qapidoc-467">
<h3><code class="docutils literal notranslate"><span class="pre">Qcow2OverlapCheckMode</span></code> (Enum)<a class="headerlink" href="#qapidoc-467" title="Permalink to this headline">¶</a></h3>
<p>General overlap check modes.</p>
<div class="section" id="qapidoc-465">
<h4>Values<a class="headerlink" href="#qapidoc-465" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">none</span></code></dt>
<dd>Do not perform any checks</dd>
<dt><code class="docutils literal notranslate"><span class="pre">constant</span></code></dt>
<dd>Perform only checks which can be done in constant time and
without reading anything from disk</dd>
<dt><code class="docutils literal notranslate"><span class="pre">cached</span></code></dt>
<dd>Perform only checks which can be done without reading anything
from disk</dd>
<dt><code class="docutils literal notranslate"><span class="pre">all</span></code></dt>
<dd>Perform all available overlap checks</dd>
</dl>
</div>
<div class="section" id="qapidoc-466">
<h4>Since<a class="headerlink" href="#qapidoc-466" title="Permalink to this headline">¶</a></h4>
<p>2.9</p>
</div>
</div>
<div class="section" id="qapidoc-470">
<h3><code class="docutils literal notranslate"><span class="pre">Qcow2OverlapCheckFlags</span></code> (Object)<a class="headerlink" href="#qapidoc-470" title="Permalink to this headline">¶</a></h3>
<p>Structure of flags for each metadata structure. Setting a field to ‘true’
makes qemu guard that structure against unintended overwriting. The default
value is chosen according to the template given.</p>
<div class="section" id="qapidoc-468">
<h4>Members<a class="headerlink" href="#qapidoc-468" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">template</span></code>: <code class="docutils literal notranslate"><span class="pre">Qcow2OverlapCheckMode</span></code> (optional)</dt>
<dd>Specifies a template mode which can be adjusted using the other
flags, defaults to ‘cached’</dd>
<dt><code class="docutils literal notranslate"><span class="pre">bitmap-directory</span></code>: <code class="docutils literal notranslate"><span class="pre">boolean</span></code> (optional)</dt>
<dd>since 3.0</dd>
<dt><code class="docutils literal notranslate"><span class="pre">main-header</span></code>: <code class="docutils literal notranslate"><span class="pre">boolean</span></code> (optional)</dt>
<dd>Not documented</dd>
<dt><code class="docutils literal notranslate"><span class="pre">active-l1</span></code>: <code class="docutils literal notranslate"><span class="pre">boolean</span></code> (optional)</dt>
<dd>Not documented</dd>
<dt><code class="docutils literal notranslate"><span class="pre">active-l2</span></code>: <code class="docutils literal notranslate"><span class="pre">boolean</span></code> (optional)</dt>
<dd>Not documented</dd>
<dt><code class="docutils literal notranslate"><span class="pre">refcount-table</span></code>: <code class="docutils literal notranslate"><span class="pre">boolean</span></code> (optional)</dt>
<dd>Not documented</dd>
<dt><code class="docutils literal notranslate"><span class="pre">refcount-block</span></code>: <code class="docutils literal notranslate"><span class="pre">boolean</span></code> (optional)</dt>
<dd>Not documented</dd>
<dt><code class="docutils literal notranslate"><span class="pre">snapshot-table</span></code>: <code class="docutils literal notranslate"><span class="pre">boolean</span></code> (optional)</dt>
<dd>Not documented</dd>
<dt><code class="docutils literal notranslate"><span class="pre">inactive-l1</span></code>: <code class="docutils literal notranslate"><span class="pre">boolean</span></code> (optional)</dt>
<dd>Not documented</dd>
<dt><code class="docutils literal notranslate"><span class="pre">inactive-l2</span></code>: <code class="docutils literal notranslate"><span class="pre">boolean</span></code> (optional)</dt>
<dd>Not documented</dd>
</dl>
</div>
<div class="section" id="qapidoc-469">
<h4>Since<a class="headerlink" href="#qapidoc-469" title="Permalink to this headline">¶</a></h4>
<p>2.9</p>
</div>
</div>
<div class="section" id="qapidoc-473">
<h3><code class="docutils literal notranslate"><span class="pre">Qcow2OverlapChecks</span></code> (Alternate)<a class="headerlink" href="#qapidoc-473" title="Permalink to this headline">¶</a></h3>
<p>Specifies which metadata structures should be guarded against unintended
overwriting.</p>
<div class="section" id="qapidoc-471">
<h4>Members<a class="headerlink" href="#qapidoc-471" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">flags</span></code>: <code class="docutils literal notranslate"><span class="pre">Qcow2OverlapCheckFlags</span></code></dt>
<dd>set of flags for separate specification of each metadata structure
type</dd>
<dt><code class="docutils literal notranslate"><span class="pre">mode</span></code>: <code class="docutils literal notranslate"><span class="pre">Qcow2OverlapCheckMode</span></code></dt>
<dd>named mode which chooses a specific set of flags</dd>
</dl>
</div>
<div class="section" id="qapidoc-472">
<h4>Since<a class="headerlink" href="#qapidoc-472" title="Permalink to this headline">¶</a></h4>
<p>2.9</p>
</div>
</div>
<div class="section" id="qapidoc-476">
<h3><code class="docutils literal notranslate"><span class="pre">BlockdevQcowEncryptionFormat</span></code> (Enum)<a class="headerlink" href="#qapidoc-476" title="Permalink to this headline">¶</a></h3>
<div class="section" id="qapidoc-474">
<h4>Values<a class="headerlink" href="#qapidoc-474" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">aes</span></code></dt>
<dd>AES-CBC with plain64 initialization vectors</dd>
</dl>
</div>
<div class="section" id="qapidoc-475">
<h4>Since<a class="headerlink" href="#qapidoc-475" title="Permalink to this headline">¶</a></h4>
<p>2.10</p>
</div>
</div>
<div class="section" id="qapidoc-479">
<h3><code class="docutils literal notranslate"><span class="pre">BlockdevQcowEncryption</span></code> (Object)<a class="headerlink" href="#qapidoc-479" title="Permalink to this headline">¶</a></h3>
<div class="section" id="qapidoc-477">
<h4>Members<a class="headerlink" href="#qapidoc-477" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">format</span></code>: <code class="docutils literal notranslate"><span class="pre">BlockdevQcowEncryptionFormat</span></code></dt>
<dd>Not documented</dd>
<dt>The members of <code class="docutils literal notranslate"><span class="pre">QCryptoBlockOptionsQCow</span></code> when <code class="docutils literal notranslate"><span class="pre">format</span></code> is <code class="docutils literal notranslate"><span class="pre">&quot;aes&quot;</span></code></dl>
</div>
<div class="section" id="qapidoc-478">
<h4>Since<a class="headerlink" href="#qapidoc-478" title="Permalink to this headline">¶</a></h4>
<p>2.10</p>
</div>
</div>
<div class="section" id="qapidoc-482">
<h3><code class="docutils literal notranslate"><span class="pre">BlockdevOptionsQcow</span></code> (Object)<a class="headerlink" href="#qapidoc-482" title="Permalink to this headline">¶</a></h3>
<p>Driver specific block device options for qcow.</p>
<div class="section" id="qapidoc-480">
<h4>Members<a class="headerlink" href="#qapidoc-480" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">encrypt</span></code>: <code class="docutils literal notranslate"><span class="pre">BlockdevQcowEncryption</span></code> (optional)</dt>
<dd>Image decryption options. Mandatory for
encrypted images, except when doing a metadata-only
probe of the image.</dd>
<dt>The members of <code class="docutils literal notranslate"><span class="pre">BlockdevOptionsGenericCOWFormat</span></code></dl>
</div>
<div class="section" id="qapidoc-481">
<h4>Since<a class="headerlink" href="#qapidoc-481" title="Permalink to this headline">¶</a></h4>
<p>2.10</p>
</div>
</div>
<div class="section" id="qapidoc-485">
<h3><code class="docutils literal notranslate"><span class="pre">BlockdevQcow2EncryptionFormat</span></code> (Enum)<a class="headerlink" href="#qapidoc-485" title="Permalink to this headline">¶</a></h3>
<div class="section" id="qapidoc-483">
<h4>Values<a class="headerlink" href="#qapidoc-483" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">aes</span></code></dt>
<dd>AES-CBC with plain64 initialization vectors</dd>
<dt><code class="docutils literal notranslate"><span class="pre">luks</span></code></dt>
<dd>Not documented</dd>
</dl>
</div>
<div class="section" id="qapidoc-484">
<h4>Since<a class="headerlink" href="#qapidoc-484" title="Permalink to this headline">¶</a></h4>
<p>2.10</p>
</div>
</div>
<div class="section" id="qapidoc-488">
<h3><code class="docutils literal notranslate"><span class="pre">BlockdevQcow2Encryption</span></code> (Object)<a class="headerlink" href="#qapidoc-488" title="Permalink to this headline">¶</a></h3>
<div class="section" id="qapidoc-486">
<h4>Members<a class="headerlink" href="#qapidoc-486" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">format</span></code>: <code class="docutils literal notranslate"><span class="pre">BlockdevQcow2EncryptionFormat</span></code></dt>
<dd>Not documented</dd>
<dt>The members of <code class="docutils literal notranslate"><span class="pre">QCryptoBlockOptionsQCow</span></code> when <code class="docutils literal notranslate"><span class="pre">format</span></code> is <code class="docutils literal notranslate"><span class="pre">&quot;aes&quot;</span></code><dt>The members of <code class="docutils literal notranslate"><span class="pre">QCryptoBlockOptionsLUKS</span></code> when <code class="docutils literal notranslate"><span class="pre">format</span></code> is <code class="docutils literal notranslate"><span class="pre">&quot;luks&quot;</span></code></dl>
</div>
<div class="section" id="qapidoc-487">
<h4>Since<a class="headerlink" href="#qapidoc-487" title="Permalink to this headline">¶</a></h4>
<p>2.10</p>
</div>
</div>
<div class="section" id="qapidoc-491">
<h3><code class="docutils literal notranslate"><span class="pre">BlockdevOptionsPreallocate</span></code> (Object)<a class="headerlink" href="#qapidoc-491" title="Permalink to this headline">¶</a></h3>
<p>Filter driver intended to be inserted between format and protocol node
and do preallocation in protocol node on write.</p>
<div class="section" id="qapidoc-489">
<h4>Members<a class="headerlink" href="#qapidoc-489" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">prealloc-align</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code> (optional)</dt>
<dd>on preallocation, align file length to this number,
default 1048576 (1M)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">prealloc-size</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code> (optional)</dt>
<dd>how much to preallocate, default 134217728 (128M)</dd>
<dt>The members of <code class="docutils literal notranslate"><span class="pre">BlockdevOptionsGenericFormat</span></code></dl>
</div>
<div class="section" id="qapidoc-490">
<h4>Since<a class="headerlink" href="#qapidoc-490" title="Permalink to this headline">¶</a></h4>
<p>6.0</p>
</div>
</div>
<div class="section" id="qapidoc-494">
<h3><code class="docutils literal notranslate"><span class="pre">BlockdevOptionsQcow2</span></code> (Object)<a class="headerlink" href="#qapidoc-494" title="Permalink to this headline">¶</a></h3>
<p>Driver specific block device options for qcow2.</p>
<div class="section" id="qapidoc-492">
<h4>Members<a class="headerlink" href="#qapidoc-492" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">lazy-refcounts</span></code>: <code class="docutils literal notranslate"><span class="pre">boolean</span></code> (optional)</dt>
<dd>whether to enable the lazy refcounts
feature (default is taken from the image file)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">pass-discard-request</span></code>: <code class="docutils literal notranslate"><span class="pre">boolean</span></code> (optional)</dt>
<dd>whether discard requests to the qcow2
device should be forwarded to the data source</dd>
<dt><code class="docutils literal notranslate"><span class="pre">pass-discard-snapshot</span></code>: <code class="docutils literal notranslate"><span class="pre">boolean</span></code> (optional)</dt>
<dd>whether discard requests for the data source
should be issued when a snapshot operation (e.g.
deleting a snapshot) frees clusters in the qcow2 file</dd>
<dt><code class="docutils literal notranslate"><span class="pre">pass-discard-other</span></code>: <code class="docutils literal notranslate"><span class="pre">boolean</span></code> (optional)</dt>
<dd>whether discard requests for the data source
should be issued on other occasions where a cluster
gets freed</dd>
<dt><code class="docutils literal notranslate"><span class="pre">overlap-check</span></code>: <code class="docutils literal notranslate"><span class="pre">Qcow2OverlapChecks</span></code> (optional)</dt>
<dd>which overlap checks to perform for writes
to the image, defaults to ‘cached’ (since 2.2)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">cache-size</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code> (optional)</dt>
<dd>the maximum total size of the L2 table and
refcount block caches in bytes (since 2.2)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">l2-cache-size</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code> (optional)</dt>
<dd>the maximum size of the L2 table cache in
bytes (since 2.2)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">l2-cache-entry-size</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code> (optional)</dt>
<dd>the size of each entry in the L2 cache in
bytes. It must be a power of two between 512
and the cluster size. The default value is
the cluster size (since 2.12)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">refcount-cache-size</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code> (optional)</dt>
<dd>the maximum size of the refcount block cache
in bytes (since 2.2)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">cache-clean-interval</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code> (optional)</dt>
<dd>clean unused entries in the L2 and refcount
caches. The interval is in seconds. The default value
is 600 on supporting platforms, and 0 on other
platforms. 0 disables this feature. (since 2.5)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">encrypt</span></code>: <code class="docutils literal notranslate"><span class="pre">BlockdevQcow2Encryption</span></code> (optional)</dt>
<dd>Image decryption options. Mandatory for
encrypted images, except when doing a metadata-only
probe of the image. (since 2.10)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">data-file</span></code>: <code class="docutils literal notranslate"><span class="pre">BlockdevRef</span></code> (optional)</dt>
<dd>reference to or definition of the external data file.
This may only be specified for images that require an
external data file. If it is not specified for such
an image, the data file name is loaded from the image
file. (since 4.0)</dd>
<dt>The members of <code class="docutils literal notranslate"><span class="pre">BlockdevOptionsGenericCOWFormat</span></code></dl>
</div>
<div class="section" id="qapidoc-493">
<h4>Since<a class="headerlink" href="#qapidoc-493" title="Permalink to this headline">¶</a></h4>
<p>2.9</p>
</div>
</div>
<div class="section" id="qapidoc-497">
<h3><code class="docutils literal notranslate"><span class="pre">SshHostKeyCheckMode</span></code> (Enum)<a class="headerlink" href="#qapidoc-497" title="Permalink to this headline">¶</a></h3>
<div class="section" id="qapidoc-495">
<h4>Values<a class="headerlink" href="#qapidoc-495" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">none</span></code></dt>
<dd>Don’t check the host key at all</dd>
<dt><code class="docutils literal notranslate"><span class="pre">hash</span></code></dt>
<dd>Compare the host key with a given hash</dd>
<dt><code class="docutils literal notranslate"><span class="pre">known_hosts</span></code></dt>
<dd>Check the host key against the known_hosts file</dd>
</dl>
</div>
<div class="section" id="qapidoc-496">
<h4>Since<a class="headerlink" href="#qapidoc-496" title="Permalink to this headline">¶</a></h4>
<p>2.12</p>
</div>
</div>
<div class="section" id="qapidoc-500">
<h3><code class="docutils literal notranslate"><span class="pre">SshHostKeyCheckHashType</span></code> (Enum)<a class="headerlink" href="#qapidoc-500" title="Permalink to this headline">¶</a></h3>
<div class="section" id="qapidoc-498">
<h4>Values<a class="headerlink" href="#qapidoc-498" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">md5</span></code></dt>
<dd>The given hash is an md5 hash</dd>
<dt><code class="docutils literal notranslate"><span class="pre">sha1</span></code></dt>
<dd>The given hash is an sha1 hash</dd>
</dl>
</div>
<div class="section" id="qapidoc-499">
<h4>Since<a class="headerlink" href="#qapidoc-499" title="Permalink to this headline">¶</a></h4>
<p>2.12</p>
</div>
</div>
<div class="section" id="qapidoc-503">
<h3><code class="docutils literal notranslate"><span class="pre">SshHostKeyHash</span></code> (Object)<a class="headerlink" href="#qapidoc-503" title="Permalink to this headline">¶</a></h3>
<div class="section" id="qapidoc-501">
<h4>Members<a class="headerlink" href="#qapidoc-501" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">type</span></code>: <code class="docutils literal notranslate"><span class="pre">SshHostKeyCheckHashType</span></code></dt>
<dd>The hash algorithm used for the hash</dd>
<dt><code class="docutils literal notranslate"><span class="pre">hash</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code></dt>
<dd>The expected hash value</dd>
</dl>
</div>
<div class="section" id="qapidoc-502">
<h4>Since<a class="headerlink" href="#qapidoc-502" title="Permalink to this headline">¶</a></h4>
<p>2.12</p>
</div>
</div>
<div class="section" id="qapidoc-506">
<h3><code class="docutils literal notranslate"><span class="pre">SshHostKeyCheck</span></code> (Object)<a class="headerlink" href="#qapidoc-506" title="Permalink to this headline">¶</a></h3>
<div class="section" id="qapidoc-504">
<h4>Members<a class="headerlink" href="#qapidoc-504" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">mode</span></code>: <code class="docutils literal notranslate"><span class="pre">SshHostKeyCheckMode</span></code></dt>
<dd>Not documented</dd>
<dt>The members of <code class="docutils literal notranslate"><span class="pre">SshHostKeyHash</span></code> when <code class="docutils literal notranslate"><span class="pre">mode</span></code> is <code class="docutils literal notranslate"><span class="pre">&quot;hash&quot;</span></code></dl>
</div>
<div class="section" id="qapidoc-505">
<h4>Since<a class="headerlink" href="#qapidoc-505" title="Permalink to this headline">¶</a></h4>
<p>2.12</p>
</div>
</div>
<div class="section" id="qapidoc-509">
<h3><code class="docutils literal notranslate"><span class="pre">BlockdevOptionsSsh</span></code> (Object)<a class="headerlink" href="#qapidoc-509" title="Permalink to this headline">¶</a></h3>
<div class="section" id="qapidoc-507">
<h4>Members<a class="headerlink" href="#qapidoc-507" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">server</span></code>: <code class="docutils literal notranslate"><span class="pre">InetSocketAddress</span></code></dt>
<dd>host address</dd>
<dt><code class="docutils literal notranslate"><span class="pre">path</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code></dt>
<dd>path to the image on the host</dd>
<dt><code class="docutils literal notranslate"><span class="pre">user</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code> (optional)</dt>
<dd>user as which to connect, defaults to current
local user name</dd>
<dt><code class="docutils literal notranslate"><span class="pre">host-key-check</span></code>: <code class="docutils literal notranslate"><span class="pre">SshHostKeyCheck</span></code> (optional)</dt>
<dd>Defines how and what to check the host key against
(default: known_hosts)</dd>
</dl>
</div>
<div class="section" id="qapidoc-508">
<h4>Since<a class="headerlink" href="#qapidoc-508" title="Permalink to this headline">¶</a></h4>
<p>2.9</p>
</div>
</div>
<div class="section" id="qapidoc-512">
<h3><code class="docutils literal notranslate"><span class="pre">BlkdebugEvent</span></code> (Enum)<a class="headerlink" href="#qapidoc-512" title="Permalink to this headline">¶</a></h3>
<p>Trigger events supported by blkdebug.</p>
<div class="section" id="qapidoc-510">
<h4>Values<a class="headerlink" href="#qapidoc-510" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">l1_shrink_write_table</span></code></dt>
<dd>write zeros to the l1 table to shrink image.
(since 2.11)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">l1_shrink_free_l2_clusters</span></code></dt>
<dd>discard the l2 tables. (since 2.11)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">cor_write</span></code></dt>
<dd>a write due to copy-on-read (since 2.11)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">cluster_alloc_space</span></code></dt>
<dd>an allocation of file space for a cluster (since 4.1)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">none</span></code></dt>
<dd>triggers once at creation of the blkdebug node (since 4.1)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">l1_update</span></code></dt>
<dd>Not documented</dd>
<dt><code class="docutils literal notranslate"><span class="pre">l1_grow_alloc_table</span></code></dt>
<dd>Not documented</dd>
<dt><code class="docutils literal notranslate"><span class="pre">l1_grow_write_table</span></code></dt>
<dd>Not documented</dd>
<dt><code class="docutils literal notranslate"><span class="pre">l1_grow_activate_table</span></code></dt>
<dd>Not documented</dd>
<dt><code class="docutils literal notranslate"><span class="pre">l2_load</span></code></dt>
<dd>Not documented</dd>
<dt><code class="docutils literal notranslate"><span class="pre">l2_update</span></code></dt>
<dd>Not documented</dd>
<dt><code class="docutils literal notranslate"><span class="pre">l2_update_compressed</span></code></dt>
<dd>Not documented</dd>
<dt><code class="docutils literal notranslate"><span class="pre">l2_alloc_cow_read</span></code></dt>
<dd>Not documented</dd>
<dt><code class="docutils literal notranslate"><span class="pre">l2_alloc_write</span></code></dt>
<dd>Not documented</dd>
<dt><code class="docutils literal notranslate"><span class="pre">read_aio</span></code></dt>
<dd>Not documented</dd>
<dt><code class="docutils literal notranslate"><span class="pre">read_backing_aio</span></code></dt>
<dd>Not documented</dd>
<dt><code class="docutils literal notranslate"><span class="pre">read_compressed</span></code></dt>
<dd>Not documented</dd>
<dt><code class="docutils literal notranslate"><span class="pre">write_aio</span></code></dt>
<dd>Not documented</dd>
<dt><code class="docutils literal notranslate"><span class="pre">write_compressed</span></code></dt>
<dd>Not documented</dd>
<dt><code class="docutils literal notranslate"><span class="pre">vmstate_load</span></code></dt>
<dd>Not documented</dd>
<dt><code class="docutils literal notranslate"><span class="pre">vmstate_save</span></code></dt>
<dd>Not documented</dd>
<dt><code class="docutils literal notranslate"><span class="pre">cow_read</span></code></dt>
<dd>Not documented</dd>
<dt><code class="docutils literal notranslate"><span class="pre">cow_write</span></code></dt>
<dd>Not documented</dd>
<dt><code class="docutils literal notranslate"><span class="pre">reftable_load</span></code></dt>
<dd>Not documented</dd>
<dt><code class="docutils literal notranslate"><span class="pre">reftable_grow</span></code></dt>
<dd>Not documented</dd>
<dt><code class="docutils literal notranslate"><span class="pre">reftable_update</span></code></dt>
<dd>Not documented</dd>
<dt><code class="docutils literal notranslate"><span class="pre">refblock_load</span></code></dt>
<dd>Not documented</dd>
<dt><code class="docutils literal notranslate"><span class="pre">refblock_update</span></code></dt>
<dd>Not documented</dd>
<dt><code class="docutils literal notranslate"><span class="pre">refblock_update_part</span></code></dt>
<dd>Not documented</dd>
<dt><code class="docutils literal notranslate"><span class="pre">refblock_alloc</span></code></dt>
<dd>Not documented</dd>
<dt><code class="docutils literal notranslate"><span class="pre">refblock_alloc_hookup</span></code></dt>
<dd>Not documented</dd>
<dt><code class="docutils literal notranslate"><span class="pre">refblock_alloc_write</span></code></dt>
<dd>Not documented</dd>
<dt><code class="docutils literal notranslate"><span class="pre">refblock_alloc_write_blocks</span></code></dt>
<dd>Not documented</dd>
<dt><code class="docutils literal notranslate"><span class="pre">refblock_alloc_write_table</span></code></dt>
<dd>Not documented</dd>
<dt><code class="docutils literal notranslate"><span class="pre">refblock_alloc_switch_table</span></code></dt>
<dd>Not documented</dd>
<dt><code class="docutils literal notranslate"><span class="pre">cluster_alloc</span></code></dt>
<dd>Not documented</dd>
<dt><code class="docutils literal notranslate"><span class="pre">cluster_alloc_bytes</span></code></dt>
<dd>Not documented</dd>
<dt><code class="docutils literal notranslate"><span class="pre">cluster_free</span></code></dt>
<dd>Not documented</dd>
<dt><code class="docutils literal notranslate"><span class="pre">flush_to_os</span></code></dt>
<dd>Not documented</dd>
<dt><code class="docutils literal notranslate"><span class="pre">flush_to_disk</span></code></dt>
<dd>Not documented</dd>
<dt><code class="docutils literal notranslate"><span class="pre">pwritev_rmw_head</span></code></dt>
<dd>Not documented</dd>
<dt><code class="docutils literal notranslate"><span class="pre">pwritev_rmw_after_head</span></code></dt>
<dd>Not documented</dd>
<dt><code class="docutils literal notranslate"><span class="pre">pwritev_rmw_tail</span></code></dt>
<dd>Not documented</dd>
<dt><code class="docutils literal notranslate"><span class="pre">pwritev_rmw_after_tail</span></code></dt>
<dd>Not documented</dd>
<dt><code class="docutils literal notranslate"><span class="pre">pwritev</span></code></dt>
<dd>Not documented</dd>
<dt><code class="docutils literal notranslate"><span class="pre">pwritev_zero</span></code></dt>
<dd>Not documented</dd>
<dt><code class="docutils literal notranslate"><span class="pre">pwritev_done</span></code></dt>
<dd>Not documented</dd>
<dt><code class="docutils literal notranslate"><span class="pre">empty_image_prepare</span></code></dt>
<dd>Not documented</dd>
</dl>
</div>
<div class="section" id="qapidoc-511">
<h4>Since<a class="headerlink" href="#qapidoc-511" title="Permalink to this headline">¶</a></h4>
<p>2.9</p>
</div>
</div>
<div class="section" id="qapidoc-515">
<h3><code class="docutils literal notranslate"><span class="pre">BlkdebugIOType</span></code> (Enum)<a class="headerlink" href="#qapidoc-515" title="Permalink to this headline">¶</a></h3>
<p>Kinds of I/O that blkdebug can inject errors in.</p>
<div class="section" id="qapidoc-513">
<h4>Values<a class="headerlink" href="#qapidoc-513" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">read</span></code></dt>
<dd>.bdrv_co_preadv()</dd>
<dt><code class="docutils literal notranslate"><span class="pre">write</span></code></dt>
<dd>.bdrv_co_pwritev()</dd>
<dt><code class="docutils literal notranslate"><span class="pre">write-zeroes</span></code></dt>
<dd>.bdrv_co_pwrite_zeroes()</dd>
<dt><code class="docutils literal notranslate"><span class="pre">discard</span></code></dt>
<dd>.bdrv_co_pdiscard()</dd>
<dt><code class="docutils literal notranslate"><span class="pre">flush</span></code></dt>
<dd>.bdrv_co_flush_to_disk()</dd>
<dt><code class="docutils literal notranslate"><span class="pre">block-status</span></code></dt>
<dd>.bdrv_co_block_status()</dd>
</dl>
</div>
<div class="section" id="qapidoc-514">
<h4>Since<a class="headerlink" href="#qapidoc-514" title="Permalink to this headline">¶</a></h4>
<p>4.1</p>
</div>
</div>
<div class="section" id="qapidoc-518">
<h3><code class="docutils literal notranslate"><span class="pre">BlkdebugInjectErrorOptions</span></code> (Object)<a class="headerlink" href="#qapidoc-518" title="Permalink to this headline">¶</a></h3>
<p>Describes a single error injection for blkdebug.</p>
<div class="section" id="qapidoc-516">
<h4>Members<a class="headerlink" href="#qapidoc-516" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">event</span></code>: <code class="docutils literal notranslate"><span class="pre">BlkdebugEvent</span></code></dt>
<dd>trigger event</dd>
<dt><code class="docutils literal notranslate"><span class="pre">state</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code> (optional)</dt>
<dd>the state identifier blkdebug needs to be in to
actually trigger the event; defaults to “any”</dd>
<dt><code class="docutils literal notranslate"><span class="pre">iotype</span></code>: <code class="docutils literal notranslate"><span class="pre">BlkdebugIOType</span></code> (optional)</dt>
<dd>the type of I/O operations on which this error should
be injected; defaults to “all read, write,
write-zeroes, discard, and flush operations”
(since: 4.1)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">errno</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code> (optional)</dt>
<dd>error identifier (errno) to be returned; defaults to
EIO</dd>
<dt><code class="docutils literal notranslate"><span class="pre">sector</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code> (optional)</dt>
<dd>specifies the sector index which has to be affected
in order to actually trigger the event; defaults to “any
sector”</dd>
<dt><code class="docutils literal notranslate"><span class="pre">once</span></code>: <code class="docutils literal notranslate"><span class="pre">boolean</span></code> (optional)</dt>
<dd>disables further events after this one has been
triggered; defaults to false</dd>
<dt><code class="docutils literal notranslate"><span class="pre">immediately</span></code>: <code class="docutils literal notranslate"><span class="pre">boolean</span></code> (optional)</dt>
<dd>fail immediately; defaults to false</dd>
</dl>
</div>
<div class="section" id="qapidoc-517">
<h4>Since<a class="headerlink" href="#qapidoc-517" title="Permalink to this headline">¶</a></h4>
<p>2.9</p>
</div>
</div>
<div class="section" id="qapidoc-521">
<h3><code class="docutils literal notranslate"><span class="pre">BlkdebugSetStateOptions</span></code> (Object)<a class="headerlink" href="#qapidoc-521" title="Permalink to this headline">¶</a></h3>
<p>Describes a single state-change event for blkdebug.</p>
<div class="section" id="qapidoc-519">
<h4>Members<a class="headerlink" href="#qapidoc-519" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">event</span></code>: <code class="docutils literal notranslate"><span class="pre">BlkdebugEvent</span></code></dt>
<dd>trigger event</dd>
<dt><code class="docutils literal notranslate"><span class="pre">state</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code> (optional)</dt>
<dd>the current state identifier blkdebug needs to be in;
defaults to “any”</dd>
<dt><code class="docutils literal notranslate"><span class="pre">new_state</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code></dt>
<dd>the state identifier blkdebug is supposed to assume if
this event is triggered</dd>
</dl>
</div>
<div class="section" id="qapidoc-520">
<h4>Since<a class="headerlink" href="#qapidoc-520" title="Permalink to this headline">¶</a></h4>
<p>2.9</p>
</div>
</div>
<div class="section" id="qapidoc-524">
<h3><code class="docutils literal notranslate"><span class="pre">BlockdevOptionsBlkdebug</span></code> (Object)<a class="headerlink" href="#qapidoc-524" title="Permalink to this headline">¶</a></h3>
<p>Driver specific block device options for blkdebug.</p>
<div class="section" id="qapidoc-522">
<h4>Members<a class="headerlink" href="#qapidoc-522" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">image</span></code>: <code class="docutils literal notranslate"><span class="pre">BlockdevRef</span></code></dt>
<dd>underlying raw block device (or image file)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">config</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code> (optional)</dt>
<dd>filename of the configuration file</dd>
<dt><code class="docutils literal notranslate"><span class="pre">align</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code> (optional)</dt>
<dd>required alignment for requests in bytes, must be
positive power of 2, or 0 for default</dd>
<dt><code class="docutils literal notranslate"><span class="pre">max-transfer</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code> (optional)</dt>
<dd>maximum size for I/O transfers in bytes, must be
positive multiple of <code class="docutils literal notranslate"><span class="pre">align</span></code> and of the underlying
file’s request alignment (but need not be a power of
2), or 0 for default (since 2.10)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">opt-write-zero</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code> (optional)</dt>
<dd>preferred alignment for write zero requests in bytes,
must be positive multiple of <code class="docutils literal notranslate"><span class="pre">align</span></code> and of the
underlying file’s request alignment (but need not be a
power of 2), or 0 for default (since 2.10)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">max-write-zero</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code> (optional)</dt>
<dd>maximum size for write zero requests in bytes, must be
positive multiple of <code class="docutils literal notranslate"><span class="pre">align</span></code>, of <code class="docutils literal notranslate"><span class="pre">opt-write-zero</span></code>, and of
the underlying file’s request alignment (but need not
be a power of 2), or 0 for default (since 2.10)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">opt-discard</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code> (optional)</dt>
<dd>preferred alignment for discard requests in bytes, must
be positive multiple of <code class="docutils literal notranslate"><span class="pre">align</span></code> and of the underlying
file’s request alignment (but need not be a power of
2), or 0 for default (since 2.10)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">max-discard</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code> (optional)</dt>
<dd>maximum size for discard requests in bytes, must be
positive multiple of <code class="docutils literal notranslate"><span class="pre">align</span></code>, of <code class="docutils literal notranslate"><span class="pre">opt-discard</span></code>, and of
the underlying file’s request alignment (but need not
be a power of 2), or 0 for default (since 2.10)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">inject-error</span></code>: <code class="docutils literal notranslate"><span class="pre">array</span> <span class="pre">of</span> <span class="pre">BlkdebugInjectErrorOptions</span></code> (optional)</dt>
<dd>array of error injection descriptions</dd>
<dt><code class="docutils literal notranslate"><span class="pre">set-state</span></code>: <code class="docutils literal notranslate"><span class="pre">array</span> <span class="pre">of</span> <span class="pre">BlkdebugSetStateOptions</span></code> (optional)</dt>
<dd>array of state-change descriptions</dd>
<dt><code class="docutils literal notranslate"><span class="pre">take-child-perms</span></code>: <code class="docutils literal notranslate"><span class="pre">array</span> <span class="pre">of</span> <span class="pre">BlockPermission</span></code> (optional)</dt>
<dd>Permissions to take on <code class="docutils literal notranslate"><span class="pre">image</span></code> in addition to what
is necessary anyway (which depends on how the
blkdebug node is used).  Defaults to none.
(since 5.0)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">unshare-child-perms</span></code>: <code class="docutils literal notranslate"><span class="pre">array</span> <span class="pre">of</span> <span class="pre">BlockPermission</span></code> (optional)</dt>
<dd>Permissions not to share on <code class="docutils literal notranslate"><span class="pre">image</span></code> in addition
to what cannot be shared anyway (which depends
on how the blkdebug node is used).  Defaults
to none.  (since 5.0)</dd>
</dl>
</div>
<div class="section" id="qapidoc-523">
<h4>Since<a class="headerlink" href="#qapidoc-523" title="Permalink to this headline">¶</a></h4>
<p>2.9</p>
</div>
</div>
<div class="section" id="qapidoc-527">
<h3><code class="docutils literal notranslate"><span class="pre">BlockdevOptionsBlklogwrites</span></code> (Object)<a class="headerlink" href="#qapidoc-527" title="Permalink to this headline">¶</a></h3>
<p>Driver specific block device options for blklogwrites.</p>
<div class="section" id="qapidoc-525">
<h4>Members<a class="headerlink" href="#qapidoc-525" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">file</span></code>: <code class="docutils literal notranslate"><span class="pre">BlockdevRef</span></code></dt>
<dd>block device</dd>
<dt><code class="docutils literal notranslate"><span class="pre">log</span></code>: <code class="docutils literal notranslate"><span class="pre">BlockdevRef</span></code></dt>
<dd>block device used to log writes to <code class="docutils literal notranslate"><span class="pre">file</span></code></dd>
<dt><code class="docutils literal notranslate"><span class="pre">log-sector-size</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code> (optional)</dt>
<dd>sector size used in logging writes to <code class="docutils literal notranslate"><span class="pre">file</span></code>, determines
granularity of offsets and sizes of writes (default: 512)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">log-append</span></code>: <code class="docutils literal notranslate"><span class="pre">boolean</span></code> (optional)</dt>
<dd>append to an existing log (default: false)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">log-super-update-interval</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code> (optional)</dt>
<dd>interval of write requests after which the log
super block is updated to disk (default: 4096)</dd>
</dl>
</div>
<div class="section" id="qapidoc-526">
<h4>Since<a class="headerlink" href="#qapidoc-526" title="Permalink to this headline">¶</a></h4>
<p>3.0</p>
</div>
</div>
<div class="section" id="qapidoc-530">
<h3><code class="docutils literal notranslate"><span class="pre">BlockdevOptionsBlkverify</span></code> (Object)<a class="headerlink" href="#qapidoc-530" title="Permalink to this headline">¶</a></h3>
<p>Driver specific block device options for blkverify.</p>
<div class="section" id="qapidoc-528">
<h4>Members<a class="headerlink" href="#qapidoc-528" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">test</span></code>: <code class="docutils literal notranslate"><span class="pre">BlockdevRef</span></code></dt>
<dd>block device to be tested</dd>
<dt><code class="docutils literal notranslate"><span class="pre">raw</span></code>: <code class="docutils literal notranslate"><span class="pre">BlockdevRef</span></code></dt>
<dd>raw image used for verification</dd>
</dl>
</div>
<div class="section" id="qapidoc-529">
<h4>Since<a class="headerlink" href="#qapidoc-529" title="Permalink to this headline">¶</a></h4>
<p>2.9</p>
</div>
</div>
<div class="section" id="qapidoc-533">
<h3><code class="docutils literal notranslate"><span class="pre">BlockdevOptionsBlkreplay</span></code> (Object)<a class="headerlink" href="#qapidoc-533" title="Permalink to this headline">¶</a></h3>
<p>Driver specific block device options for blkreplay.</p>
<div class="section" id="qapidoc-531">
<h4>Members<a class="headerlink" href="#qapidoc-531" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">image</span></code>: <code class="docutils literal notranslate"><span class="pre">BlockdevRef</span></code></dt>
<dd>disk image which should be controlled with blkreplay</dd>
</dl>
</div>
<div class="section" id="qapidoc-532">
<h4>Since<a class="headerlink" href="#qapidoc-532" title="Permalink to this headline">¶</a></h4>
<p>4.2</p>
</div>
</div>
<div class="section" id="qapidoc-536">
<h3><code class="docutils literal notranslate"><span class="pre">QuorumReadPattern</span></code> (Enum)<a class="headerlink" href="#qapidoc-536" title="Permalink to this headline">¶</a></h3>
<p>An enumeration of quorum read patterns.</p>
<div class="section" id="qapidoc-534">
<h4>Values<a class="headerlink" href="#qapidoc-534" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">quorum</span></code></dt>
<dd>read all the children and do a quorum vote on reads</dd>
<dt><code class="docutils literal notranslate"><span class="pre">fifo</span></code></dt>
<dd>read only from the first child that has not failed</dd>
</dl>
</div>
<div class="section" id="qapidoc-535">
<h4>Since<a class="headerlink" href="#qapidoc-535" title="Permalink to this headline">¶</a></h4>
<p>2.9</p>
</div>
</div>
<div class="section" id="qapidoc-539">
<h3><code class="docutils literal notranslate"><span class="pre">BlockdevOptionsQuorum</span></code> (Object)<a class="headerlink" href="#qapidoc-539" title="Permalink to this headline">¶</a></h3>
<p>Driver specific block device options for Quorum</p>
<div class="section" id="qapidoc-537">
<h4>Members<a class="headerlink" href="#qapidoc-537" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">blkverify</span></code>: <code class="docutils literal notranslate"><span class="pre">boolean</span></code> (optional)</dt>
<dd><dl class="first last docutils">
<dt>true if the driver must print content mismatch</dt>
<dd>set to false by default</dd>
</dl>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">children</span></code>: <code class="docutils literal notranslate"><span class="pre">array</span> <span class="pre">of</span> <span class="pre">BlockdevRef</span></code></dt>
<dd>the children block devices to use</dd>
<dt><code class="docutils literal notranslate"><span class="pre">vote-threshold</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code></dt>
<dd>the vote limit under which a read will fail</dd>
<dt><code class="docutils literal notranslate"><span class="pre">rewrite-corrupted</span></code>: <code class="docutils literal notranslate"><span class="pre">boolean</span></code> (optional)</dt>
<dd>rewrite corrupted data when quorum is reached
(Since 2.1)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">read-pattern</span></code>: <code class="docutils literal notranslate"><span class="pre">QuorumReadPattern</span></code> (optional)</dt>
<dd>choose read pattern and set to quorum by default
(Since 2.2)</dd>
</dl>
</div>
<div class="section" id="qapidoc-538">
<h4>Since<a class="headerlink" href="#qapidoc-538" title="Permalink to this headline">¶</a></h4>
<p>2.9</p>
</div>
</div>
<div class="section" id="qapidoc-542">
<h3><code class="docutils literal notranslate"><span class="pre">BlockdevOptionsGluster</span></code> (Object)<a class="headerlink" href="#qapidoc-542" title="Permalink to this headline">¶</a></h3>
<p>Driver specific block device options for Gluster</p>
<div class="section" id="qapidoc-540">
<h4>Members<a class="headerlink" href="#qapidoc-540" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">volume</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code></dt>
<dd>name of gluster volume where VM image resides</dd>
<dt><code class="docutils literal notranslate"><span class="pre">path</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code></dt>
<dd>absolute path to image file in gluster volume</dd>
<dt><code class="docutils literal notranslate"><span class="pre">server</span></code>: <code class="docutils literal notranslate"><span class="pre">array</span> <span class="pre">of</span> <span class="pre">SocketAddress</span></code></dt>
<dd>gluster servers description</dd>
<dt><code class="docutils literal notranslate"><span class="pre">debug</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code> (optional)</dt>
<dd>libgfapi log level (default ‘4’ which is Error)
(Since 2.8)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">logfile</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code> (optional)</dt>
<dd>libgfapi log file (default /dev/stderr) (Since 2.8)</dd>
</dl>
</div>
<div class="section" id="qapidoc-541">
<h4>Since<a class="headerlink" href="#qapidoc-541" title="Permalink to this headline">¶</a></h4>
<p>2.9</p>
</div>
</div>
<div class="section" id="qapidoc-545">
<h3><code class="docutils literal notranslate"><span class="pre">IscsiTransport</span></code> (Enum)<a class="headerlink" href="#qapidoc-545" title="Permalink to this headline">¶</a></h3>
<p>An enumeration of libiscsi transport types</p>
<div class="section" id="qapidoc-543">
<h4>Values<a class="headerlink" href="#qapidoc-543" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">tcp</span></code></dt>
<dd>Not documented</dd>
<dt><code class="docutils literal notranslate"><span class="pre">iser</span></code></dt>
<dd>Not documented</dd>
</dl>
</div>
<div class="section" id="qapidoc-544">
<h4>Since<a class="headerlink" href="#qapidoc-544" title="Permalink to this headline">¶</a></h4>
<p>2.9</p>
</div>
</div>
<div class="section" id="qapidoc-548">
<h3><code class="docutils literal notranslate"><span class="pre">IscsiHeaderDigest</span></code> (Enum)<a class="headerlink" href="#qapidoc-548" title="Permalink to this headline">¶</a></h3>
<p>An enumeration of header digests supported by libiscsi</p>
<div class="section" id="qapidoc-546">
<h4>Values<a class="headerlink" href="#qapidoc-546" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">crc32c</span></code></dt>
<dd>Not documented</dd>
<dt><code class="docutils literal notranslate"><span class="pre">none</span></code></dt>
<dd>Not documented</dd>
<dt><code class="docutils literal notranslate"><span class="pre">crc32c-none</span></code></dt>
<dd>Not documented</dd>
<dt><code class="docutils literal notranslate"><span class="pre">none-crc32c</span></code></dt>
<dd>Not documented</dd>
</dl>
</div>
<div class="section" id="qapidoc-547">
<h4>Since<a class="headerlink" href="#qapidoc-547" title="Permalink to this headline">¶</a></h4>
<p>2.9</p>
</div>
</div>
<div class="section" id="qapidoc-552">
<h3><code class="docutils literal notranslate"><span class="pre">BlockdevOptionsIscsi</span></code> (Object)<a class="headerlink" href="#qapidoc-552" title="Permalink to this headline">¶</a></h3>
<div class="section" id="qapidoc-549">
<h4>Members<a class="headerlink" href="#qapidoc-549" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">transport</span></code>: <code class="docutils literal notranslate"><span class="pre">IscsiTransport</span></code></dt>
<dd>The iscsi transport type</dd>
<dt><code class="docutils literal notranslate"><span class="pre">portal</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code></dt>
<dd>The address of the iscsi portal</dd>
<dt><code class="docutils literal notranslate"><span class="pre">target</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code></dt>
<dd>The target iqn name</dd>
<dt><code class="docutils literal notranslate"><span class="pre">lun</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code> (optional)</dt>
<dd>LUN to connect to. Defaults to 0.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">user</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code> (optional)</dt>
<dd>User name to log in with. If omitted, no CHAP
authentication is performed.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">password-secret</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code> (optional)</dt>
<dd>The ID of a QCryptoSecret object providing
the password for the login. This option is required if
<code class="docutils literal notranslate"><span class="pre">user</span></code> is specified.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">initiator-name</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code> (optional)</dt>
<dd>The iqn name we want to identify to the target
as. If this option is not specified, an initiator name is
generated automatically.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">header-digest</span></code>: <code class="docutils literal notranslate"><span class="pre">IscsiHeaderDigest</span></code> (optional)</dt>
<dd>The desired header digest. Defaults to
none-crc32c.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">timeout</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code> (optional)</dt>
<dd>Timeout in seconds after which a request will
timeout. 0 means no timeout and is the default.</dd>
</dl>
</div>
<div class="section" id="qapidoc-550">
Driver specific block device options for iscsi</div>
<div class="section" id="qapidoc-551">
<h4>Since<a class="headerlink" href="#qapidoc-551" title="Permalink to this headline">¶</a></h4>
<p>2.9</p>
</div>
</div>
<div class="section" id="qapidoc-555">
<h3><code class="docutils literal notranslate"><span class="pre">RbdAuthMode</span></code> (Enum)<a class="headerlink" href="#qapidoc-555" title="Permalink to this headline">¶</a></h3>
<div class="section" id="qapidoc-553">
<h4>Values<a class="headerlink" href="#qapidoc-553" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">cephx</span></code></dt>
<dd>Not documented</dd>
<dt><code class="docutils literal notranslate"><span class="pre">none</span></code></dt>
<dd>Not documented</dd>
</dl>
</div>
<div class="section" id="qapidoc-554">
<h4>Since<a class="headerlink" href="#qapidoc-554" title="Permalink to this headline">¶</a></h4>
<p>3.0</p>
</div>
</div>
<div class="section" id="qapidoc-558">
<h3><code class="docutils literal notranslate"><span class="pre">BlockdevOptionsRbd</span></code> (Object)<a class="headerlink" href="#qapidoc-558" title="Permalink to this headline">¶</a></h3>
<div class="section" id="qapidoc-556">
<h4>Members<a class="headerlink" href="#qapidoc-556" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">pool</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code></dt>
<dd>Ceph pool name.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">namespace</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code> (optional)</dt>
<dd>Rados namespace name in the Ceph pool. (Since 5.0)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">image</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code></dt>
<dd>Image name in the Ceph pool.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">conf</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code> (optional)</dt>
<dd>path to Ceph configuration file.  Values
in the configuration file will be overridden by
options specified via QAPI.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">snapshot</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code> (optional)</dt>
<dd>Ceph snapshot name.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">user</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code> (optional)</dt>
<dd>Ceph id name.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">auth-client-required</span></code>: <code class="docutils literal notranslate"><span class="pre">array</span> <span class="pre">of</span> <span class="pre">RbdAuthMode</span></code> (optional)</dt>
<dd>Acceptable authentication modes.
This maps to Ceph configuration option
“auth_client_required”.  (Since 3.0)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">key-secret</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code> (optional)</dt>
<dd>ID of a QCryptoSecret object providing a key
for cephx authentication.
This maps to Ceph configuration option
“key”.  (Since 3.0)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">server</span></code>: <code class="docutils literal notranslate"><span class="pre">array</span> <span class="pre">of</span> <span class="pre">InetSocketAddressBase</span></code> (optional)</dt>
<dd>Monitor host address and port.  This maps
to the “mon_host” Ceph option.</dd>
</dl>
</div>
<div class="section" id="qapidoc-557">
<h4>Since<a class="headerlink" href="#qapidoc-557" title="Permalink to this headline">¶</a></h4>
<p>2.9</p>
</div>
</div>
<div class="section" id="qapidoc-562">
<h3><code class="docutils literal notranslate"><span class="pre">BlockdevOptionsSheepdog</span></code> (Object)<a class="headerlink" href="#qapidoc-562" title="Permalink to this headline">¶</a></h3>
<p>Driver specific block device options for sheepdog</p>
<div class="section" id="qapidoc-559">
<h4>Members<a class="headerlink" href="#qapidoc-559" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">vdi</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code></dt>
<dd>Virtual disk image name</dd>
<dt><code class="docutils literal notranslate"><span class="pre">server</span></code>: <code class="docutils literal notranslate"><span class="pre">SocketAddress</span></code></dt>
<dd>The Sheepdog server to connect to</dd>
<dt><code class="docutils literal notranslate"><span class="pre">snap-id</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code> (optional)</dt>
<dd>Snapshot ID</dd>
<dt><code class="docutils literal notranslate"><span class="pre">tag</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code> (optional)</dt>
<dd>Snapshot tag name</dd>
</dl>
</div>
<div class="section" id="qapidoc-560">
Only one of <code class="docutils literal notranslate"><span class="pre">snap-id</span></code> and <code class="docutils literal notranslate"><span class="pre">tag</span></code> may be present.</div>
<div class="section" id="qapidoc-561">
<h4>Since<a class="headerlink" href="#qapidoc-561" title="Permalink to this headline">¶</a></h4>
<p>2.9</p>
</div>
</div>
<div class="section" id="qapidoc-566">
<h3><code class="docutils literal notranslate"><span class="pre">ReplicationMode</span></code> (Enum)<a class="headerlink" href="#qapidoc-566" title="Permalink to this headline">¶</a></h3>
<p>An enumeration of replication modes.</p>
<div class="section" id="qapidoc-563">
<h4>Values<a class="headerlink" href="#qapidoc-563" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">primary</span></code></dt>
<dd>Primary mode, the vm’s state will be sent to secondary QEMU.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">secondary</span></code></dt>
<dd>Secondary mode, receive the vm’s state from primary QEMU.</dd>
</dl>
</div>
<div class="section" id="qapidoc-564">
<h4>Since<a class="headerlink" href="#qapidoc-564" title="Permalink to this headline">¶</a></h4>
<p>2.9</p>
</div>
<div class="section" id="qapidoc-565">
<h4>If<a class="headerlink" href="#qapidoc-565" title="Permalink to this headline">¶</a></h4>
<code class="docutils literal notranslate"><span class="pre">defined(CONFIG_REPLICATION)</span></code></div>
</div>
<div class="section" id="qapidoc-570">
<h3><code class="docutils literal notranslate"><span class="pre">BlockdevOptionsReplication</span></code> (Object)<a class="headerlink" href="#qapidoc-570" title="Permalink to this headline">¶</a></h3>
<p>Driver specific block device options for replication</p>
<div class="section" id="qapidoc-567">
<h4>Members<a class="headerlink" href="#qapidoc-567" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">mode</span></code>: <code class="docutils literal notranslate"><span class="pre">ReplicationMode</span></code></dt>
<dd>the replication mode</dd>
<dt><code class="docutils literal notranslate"><span class="pre">top-id</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code> (optional)</dt>
<dd>In secondary mode, node name or device ID of the root
node who owns the replication node chain. Must not be given in
primary mode.</dd>
<dt>The members of <code class="docutils literal notranslate"><span class="pre">BlockdevOptionsGenericFormat</span></code></dl>
</div>
<div class="section" id="qapidoc-568">
<h4>Since<a class="headerlink" href="#qapidoc-568" title="Permalink to this headline">¶</a></h4>
<p>2.9</p>
</div>
<div class="section" id="qapidoc-569">
<h4>If<a class="headerlink" href="#qapidoc-569" title="Permalink to this headline">¶</a></h4>
<code class="docutils literal notranslate"><span class="pre">defined(CONFIG_REPLICATION)</span></code></div>
</div>
<div class="section" id="qapidoc-573">
<h3><code class="docutils literal notranslate"><span class="pre">NFSTransport</span></code> (Enum)<a class="headerlink" href="#qapidoc-573" title="Permalink to this headline">¶</a></h3>
<p>An enumeration of NFS transport types</p>
<div class="section" id="qapidoc-571">
<h4>Values<a class="headerlink" href="#qapidoc-571" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">inet</span></code></dt>
<dd>TCP transport</dd>
</dl>
</div>
<div class="section" id="qapidoc-572">
<h4>Since<a class="headerlink" href="#qapidoc-572" title="Permalink to this headline">¶</a></h4>
<p>2.9</p>
</div>
</div>
<div class="section" id="qapidoc-576">
<h3><code class="docutils literal notranslate"><span class="pre">NFSServer</span></code> (Object)<a class="headerlink" href="#qapidoc-576" title="Permalink to this headline">¶</a></h3>
<p>Captures the address of the socket</p>
<div class="section" id="qapidoc-574">
<h4>Members<a class="headerlink" href="#qapidoc-574" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">type</span></code>: <code class="docutils literal notranslate"><span class="pre">NFSTransport</span></code></dt>
<dd>transport type used for NFS (only TCP supported)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">host</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code></dt>
<dd>host address for NFS server</dd>
</dl>
</div>
<div class="section" id="qapidoc-575">
<h4>Since<a class="headerlink" href="#qapidoc-575" title="Permalink to this headline">¶</a></h4>
<p>2.9</p>
</div>
</div>
<div class="section" id="qapidoc-579">
<h3><code class="docutils literal notranslate"><span class="pre">BlockdevOptionsNfs</span></code> (Object)<a class="headerlink" href="#qapidoc-579" title="Permalink to this headline">¶</a></h3>
<p>Driver specific block device option for NFS</p>
<div class="section" id="qapidoc-577">
<h4>Members<a class="headerlink" href="#qapidoc-577" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">server</span></code>: <code class="docutils literal notranslate"><span class="pre">NFSServer</span></code></dt>
<dd>host address</dd>
<dt><code class="docutils literal notranslate"><span class="pre">path</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code></dt>
<dd>path of the image on the host</dd>
<dt><code class="docutils literal notranslate"><span class="pre">user</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code> (optional)</dt>
<dd>UID value to use when talking to the
server (defaults to 65534 on Windows and getuid()
on unix)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">group</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code> (optional)</dt>
<dd>GID value to use when talking to the
server (defaults to 65534 on Windows and getgid()
in unix)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">tcp-syn-count</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code> (optional)</dt>
<dd>number of SYNs during the session
establishment (defaults to libnfs default)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">readahead-size</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code> (optional)</dt>
<dd>set the readahead size in bytes (defaults
to libnfs default)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">page-cache-size</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code> (optional)</dt>
<dd>set the pagecache size in bytes (defaults
to libnfs default)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">debug</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code> (optional)</dt>
<dd>set the NFS debug level (max 2) (defaults
to libnfs default)</dd>
</dl>
</div>
<div class="section" id="qapidoc-578">
<h4>Since<a class="headerlink" href="#qapidoc-578" title="Permalink to this headline">¶</a></h4>
<p>2.9</p>
</div>
</div>
<div class="section" id="qapidoc-582">
<h3><code class="docutils literal notranslate"><span class="pre">BlockdevOptionsCurlBase</span></code> (Object)<a class="headerlink" href="#qapidoc-582" title="Permalink to this headline">¶</a></h3>
<p>Driver specific block device options shared by all protocols supported by the
curl backend.</p>
<div class="section" id="qapidoc-580">
<h4>Members<a class="headerlink" href="#qapidoc-580" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">url</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code></dt>
<dd>URL of the image file</dd>
<dt><code class="docutils literal notranslate"><span class="pre">readahead</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code> (optional)</dt>
<dd>Size of the read-ahead cache; must be a multiple of
512 (defaults to 256 kB)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">timeout</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code> (optional)</dt>
<dd>Timeout for connections, in seconds (defaults to 5)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">username</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code> (optional)</dt>
<dd>Username for authentication (defaults to none)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">password-secret</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code> (optional)</dt>
<dd>ID of a QCryptoSecret object providing a password
for authentication (defaults to no password)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">proxy-username</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code> (optional)</dt>
<dd>Username for proxy authentication (defaults to none)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">proxy-password-secret</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code> (optional)</dt>
<dd>ID of a QCryptoSecret object providing a password
for proxy authentication (defaults to no password)</dd>
</dl>
</div>
<div class="section" id="qapidoc-581">
<h4>Since<a class="headerlink" href="#qapidoc-581" title="Permalink to this headline">¶</a></h4>
<p>2.9</p>
</div>
</div>
<div class="section" id="qapidoc-585">
<h3><code class="docutils literal notranslate"><span class="pre">BlockdevOptionsCurlHttp</span></code> (Object)<a class="headerlink" href="#qapidoc-585" title="Permalink to this headline">¶</a></h3>
<p>Driver specific block device options for HTTP connections over the curl
backend.  URLs must start with “<a class="reference external" href="http://">http://</a>”.</p>
<div class="section" id="qapidoc-583">
<h4>Members<a class="headerlink" href="#qapidoc-583" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">cookie</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code> (optional)</dt>
<dd>List of cookies to set; format is
“name1=content1; name2=content2;” as explained by
CURLOPT_COOKIE(3). Defaults to no cookies.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">cookie-secret</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code> (optional)</dt>
<dd>ID of a QCryptoSecret object providing the cookie data in a
secure way. See <code class="docutils literal notranslate"><span class="pre">cookie</span></code> for the format. (since 2.10)</dd>
<dt>The members of <code class="docutils literal notranslate"><span class="pre">BlockdevOptionsCurlBase</span></code></dl>
</div>
<div class="section" id="qapidoc-584">
<h4>Since<a class="headerlink" href="#qapidoc-584" title="Permalink to this headline">¶</a></h4>
<p>2.9</p>
</div>
</div>
<div class="section" id="qapidoc-588">
<h3><code class="docutils literal notranslate"><span class="pre">BlockdevOptionsCurlHttps</span></code> (Object)<a class="headerlink" href="#qapidoc-588" title="Permalink to this headline">¶</a></h3>
<p>Driver specific block device options for HTTPS connections over the curl
backend.  URLs must start with “<a class="reference external" href="https://">https://</a>”.</p>
<div class="section" id="qapidoc-586">
<h4>Members<a class="headerlink" href="#qapidoc-586" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">cookie</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code> (optional)</dt>
<dd>List of cookies to set; format is
“name1=content1; name2=content2;” as explained by
CURLOPT_COOKIE(3). Defaults to no cookies.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">sslverify</span></code>: <code class="docutils literal notranslate"><span class="pre">boolean</span></code> (optional)</dt>
<dd>Whether to verify the SSL certificate’s validity (defaults to
true)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">cookie-secret</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code> (optional)</dt>
<dd>ID of a QCryptoSecret object providing the cookie data in a
secure way. See <code class="docutils literal notranslate"><span class="pre">cookie</span></code> for the format. (since 2.10)</dd>
<dt>The members of <code class="docutils literal notranslate"><span class="pre">BlockdevOptionsCurlBase</span></code></dl>
</div>
<div class="section" id="qapidoc-587">
<h4>Since<a class="headerlink" href="#qapidoc-587" title="Permalink to this headline">¶</a></h4>
<p>2.9</p>
</div>
</div>
<div class="section" id="qapidoc-591">
<h3><code class="docutils literal notranslate"><span class="pre">BlockdevOptionsCurlFtp</span></code> (Object)<a class="headerlink" href="#qapidoc-591" title="Permalink to this headline">¶</a></h3>
<p>Driver specific block device options for FTP connections over the curl
backend.  URLs must start with “<a class="reference external" href="ftp://">ftp://</a>”.</p>
<div class="section" id="qapidoc-589">
<h4>Members<a class="headerlink" href="#qapidoc-589" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt>The members of <code class="docutils literal notranslate"><span class="pre">BlockdevOptionsCurlBase</span></code></dl>
</div>
<div class="section" id="qapidoc-590">
<h4>Since<a class="headerlink" href="#qapidoc-590" title="Permalink to this headline">¶</a></h4>
<p>2.9</p>
</div>
</div>
<div class="section" id="qapidoc-594">
<h3><code class="docutils literal notranslate"><span class="pre">BlockdevOptionsCurlFtps</span></code> (Object)<a class="headerlink" href="#qapidoc-594" title="Permalink to this headline">¶</a></h3>
<p>Driver specific block device options for FTPS connections over the curl
backend.  URLs must start with “ftps://”.</p>
<div class="section" id="qapidoc-592">
<h4>Members<a class="headerlink" href="#qapidoc-592" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">sslverify</span></code>: <code class="docutils literal notranslate"><span class="pre">boolean</span></code> (optional)</dt>
<dd>Whether to verify the SSL certificate’s validity (defaults to
true)</dd>
<dt>The members of <code class="docutils literal notranslate"><span class="pre">BlockdevOptionsCurlBase</span></code></dl>
</div>
<div class="section" id="qapidoc-593">
<h4>Since<a class="headerlink" href="#qapidoc-593" title="Permalink to this headline">¶</a></h4>
<p>2.9</p>
</div>
</div>
<div class="section" id="qapidoc-597">
<h3><code class="docutils literal notranslate"><span class="pre">BlockdevOptionsNbd</span></code> (Object)<a class="headerlink" href="#qapidoc-597" title="Permalink to this headline">¶</a></h3>
<p>Driver specific block device options for NBD.</p>
<div class="section" id="qapidoc-595">
<h4>Members<a class="headerlink" href="#qapidoc-595" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">server</span></code>: <code class="docutils literal notranslate"><span class="pre">SocketAddress</span></code></dt>
<dd>NBD server address</dd>
<dt><code class="docutils literal notranslate"><span class="pre">export</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code> (optional)</dt>
<dd>export name</dd>
<dt><code class="docutils literal notranslate"><span class="pre">tls-creds</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code> (optional)</dt>
<dd>TLS credentials ID</dd>
<dt><code class="docutils literal notranslate"><span class="pre">x-dirty-bitmap</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code> (optional)</dt>
<dd>A metadata context name such as “qemu:dirty-bitmap:NAME”
or “qemu:allocation-depth” to query in place of the
traditional “base:allocation” block status (see
NBD_OPT_LIST_META_CONTEXT in the NBD protocol; and
yes, naming this option x-context would have made
more sense) (since 3.0)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">reconnect-delay</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code> (optional)</dt>
<dd>On an unexpected disconnect, the nbd client tries to
connect again until succeeding or encountering a serious
error.  During the first <code class="docutils literal notranslate"><span class="pre">reconnect-delay</span></code> seconds, all
requests are paused and will be rerun on a successful
reconnect. After that time, any delayed requests and all
future requests before a successful reconnect will
immediately fail. Default 0 (Since 4.2)</dd>
</dl>
</div>
<div class="section" id="qapidoc-596">
<h4>Since<a class="headerlink" href="#qapidoc-596" title="Permalink to this headline">¶</a></h4>
<p>2.9</p>
</div>
</div>
<div class="section" id="qapidoc-600">
<h3><code class="docutils literal notranslate"><span class="pre">BlockdevOptionsRaw</span></code> (Object)<a class="headerlink" href="#qapidoc-600" title="Permalink to this headline">¶</a></h3>
<p>Driver specific block device options for the raw driver.</p>
<div class="section" id="qapidoc-598">
<h4>Members<a class="headerlink" href="#qapidoc-598" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">offset</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code> (optional)</dt>
<dd>position where the block device starts</dd>
<dt><code class="docutils literal notranslate"><span class="pre">size</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code> (optional)</dt>
<dd>the assumed size of the device</dd>
<dt>The members of <code class="docutils literal notranslate"><span class="pre">BlockdevOptionsGenericFormat</span></code></dl>
</div>
<div class="section" id="qapidoc-599">
<h4>Since<a class="headerlink" href="#qapidoc-599" title="Permalink to this headline">¶</a></h4>
<p>2.9</p>
</div>
</div>
<div class="section" id="qapidoc-603">
<h3><code class="docutils literal notranslate"><span class="pre">BlockdevOptionsThrottle</span></code> (Object)<a class="headerlink" href="#qapidoc-603" title="Permalink to this headline">¶</a></h3>
<p>Driver specific block device options for the throttle driver</p>
<div class="section" id="qapidoc-601">
<h4>Members<a class="headerlink" href="#qapidoc-601" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">throttle-group</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code></dt>
<dd>the name of the throttle-group object to use. It
must already exist.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">file</span></code>: <code class="docutils literal notranslate"><span class="pre">BlockdevRef</span></code></dt>
<dd>reference to or definition of the data source block device</dd>
</dl>
</div>
<div class="section" id="qapidoc-602">
<h4>Since<a class="headerlink" href="#qapidoc-602" title="Permalink to this headline">¶</a></h4>
<p>2.11</p>
</div>
</div>
<div class="section" id="qapidoc-607">
<h3><code class="docutils literal notranslate"><span class="pre">BlockdevOptions</span></code> (Object)<a class="headerlink" href="#qapidoc-607" title="Permalink to this headline">¶</a></h3>
<p>Options for creating a block device.  Many options are available for all
block devices, independent of the block driver:</p>
<div class="section" id="qapidoc-604">
<h4>Members<a class="headerlink" href="#qapidoc-604" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">driver</span></code>: <code class="docutils literal notranslate"><span class="pre">BlockdevDriver</span></code></dt>
<dd>block driver name</dd>
<dt><code class="docutils literal notranslate"><span class="pre">node-name</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code> (optional)</dt>
<dd>the node name of the new node (Since 2.0).
This option is required on the top level of blockdev-add.
Valid node names start with an alphabetic character and may
contain only alphanumeric characters, ‘-‘, ‘.’ and ‘_’. Their
maximum length is 31 characters.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">discard</span></code>: <code class="docutils literal notranslate"><span class="pre">BlockdevDiscardOptions</span></code> (optional)</dt>
<dd>discard-related options (default: ignore)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">cache</span></code>: <code class="docutils literal notranslate"><span class="pre">BlockdevCacheOptions</span></code> (optional)</dt>
<dd>cache-related options</dd>
<dt><code class="docutils literal notranslate"><span class="pre">read-only</span></code>: <code class="docutils literal notranslate"><span class="pre">boolean</span></code> (optional)</dt>
<dd>whether the block device should be read-only (default: false).
Note that some block drivers support only read-only access,
either generally or in certain configurations. In this case,
the default value does not work and the option must be
specified explicitly.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">auto-read-only</span></code>: <code class="docutils literal notranslate"><span class="pre">boolean</span></code> (optional)</dt>
<dd>if true and <code class="docutils literal notranslate"><span class="pre">read-only</span></code> is false, QEMU may automatically
decide not to open the image read-write as requested, but
fall back to read-only instead (and switch between the modes
later), e.g. depending on whether the image file is writable
or whether a writing user is attached to the node
(default: false, since 3.1)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">detect-zeroes</span></code>: <code class="docutils literal notranslate"><span class="pre">BlockdevDetectZeroesOptions</span></code> (optional)</dt>
<dd>detect and optimize zero writes (Since 2.1)
(default: off)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">force-share</span></code>: <code class="docutils literal notranslate"><span class="pre">boolean</span></code> (optional)</dt>
<dd>force share all permission on added nodes.
Requires read-only=true. (Since 2.10)</dd>
<dt>The members of <code class="docutils literal notranslate"><span class="pre">BlockdevOptionsBlkdebug</span></code> when <code class="docutils literal notranslate"><span class="pre">driver</span></code> is <code class="docutils literal notranslate"><span class="pre">&quot;blkdebug&quot;</span></code><dt>The members of <code class="docutils literal notranslate"><span class="pre">BlockdevOptionsBlklogwrites</span></code> when <code class="docutils literal notranslate"><span class="pre">driver</span></code> is <code class="docutils literal notranslate"><span class="pre">&quot;blklogwrites&quot;</span></code><dt>The members of <code class="docutils literal notranslate"><span class="pre">BlockdevOptionsBlkverify</span></code> when <code class="docutils literal notranslate"><span class="pre">driver</span></code> is <code class="docutils literal notranslate"><span class="pre">&quot;blkverify&quot;</span></code><dt>The members of <code class="docutils literal notranslate"><span class="pre">BlockdevOptionsBlkreplay</span></code> when <code class="docutils literal notranslate"><span class="pre">driver</span></code> is <code class="docutils literal notranslate"><span class="pre">&quot;blkreplay&quot;</span></code><dt>The members of <code class="docutils literal notranslate"><span class="pre">BlockdevOptionsGenericFormat</span></code> when <code class="docutils literal notranslate"><span class="pre">driver</span></code> is <code class="docutils literal notranslate"><span class="pre">&quot;bochs&quot;</span></code><dt>The members of <code class="docutils literal notranslate"><span class="pre">BlockdevOptionsGenericFormat</span></code> when <code class="docutils literal notranslate"><span class="pre">driver</span></code> is <code class="docutils literal notranslate"><span class="pre">&quot;cloop&quot;</span></code><dt>The members of <code class="docutils literal notranslate"><span class="pre">BlockdevOptionsGenericFormat</span></code> when <code class="docutils literal notranslate"><span class="pre">driver</span></code> is <code class="docutils literal notranslate"><span class="pre">&quot;compress&quot;</span></code><dt>The members of <code class="docutils literal notranslate"><span class="pre">BlockdevOptionsGenericFormat</span></code> when <code class="docutils literal notranslate"><span class="pre">driver</span></code> is <code class="docutils literal notranslate"><span class="pre">&quot;copy-on-read&quot;</span></code><dt>The members of <code class="docutils literal notranslate"><span class="pre">BlockdevOptionsGenericFormat</span></code> when <code class="docutils literal notranslate"><span class="pre">driver</span></code> is <code class="docutils literal notranslate"><span class="pre">&quot;dmg&quot;</span></code><dt>The members of <code class="docutils literal notranslate"><span class="pre">BlockdevOptionsFile</span></code> when <code class="docutils literal notranslate"><span class="pre">driver</span></code> is <code class="docutils literal notranslate"><span class="pre">&quot;file&quot;</span></code><dt>The members of <code class="docutils literal notranslate"><span class="pre">BlockdevOptionsCurlFtp</span></code> when <code class="docutils literal notranslate"><span class="pre">driver</span></code> is <code class="docutils literal notranslate"><span class="pre">&quot;ftp&quot;</span></code><dt>The members of <code class="docutils literal notranslate"><span class="pre">BlockdevOptionsCurlFtps</span></code> when <code class="docutils literal notranslate"><span class="pre">driver</span></code> is <code class="docutils literal notranslate"><span class="pre">&quot;ftps&quot;</span></code><dt>The members of <code class="docutils literal notranslate"><span class="pre">BlockdevOptionsGluster</span></code> when <code class="docutils literal notranslate"><span class="pre">driver</span></code> is <code class="docutils literal notranslate"><span class="pre">&quot;gluster&quot;</span></code><dt>The members of <code class="docutils literal notranslate"><span class="pre">BlockdevOptionsFile</span></code> when <code class="docutils literal notranslate"><span class="pre">driver</span></code> is <code class="docutils literal notranslate"><span class="pre">&quot;host_cdrom&quot;</span></code><dt>The members of <code class="docutils literal notranslate"><span class="pre">BlockdevOptionsFile</span></code> when <code class="docutils literal notranslate"><span class="pre">driver</span></code> is <code class="docutils literal notranslate"><span class="pre">&quot;host_device&quot;</span></code><dt>The members of <code class="docutils literal notranslate"><span class="pre">BlockdevOptionsCurlHttp</span></code> when <code class="docutils literal notranslate"><span class="pre">driver</span></code> is <code class="docutils literal notranslate"><span class="pre">&quot;http&quot;</span></code><dt>The members of <code class="docutils literal notranslate"><span class="pre">BlockdevOptionsCurlHttps</span></code> when <code class="docutils literal notranslate"><span class="pre">driver</span></code> is <code class="docutils literal notranslate"><span class="pre">&quot;https&quot;</span></code><dt>The members of <code class="docutils literal notranslate"><span class="pre">BlockdevOptionsIscsi</span></code> when <code class="docutils literal notranslate"><span class="pre">driver</span></code> is <code class="docutils literal notranslate"><span class="pre">&quot;iscsi&quot;</span></code><dt>The members of <code class="docutils literal notranslate"><span class="pre">BlockdevOptionsLUKS</span></code> when <code class="docutils literal notranslate"><span class="pre">driver</span></code> is <code class="docutils literal notranslate"><span class="pre">&quot;luks&quot;</span></code><dt>The members of <code class="docutils literal notranslate"><span class="pre">BlockdevOptionsNbd</span></code> when <code class="docutils literal notranslate"><span class="pre">driver</span></code> is <code class="docutils literal notranslate"><span class="pre">&quot;nbd&quot;</span></code><dt>The members of <code class="docutils literal notranslate"><span class="pre">BlockdevOptionsNfs</span></code> when <code class="docutils literal notranslate"><span class="pre">driver</span></code> is <code class="docutils literal notranslate"><span class="pre">&quot;nfs&quot;</span></code><dt>The members of <code class="docutils literal notranslate"><span class="pre">BlockdevOptionsNull</span></code> when <code class="docutils literal notranslate"><span class="pre">driver</span></code> is <code class="docutils literal notranslate"><span class="pre">&quot;null-aio&quot;</span></code><dt>The members of <code class="docutils literal notranslate"><span class="pre">BlockdevOptionsNull</span></code> when <code class="docutils literal notranslate"><span class="pre">driver</span></code> is <code class="docutils literal notranslate"><span class="pre">&quot;null-co&quot;</span></code><dt>The members of <code class="docutils literal notranslate"><span class="pre">BlockdevOptionsNVMe</span></code> when <code class="docutils literal notranslate"><span class="pre">driver</span></code> is <code class="docutils literal notranslate"><span class="pre">&quot;nvme&quot;</span></code><dt>The members of <code class="docutils literal notranslate"><span class="pre">BlockdevOptionsGenericFormat</span></code> when <code class="docutils literal notranslate"><span class="pre">driver</span></code> is <code class="docutils literal notranslate"><span class="pre">&quot;parallels&quot;</span></code><dt>The members of <code class="docutils literal notranslate"><span class="pre">BlockdevOptionsPreallocate</span></code> when <code class="docutils literal notranslate"><span class="pre">driver</span></code> is <code class="docutils literal notranslate"><span class="pre">&quot;preallocate&quot;</span></code><dt>The members of <code class="docutils literal notranslate"><span class="pre">BlockdevOptionsQcow2</span></code> when <code class="docutils literal notranslate"><span class="pre">driver</span></code> is <code class="docutils literal notranslate"><span class="pre">&quot;qcow2&quot;</span></code><dt>The members of <code class="docutils literal notranslate"><span class="pre">BlockdevOptionsQcow</span></code> when <code class="docutils literal notranslate"><span class="pre">driver</span></code> is <code class="docutils literal notranslate"><span class="pre">&quot;qcow&quot;</span></code><dt>The members of <code class="docutils literal notranslate"><span class="pre">BlockdevOptionsGenericCOWFormat</span></code> when <code class="docutils literal notranslate"><span class="pre">driver</span></code> is <code class="docutils literal notranslate"><span class="pre">&quot;qed&quot;</span></code><dt>The members of <code class="docutils literal notranslate"><span class="pre">BlockdevOptionsQuorum</span></code> when <code class="docutils literal notranslate"><span class="pre">driver</span></code> is <code class="docutils literal notranslate"><span class="pre">&quot;quorum&quot;</span></code><dt>The members of <code class="docutils literal notranslate"><span class="pre">BlockdevOptionsRaw</span></code> when <code class="docutils literal notranslate"><span class="pre">driver</span></code> is <code class="docutils literal notranslate"><span class="pre">&quot;raw&quot;</span></code><dt>The members of <code class="docutils literal notranslate"><span class="pre">BlockdevOptionsRbd</span></code> when <code class="docutils literal notranslate"><span class="pre">driver</span></code> is <code class="docutils literal notranslate"><span class="pre">&quot;rbd&quot;</span></code><dt>The members of <code class="docutils literal notranslate"><span class="pre">BlockdevOptionsReplication</span></code> when <code class="docutils literal notranslate"><span class="pre">driver</span></code> is <code class="docutils literal notranslate"><span class="pre">&quot;replication&quot;</span></code> (<strong>If: </strong><code class="docutils literal notranslate"><span class="pre">defined(CONFIG_REPLICATION)</span></code>)<dt>The members of <code class="docutils literal notranslate"><span class="pre">BlockdevOptionsSheepdog</span></code> when <code class="docutils literal notranslate"><span class="pre">driver</span></code> is <code class="docutils literal notranslate"><span class="pre">&quot;sheepdog&quot;</span></code><dt>The members of <code class="docutils literal notranslate"><span class="pre">BlockdevOptionsSsh</span></code> when <code class="docutils literal notranslate"><span class="pre">driver</span></code> is <code class="docutils literal notranslate"><span class="pre">&quot;ssh&quot;</span></code><dt>The members of <code class="docutils literal notranslate"><span class="pre">BlockdevOptionsThrottle</span></code> when <code class="docutils literal notranslate"><span class="pre">driver</span></code> is <code class="docutils literal notranslate"><span class="pre">&quot;throttle&quot;</span></code><dt>The members of <code class="docutils literal notranslate"><span class="pre">BlockdevOptionsGenericFormat</span></code> when <code class="docutils literal notranslate"><span class="pre">driver</span></code> is <code class="docutils literal notranslate"><span class="pre">&quot;vdi&quot;</span></code><dt>The members of <code class="docutils literal notranslate"><span class="pre">BlockdevOptionsGenericFormat</span></code> when <code class="docutils literal notranslate"><span class="pre">driver</span></code> is <code class="docutils literal notranslate"><span class="pre">&quot;vhdx&quot;</span></code><dt>The members of <code class="docutils literal notranslate"><span class="pre">BlockdevOptionsGenericCOWFormat</span></code> when <code class="docutils literal notranslate"><span class="pre">driver</span></code> is <code class="docutils literal notranslate"><span class="pre">&quot;vmdk&quot;</span></code><dt>The members of <code class="docutils literal notranslate"><span class="pre">BlockdevOptionsGenericFormat</span></code> when <code class="docutils literal notranslate"><span class="pre">driver</span></code> is <code class="docutils literal notranslate"><span class="pre">&quot;vpc&quot;</span></code><dt>The members of <code class="docutils literal notranslate"><span class="pre">BlockdevOptionsVVFAT</span></code> when <code class="docutils literal notranslate"><span class="pre">driver</span></code> is <code class="docutils literal notranslate"><span class="pre">&quot;vvfat&quot;</span></code></dl>
</div>
<div class="section" id="qapidoc-605">
Remaining options are determined by the block driver.</div>
<div class="section" id="qapidoc-606">
<h4>Since<a class="headerlink" href="#qapidoc-606" title="Permalink to this headline">¶</a></h4>
<p>2.9</p>
</div>
</div>
<div class="section" id="qapidoc-610">
<h3><code class="docutils literal notranslate"><span class="pre">BlockdevRef</span></code> (Alternate)<a class="headerlink" href="#qapidoc-610" title="Permalink to this headline">¶</a></h3>
<p>Reference to a block device.</p>
<div class="section" id="qapidoc-608">
<h4>Members<a class="headerlink" href="#qapidoc-608" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">definition</span></code>: <code class="docutils literal notranslate"><span class="pre">BlockdevOptions</span></code></dt>
<dd>defines a new block device inline</dd>
<dt><code class="docutils literal notranslate"><span class="pre">reference</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code></dt>
<dd>references the ID of an existing block device</dd>
</dl>
</div>
<div class="section" id="qapidoc-609">
<h4>Since<a class="headerlink" href="#qapidoc-609" title="Permalink to this headline">¶</a></h4>
<p>2.9</p>
</div>
</div>
<div class="section" id="qapidoc-613">
<h3><code class="docutils literal notranslate"><span class="pre">BlockdevRefOrNull</span></code> (Alternate)<a class="headerlink" href="#qapidoc-613" title="Permalink to this headline">¶</a></h3>
<p>Reference to a block device.</p>
<div class="section" id="qapidoc-611">
<h4>Members<a class="headerlink" href="#qapidoc-611" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">definition</span></code>: <code class="docutils literal notranslate"><span class="pre">BlockdevOptions</span></code></dt>
<dd>defines a new block device inline</dd>
<dt><code class="docutils literal notranslate"><span class="pre">reference</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code></dt>
<dd>references the ID of an existing block device.
An empty string means that no block device should
be referenced.  Deprecated; use null instead.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">null</span></code>: <code class="docutils literal notranslate"><span class="pre">null</span></code></dt>
<dd>No block device should be referenced (since 2.10)</dd>
</dl>
</div>
<div class="section" id="qapidoc-612">
<h4>Since<a class="headerlink" href="#qapidoc-612" title="Permalink to this headline">¶</a></h4>
<p>2.9</p>
</div>
</div>
<div class="section" id="qapidoc-617">
<h3><code class="docutils literal notranslate"><span class="pre">blockdev-add</span></code> (Command)<a class="headerlink" href="#qapidoc-617" title="Permalink to this headline">¶</a></h3>
<p>Creates a new block device.</p>
<div class="section" id="qapidoc-614">
<h4>Arguments<a class="headerlink" href="#qapidoc-614" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt>The members of <code class="docutils literal notranslate"><span class="pre">BlockdevOptions</span></code></dl>
</div>
<div class="section" id="qapidoc-615">
<h4>Since<a class="headerlink" href="#qapidoc-615" title="Permalink to this headline">¶</a></h4>
<p>2.9</p>
</div>
<div class="section" id="qapidoc-616">
<h4>Example<a class="headerlink" href="#qapidoc-616" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mf">1.</span>
<span class="o">-&gt;</span> <span class="p">{</span> <span class="s2">&quot;execute&quot;</span><span class="p">:</span> <span class="s2">&quot;blockdev-add&quot;</span><span class="p">,</span>
     <span class="s2">&quot;arguments&quot;</span><span class="p">:</span> <span class="p">{</span>
          <span class="s2">&quot;driver&quot;</span><span class="p">:</span> <span class="s2">&quot;qcow2&quot;</span><span class="p">,</span>
          <span class="s2">&quot;node-name&quot;</span><span class="p">:</span> <span class="s2">&quot;test1&quot;</span><span class="p">,</span>
          <span class="s2">&quot;file&quot;</span><span class="p">:</span> <span class="p">{</span>
              <span class="s2">&quot;driver&quot;</span><span class="p">:</span> <span class="s2">&quot;file&quot;</span><span class="p">,</span>
              <span class="s2">&quot;filename&quot;</span><span class="p">:</span> <span class="s2">&quot;test.qcow2&quot;</span>
           <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>
<span class="o">&lt;-</span> <span class="p">{</span> <span class="s2">&quot;return&quot;</span><span class="p">:</span> <span class="p">{}</span> <span class="p">}</span>

<span class="mf">2.</span>
<span class="o">-&gt;</span> <span class="p">{</span> <span class="s2">&quot;execute&quot;</span><span class="p">:</span> <span class="s2">&quot;blockdev-add&quot;</span><span class="p">,</span>
     <span class="s2">&quot;arguments&quot;</span><span class="p">:</span> <span class="p">{</span>
          <span class="s2">&quot;driver&quot;</span><span class="p">:</span> <span class="s2">&quot;qcow2&quot;</span><span class="p">,</span>
          <span class="s2">&quot;node-name&quot;</span><span class="p">:</span> <span class="s2">&quot;node0&quot;</span><span class="p">,</span>
          <span class="s2">&quot;discard&quot;</span><span class="p">:</span> <span class="s2">&quot;unmap&quot;</span><span class="p">,</span>
          <span class="s2">&quot;cache&quot;</span><span class="p">:</span> <span class="p">{</span>
             <span class="s2">&quot;direct&quot;</span><span class="p">:</span> <span class="n">true</span>
           <span class="p">},</span>
           <span class="s2">&quot;file&quot;</span><span class="p">:</span> <span class="p">{</span>
             <span class="s2">&quot;driver&quot;</span><span class="p">:</span> <span class="s2">&quot;file&quot;</span><span class="p">,</span>
             <span class="s2">&quot;filename&quot;</span><span class="p">:</span> <span class="s2">&quot;/tmp/test.qcow2&quot;</span>
           <span class="p">},</span>
           <span class="s2">&quot;backing&quot;</span><span class="p">:</span> <span class="p">{</span>
              <span class="s2">&quot;driver&quot;</span><span class="p">:</span> <span class="s2">&quot;raw&quot;</span><span class="p">,</span>
              <span class="s2">&quot;file&quot;</span><span class="p">:</span> <span class="p">{</span>
                 <span class="s2">&quot;driver&quot;</span><span class="p">:</span> <span class="s2">&quot;file&quot;</span><span class="p">,</span>
                 <span class="s2">&quot;filename&quot;</span><span class="p">:</span> <span class="s2">&quot;/dev/fdset/4&quot;</span>
               <span class="p">}</span>
           <span class="p">}</span>
       <span class="p">}</span>
     <span class="p">}</span>

<span class="o">&lt;-</span> <span class="p">{</span> <span class="s2">&quot;return&quot;</span><span class="p">:</span> <span class="p">{}</span> <span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="qapidoc-620">
<h3><code class="docutils literal notranslate"><span class="pre">x-blockdev-reopen</span></code> (Command)<a class="headerlink" href="#qapidoc-620" title="Permalink to this headline">¶</a></h3>
<p>Reopens a block device using the given set of options. Any option
not specified will be reset to its default value regardless of its
previous status. If an option cannot be changed or a particular
driver does not support reopening then the command will return an
error.</p>
<p>The top-level <code class="docutils literal notranslate"><span class="pre">node-name</span></code> option (from BlockdevOptions) must be
specified and is used to select the block device to be reopened.
Other <code class="docutils literal notranslate"><span class="pre">node-name</span></code> options must be either omitted or set to the
current name of the appropriate node. This command won’t change any
node name and any attempt to do it will result in an error.</p>
<p>In the case of options that refer to child nodes, the behavior of
this command depends on the value:</p>
<blockquote>
<div><ol class="arabic simple">
<li>A set of options (BlockdevOptions): the child is reopened with
the specified set of options.</li>
<li>A reference to the current child: the child is reopened using
its existing set of options.</li>
<li>A reference to a different node: the current child is replaced
with the specified one.</li>
<li>NULL: the current child (if any) is detached.</li>
</ol>
</div></blockquote>
<p>Options (1) and (2) are supported in all cases, but at the moment
only <code class="docutils literal notranslate"><span class="pre">backing</span></code> allows replacing or detaching an existing child.</p>
<p>Unlike with blockdev-add, the <code class="docutils literal notranslate"><span class="pre">backing</span></code> option must always be present
unless the node being reopened does not have a backing file and its
image does not have a default backing file name as part of its
metadata.</p>
<div class="section" id="qapidoc-618">
<h4>Arguments<a class="headerlink" href="#qapidoc-618" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt>The members of <code class="docutils literal notranslate"><span class="pre">BlockdevOptions</span></code></dl>
</div>
<div class="section" id="qapidoc-619">
<h4>Since<a class="headerlink" href="#qapidoc-619" title="Permalink to this headline">¶</a></h4>
<p>4.0</p>
</div>
</div>
<div class="section" id="qapidoc-624">
<h3><code class="docutils literal notranslate"><span class="pre">blockdev-del</span></code> (Command)<a class="headerlink" href="#qapidoc-624" title="Permalink to this headline">¶</a></h3>
<p>Deletes a block device that has been added using blockdev-add.
The command will fail if the node is attached to a device or is
otherwise being used.</p>
<div class="section" id="qapidoc-621">
<h4>Arguments<a class="headerlink" href="#qapidoc-621" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">node-name</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code></dt>
<dd>Name of the graph node to delete.</dd>
</dl>
</div>
<div class="section" id="qapidoc-622">
<h4>Since<a class="headerlink" href="#qapidoc-622" title="Permalink to this headline">¶</a></h4>
<p>2.9</p>
</div>
<div class="section" id="qapidoc-623">
<h4>Example<a class="headerlink" href="#qapidoc-623" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-&gt;</span> <span class="p">{</span> <span class="s2">&quot;execute&quot;</span><span class="p">:</span> <span class="s2">&quot;blockdev-add&quot;</span><span class="p">,</span>
     <span class="s2">&quot;arguments&quot;</span><span class="p">:</span> <span class="p">{</span>
          <span class="s2">&quot;driver&quot;</span><span class="p">:</span> <span class="s2">&quot;qcow2&quot;</span><span class="p">,</span>
          <span class="s2">&quot;node-name&quot;</span><span class="p">:</span> <span class="s2">&quot;node0&quot;</span><span class="p">,</span>
          <span class="s2">&quot;file&quot;</span><span class="p">:</span> <span class="p">{</span>
              <span class="s2">&quot;driver&quot;</span><span class="p">:</span> <span class="s2">&quot;file&quot;</span><span class="p">,</span>
              <span class="s2">&quot;filename&quot;</span><span class="p">:</span> <span class="s2">&quot;test.qcow2&quot;</span>
          <span class="p">}</span>
     <span class="p">}</span>
   <span class="p">}</span>
<span class="o">&lt;-</span> <span class="p">{</span> <span class="s2">&quot;return&quot;</span><span class="p">:</span> <span class="p">{}</span> <span class="p">}</span>

<span class="o">-&gt;</span> <span class="p">{</span> <span class="s2">&quot;execute&quot;</span><span class="p">:</span> <span class="s2">&quot;blockdev-del&quot;</span><span class="p">,</span>
     <span class="s2">&quot;arguments&quot;</span><span class="p">:</span> <span class="p">{</span> <span class="s2">&quot;node-name&quot;</span><span class="p">:</span> <span class="s2">&quot;node0&quot;</span> <span class="p">}</span>
   <span class="p">}</span>
<span class="o">&lt;-</span> <span class="p">{</span> <span class="s2">&quot;return&quot;</span><span class="p">:</span> <span class="p">{}</span> <span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="qapidoc-627">
<h3><code class="docutils literal notranslate"><span class="pre">BlockdevCreateOptionsFile</span></code> (Object)<a class="headerlink" href="#qapidoc-627" title="Permalink to this headline">¶</a></h3>
<p>Driver specific image creation options for file.</p>
<div class="section" id="qapidoc-625">
<h4>Members<a class="headerlink" href="#qapidoc-625" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">filename</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code></dt>
<dd>Filename for the new image file</dd>
<dt><code class="docutils literal notranslate"><span class="pre">size</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code></dt>
<dd>Size of the virtual disk in bytes</dd>
<dt><code class="docutils literal notranslate"><span class="pre">preallocation</span></code>: <code class="docutils literal notranslate"><span class="pre">PreallocMode</span></code> (optional)</dt>
<dd>Preallocation mode for the new image (default: off;
allowed values: off,
falloc (if defined CONFIG_POSIX_FALLOCATE),
full (if defined CONFIG_POSIX))</dd>
<dt><code class="docutils literal notranslate"><span class="pre">nocow</span></code>: <code class="docutils literal notranslate"><span class="pre">boolean</span></code> (optional)</dt>
<dd>Turn off copy-on-write (valid only on btrfs; default: off)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">extent-size-hint</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code> (optional)</dt>
<dd>Extent size hint to add to the image file; 0 for not
adding an extent size hint (default: 1 MB, since 5.1)</dd>
</dl>
</div>
<div class="section" id="qapidoc-626">
<h4>Since<a class="headerlink" href="#qapidoc-626" title="Permalink to this headline">¶</a></h4>
<p>2.12</p>
</div>
</div>
<div class="section" id="qapidoc-630">
<h3><code class="docutils literal notranslate"><span class="pre">BlockdevCreateOptionsGluster</span></code> (Object)<a class="headerlink" href="#qapidoc-630" title="Permalink to this headline">¶</a></h3>
<p>Driver specific image creation options for gluster.</p>
<div class="section" id="qapidoc-628">
<h4>Members<a class="headerlink" href="#qapidoc-628" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">location</span></code>: <code class="docutils literal notranslate"><span class="pre">BlockdevOptionsGluster</span></code></dt>
<dd>Where to store the new image file</dd>
<dt><code class="docutils literal notranslate"><span class="pre">size</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code></dt>
<dd>Size of the virtual disk in bytes</dd>
<dt><code class="docutils literal notranslate"><span class="pre">preallocation</span></code>: <code class="docutils literal notranslate"><span class="pre">PreallocMode</span></code> (optional)</dt>
<dd>Preallocation mode for the new image (default: off;
allowed values: off,
falloc (if defined CONFIG_GLUSTERFS_FALLOCATE),
full (if defined CONFIG_GLUSTERFS_ZEROFILL))</dd>
</dl>
</div>
<div class="section" id="qapidoc-629">
<h4>Since<a class="headerlink" href="#qapidoc-629" title="Permalink to this headline">¶</a></h4>
<p>2.12</p>
</div>
</div>
<div class="section" id="qapidoc-633">
<h3><code class="docutils literal notranslate"><span class="pre">BlockdevCreateOptionsLUKS</span></code> (Object)<a class="headerlink" href="#qapidoc-633" title="Permalink to this headline">¶</a></h3>
<p>Driver specific image creation options for LUKS.</p>
<div class="section" id="qapidoc-631">
<h4>Members<a class="headerlink" href="#qapidoc-631" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">file</span></code>: <code class="docutils literal notranslate"><span class="pre">BlockdevRef</span></code></dt>
<dd>Node to create the image format on</dd>
<dt><code class="docutils literal notranslate"><span class="pre">size</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code></dt>
<dd>Size of the virtual disk in bytes</dd>
<dt><code class="docutils literal notranslate"><span class="pre">preallocation</span></code>: <code class="docutils literal notranslate"><span class="pre">PreallocMode</span></code> (optional)</dt>
<dd>Preallocation mode for the new image
(since: 4.2)
(default: off; allowed values: off, metadata, falloc, full)</dd>
<dt>The members of <code class="docutils literal notranslate"><span class="pre">QCryptoBlockCreateOptionsLUKS</span></code></dl>
</div>
<div class="section" id="qapidoc-632">
<h4>Since<a class="headerlink" href="#qapidoc-632" title="Permalink to this headline">¶</a></h4>
<p>2.12</p>
</div>
</div>
<div class="section" id="qapidoc-636">
<h3><code class="docutils literal notranslate"><span class="pre">BlockdevCreateOptionsNfs</span></code> (Object)<a class="headerlink" href="#qapidoc-636" title="Permalink to this headline">¶</a></h3>
<p>Driver specific image creation options for NFS.</p>
<div class="section" id="qapidoc-634">
<h4>Members<a class="headerlink" href="#qapidoc-634" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">location</span></code>: <code class="docutils literal notranslate"><span class="pre">BlockdevOptionsNfs</span></code></dt>
<dd>Where to store the new image file</dd>
<dt><code class="docutils literal notranslate"><span class="pre">size</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code></dt>
<dd>Size of the virtual disk in bytes</dd>
</dl>
</div>
<div class="section" id="qapidoc-635">
<h4>Since<a class="headerlink" href="#qapidoc-635" title="Permalink to this headline">¶</a></h4>
<p>2.12</p>
</div>
</div>
<div class="section" id="qapidoc-639">
<h3><code class="docutils literal notranslate"><span class="pre">BlockdevCreateOptionsParallels</span></code> (Object)<a class="headerlink" href="#qapidoc-639" title="Permalink to this headline">¶</a></h3>
<p>Driver specific image creation options for parallels.</p>
<div class="section" id="qapidoc-637">
<h4>Members<a class="headerlink" href="#qapidoc-637" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">file</span></code>: <code class="docutils literal notranslate"><span class="pre">BlockdevRef</span></code></dt>
<dd>Node to create the image format on</dd>
<dt><code class="docutils literal notranslate"><span class="pre">size</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code></dt>
<dd>Size of the virtual disk in bytes</dd>
<dt><code class="docutils literal notranslate"><span class="pre">cluster-size</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code> (optional)</dt>
<dd>Cluster size in bytes (default: 1 MB)</dd>
</dl>
</div>
<div class="section" id="qapidoc-638">
<h4>Since<a class="headerlink" href="#qapidoc-638" title="Permalink to this headline">¶</a></h4>
<p>2.12</p>
</div>
</div>
<div class="section" id="qapidoc-642">
<h3><code class="docutils literal notranslate"><span class="pre">BlockdevCreateOptionsQcow</span></code> (Object)<a class="headerlink" href="#qapidoc-642" title="Permalink to this headline">¶</a></h3>
<p>Driver specific image creation options for qcow.</p>
<div class="section" id="qapidoc-640">
<h4>Members<a class="headerlink" href="#qapidoc-640" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">file</span></code>: <code class="docutils literal notranslate"><span class="pre">BlockdevRef</span></code></dt>
<dd>Node to create the image format on</dd>
<dt><code class="docutils literal notranslate"><span class="pre">size</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code></dt>
<dd>Size of the virtual disk in bytes</dd>
<dt><code class="docutils literal notranslate"><span class="pre">backing-file</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code> (optional)</dt>
<dd>File name of the backing file if a backing file
should be used</dd>
<dt><code class="docutils literal notranslate"><span class="pre">encrypt</span></code>: <code class="docutils literal notranslate"><span class="pre">QCryptoBlockCreateOptions</span></code> (optional)</dt>
<dd>Encryption options if the image should be encrypted</dd>
</dl>
</div>
<div class="section" id="qapidoc-641">
<h4>Since<a class="headerlink" href="#qapidoc-641" title="Permalink to this headline">¶</a></h4>
<p>2.12</p>
</div>
</div>
<div class="section" id="qapidoc-645">
<h3><code class="docutils literal notranslate"><span class="pre">BlockdevQcow2Version</span></code> (Enum)<a class="headerlink" href="#qapidoc-645" title="Permalink to this headline">¶</a></h3>
<div class="section" id="qapidoc-643">
<h4>Values<a class="headerlink" href="#qapidoc-643" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">v2</span></code></dt>
<dd>The original QCOW2 format as introduced in qemu 0.10 (version 2)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">v3</span></code></dt>
<dd>The extended QCOW2 format as introduced in qemu 1.1 (version 3)</dd>
</dl>
</div>
<div class="section" id="qapidoc-644">
<h4>Since<a class="headerlink" href="#qapidoc-644" title="Permalink to this headline">¶</a></h4>
<p>2.12</p>
</div>
</div>
<div class="section" id="qapidoc-648">
<h3><code class="docutils literal notranslate"><span class="pre">Qcow2CompressionType</span></code> (Enum)<a class="headerlink" href="#qapidoc-648" title="Permalink to this headline">¶</a></h3>
<p>Compression type used in qcow2 image file</p>
<div class="section" id="qapidoc-646">
<h4>Values<a class="headerlink" href="#qapidoc-646" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">zlib</span></code></dt>
<dd>zlib compression, see &lt;<a class="reference external" href="http://zlib.net/">http://zlib.net/</a>&gt;</dd>
<dt><code class="docutils literal notranslate"><span class="pre">zstd</span></code> (<strong>If: </strong><code class="docutils literal notranslate"><span class="pre">defined(CONFIG_ZSTD)</span></code>)</dt>
<dd>zstd compression, see &lt;<a class="reference external" href="http://github.com/facebook/zstd">http://github.com/facebook/zstd</a>&gt;</dd>
</dl>
</div>
<div class="section" id="qapidoc-647">
<h4>Since<a class="headerlink" href="#qapidoc-647" title="Permalink to this headline">¶</a></h4>
<p>5.1</p>
</div>
</div>
<div class="section" id="qapidoc-651">
<h3><code class="docutils literal notranslate"><span class="pre">BlockdevCreateOptionsQcow2</span></code> (Object)<a class="headerlink" href="#qapidoc-651" title="Permalink to this headline">¶</a></h3>
<p>Driver specific image creation options for qcow2.</p>
<div class="section" id="qapidoc-649">
<h4>Members<a class="headerlink" href="#qapidoc-649" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">file</span></code>: <code class="docutils literal notranslate"><span class="pre">BlockdevRef</span></code></dt>
<dd>Node to create the image format on</dd>
<dt><code class="docutils literal notranslate"><span class="pre">data-file</span></code>: <code class="docutils literal notranslate"><span class="pre">BlockdevRef</span></code> (optional)</dt>
<dd>Node to use as an external data file in which all guest
data is stored so that only metadata remains in the qcow2
file (since: 4.0)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">data-file-raw</span></code>: <code class="docutils literal notranslate"><span class="pre">boolean</span></code> (optional)</dt>
<dd>True if the external data file must stay valid as a
standalone (read-only) raw image without looking at qcow2
metadata (default: false; since: 4.0)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">extended-l2</span></code>: <code class="docutils literal notranslate"><span class="pre">boolean</span></code> (optional)</dt>
<dd>True to make the image have extended L2 entries
(default: false; since 5.2)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">size</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code></dt>
<dd>Size of the virtual disk in bytes</dd>
<dt><code class="docutils literal notranslate"><span class="pre">version</span></code>: <code class="docutils literal notranslate"><span class="pre">BlockdevQcow2Version</span></code> (optional)</dt>
<dd>Compatibility level (default: v3)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">backing-file</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code> (optional)</dt>
<dd>File name of the backing file if a backing file
should be used</dd>
<dt><code class="docutils literal notranslate"><span class="pre">backing-fmt</span></code>: <code class="docutils literal notranslate"><span class="pre">BlockdevDriver</span></code> (optional)</dt>
<dd>Name of the block driver to use for the backing file</dd>
<dt><code class="docutils literal notranslate"><span class="pre">encrypt</span></code>: <code class="docutils literal notranslate"><span class="pre">QCryptoBlockCreateOptions</span></code> (optional)</dt>
<dd>Encryption options if the image should be encrypted</dd>
<dt><code class="docutils literal notranslate"><span class="pre">cluster-size</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code> (optional)</dt>
<dd>qcow2 cluster size in bytes (default: 65536)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">preallocation</span></code>: <code class="docutils literal notranslate"><span class="pre">PreallocMode</span></code> (optional)</dt>
<dd>Preallocation mode for the new image (default: off;
allowed values: off, falloc, full, metadata)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">lazy-refcounts</span></code>: <code class="docutils literal notranslate"><span class="pre">boolean</span></code> (optional)</dt>
<dd>True if refcounts may be updated lazily (default: off)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">refcount-bits</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code> (optional)</dt>
<dd>Width of reference counts in bits (default: 16)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">compression-type</span></code>: <code class="docutils literal notranslate"><span class="pre">Qcow2CompressionType</span></code> (optional)</dt>
<dd>The image cluster compression method
(default: zlib, since 5.1)</dd>
</dl>
</div>
<div class="section" id="qapidoc-650">
<h4>Since<a class="headerlink" href="#qapidoc-650" title="Permalink to this headline">¶</a></h4>
<p>2.12</p>
</div>
</div>
<div class="section" id="qapidoc-654">
<h3><code class="docutils literal notranslate"><span class="pre">BlockdevCreateOptionsQed</span></code> (Object)<a class="headerlink" href="#qapidoc-654" title="Permalink to this headline">¶</a></h3>
<p>Driver specific image creation options for qed.</p>
<div class="section" id="qapidoc-652">
<h4>Members<a class="headerlink" href="#qapidoc-652" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">file</span></code>: <code class="docutils literal notranslate"><span class="pre">BlockdevRef</span></code></dt>
<dd>Node to create the image format on</dd>
<dt><code class="docutils literal notranslate"><span class="pre">size</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code></dt>
<dd>Size of the virtual disk in bytes</dd>
<dt><code class="docutils literal notranslate"><span class="pre">backing-file</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code> (optional)</dt>
<dd>File name of the backing file if a backing file
should be used</dd>
<dt><code class="docutils literal notranslate"><span class="pre">backing-fmt</span></code>: <code class="docutils literal notranslate"><span class="pre">BlockdevDriver</span></code> (optional)</dt>
<dd>Name of the block driver to use for the backing file</dd>
<dt><code class="docutils literal notranslate"><span class="pre">cluster-size</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code> (optional)</dt>
<dd>Cluster size in bytes (default: 65536)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">table-size</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code> (optional)</dt>
<dd>L1/L2 table size (in clusters)</dd>
</dl>
</div>
<div class="section" id="qapidoc-653">
<h4>Since<a class="headerlink" href="#qapidoc-653" title="Permalink to this headline">¶</a></h4>
<p>2.12</p>
</div>
</div>
<div class="section" id="qapidoc-657">
<h3><code class="docutils literal notranslate"><span class="pre">BlockdevCreateOptionsRbd</span></code> (Object)<a class="headerlink" href="#qapidoc-657" title="Permalink to this headline">¶</a></h3>
<p>Driver specific image creation options for rbd/Ceph.</p>
<div class="section" id="qapidoc-655">
<h4>Members<a class="headerlink" href="#qapidoc-655" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">location</span></code>: <code class="docutils literal notranslate"><span class="pre">BlockdevOptionsRbd</span></code></dt>
<dd>Where to store the new image file. This location cannot
point to a snapshot.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">size</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code></dt>
<dd>Size of the virtual disk in bytes</dd>
<dt><code class="docutils literal notranslate"><span class="pre">cluster-size</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code> (optional)</dt>
<dd>RBD object size</dd>
</dl>
</div>
<div class="section" id="qapidoc-656">
<h4>Since<a class="headerlink" href="#qapidoc-656" title="Permalink to this headline">¶</a></h4>
<p>2.12</p>
</div>
</div>
<div class="section" id="qapidoc-660">
<h3><code class="docutils literal notranslate"><span class="pre">BlockdevVmdkSubformat</span></code> (Enum)<a class="headerlink" href="#qapidoc-660" title="Permalink to this headline">¶</a></h3>
<p>Subformat options for VMDK images</p>
<div class="section" id="qapidoc-658">
<h4>Values<a class="headerlink" href="#qapidoc-658" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">monolithicSparse</span></code></dt>
<dd>Single file image with sparse cluster allocation</dd>
<dt><code class="docutils literal notranslate"><span class="pre">monolithicFlat</span></code></dt>
<dd>Single flat data image and a descriptor file</dd>
<dt><code class="docutils literal notranslate"><span class="pre">twoGbMaxExtentSparse</span></code></dt>
<dd>Data is split into 2GB (per virtual LBA) sparse extent
files, in addition to a descriptor file</dd>
<dt><code class="docutils literal notranslate"><span class="pre">twoGbMaxExtentFlat</span></code></dt>
<dd>Data is split into 2GB (per virtual LBA) flat extent
files, in addition to a descriptor file</dd>
<dt><code class="docutils literal notranslate"><span class="pre">streamOptimized</span></code></dt>
<dd>Single file image sparse cluster allocation, optimized
for streaming over network.</dd>
</dl>
</div>
<div class="section" id="qapidoc-659">
<h4>Since<a class="headerlink" href="#qapidoc-659" title="Permalink to this headline">¶</a></h4>
<p>4.0</p>
</div>
</div>
<div class="section" id="qapidoc-663">
<h3><code class="docutils literal notranslate"><span class="pre">BlockdevVmdkAdapterType</span></code> (Enum)<a class="headerlink" href="#qapidoc-663" title="Permalink to this headline">¶</a></h3>
<p>Adapter type info for VMDK images</p>
<div class="section" id="qapidoc-661">
<h4>Values<a class="headerlink" href="#qapidoc-661" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">ide</span></code></dt>
<dd>Not documented</dd>
<dt><code class="docutils literal notranslate"><span class="pre">buslogic</span></code></dt>
<dd>Not documented</dd>
<dt><code class="docutils literal notranslate"><span class="pre">lsilogic</span></code></dt>
<dd>Not documented</dd>
<dt><code class="docutils literal notranslate"><span class="pre">legacyESX</span></code></dt>
<dd>Not documented</dd>
</dl>
</div>
<div class="section" id="qapidoc-662">
<h4>Since<a class="headerlink" href="#qapidoc-662" title="Permalink to this headline">¶</a></h4>
<p>4.0</p>
</div>
</div>
<div class="section" id="qapidoc-666">
<h3><code class="docutils literal notranslate"><span class="pre">BlockdevCreateOptionsVmdk</span></code> (Object)<a class="headerlink" href="#qapidoc-666" title="Permalink to this headline">¶</a></h3>
<p>Driver specific image creation options for VMDK.</p>
<div class="section" id="qapidoc-664">
<h4>Members<a class="headerlink" href="#qapidoc-664" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">file</span></code>: <code class="docutils literal notranslate"><span class="pre">BlockdevRef</span></code></dt>
<dd>Where to store the new image file. This refers to the image
file for monolithcSparse and streamOptimized format, or the
descriptor file for other formats.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">size</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code></dt>
<dd>Size of the virtual disk in bytes</dd>
<dt><code class="docutils literal notranslate"><span class="pre">extents</span></code>: <code class="docutils literal notranslate"><span class="pre">array</span> <span class="pre">of</span> <span class="pre">BlockdevRef</span></code> (optional)</dt>
<dd>Where to store the data extents. Required for monolithcFlat,
twoGbMaxExtentSparse and twoGbMaxExtentFlat formats. For
monolithicFlat, only one entry is required; for
twoGbMaxExtent* formats, the number of entries required is
calculated as extent_number = virtual_size / 2GB. Providing
more extents than will be used is an error.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">subformat</span></code>: <code class="docutils literal notranslate"><span class="pre">BlockdevVmdkSubformat</span></code> (optional)</dt>
<dd>The subformat of the VMDK image. Default: “monolithicSparse”.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">backing-file</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code> (optional)</dt>
<dd>The path of backing file. Default: no backing file is used.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">adapter-type</span></code>: <code class="docutils literal notranslate"><span class="pre">BlockdevVmdkAdapterType</span></code> (optional)</dt>
<dd>The adapter type used to fill in the descriptor. Default: ide.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">hwversion</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code> (optional)</dt>
<dd>Hardware version. The meaningful options are “4” or “6”.
Default: “4”.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">zeroed-grain</span></code>: <code class="docutils literal notranslate"><span class="pre">boolean</span></code> (optional)</dt>
<dd>Whether to enable zeroed-grain feature for sparse subformats.
Default: false.</dd>
</dl>
</div>
<div class="section" id="qapidoc-665">
<h4>Since<a class="headerlink" href="#qapidoc-665" title="Permalink to this headline">¶</a></h4>
<p>4.0</p>
</div>
</div>
<div class="section" id="qapidoc-669">
<h3><code class="docutils literal notranslate"><span class="pre">SheepdogRedundancyType</span></code> (Enum)<a class="headerlink" href="#qapidoc-669" title="Permalink to this headline">¶</a></h3>
<div class="section" id="qapidoc-667">
<h4>Values<a class="headerlink" href="#qapidoc-667" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">full</span></code></dt>
<dd>Create a fully replicated vdi with x copies</dd>
<dt><code class="docutils literal notranslate"><span class="pre">erasure-coded</span></code></dt>
<dd>Create an erasure coded vdi with x data strips and
y parity strips</dd>
</dl>
</div>
<div class="section" id="qapidoc-668">
<h4>Since<a class="headerlink" href="#qapidoc-668" title="Permalink to this headline">¶</a></h4>
<p>2.12</p>
</div>
</div>
<div class="section" id="qapidoc-672">
<h3><code class="docutils literal notranslate"><span class="pre">SheepdogRedundancyFull</span></code> (Object)<a class="headerlink" href="#qapidoc-672" title="Permalink to this headline">¶</a></h3>
<div class="section" id="qapidoc-670">
<h4>Members<a class="headerlink" href="#qapidoc-670" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">copies</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code></dt>
<dd>Number of copies to use (between 1 and 31)</dd>
</dl>
</div>
<div class="section" id="qapidoc-671">
<h4>Since<a class="headerlink" href="#qapidoc-671" title="Permalink to this headline">¶</a></h4>
<p>2.12</p>
</div>
</div>
<div class="section" id="qapidoc-675">
<h3><code class="docutils literal notranslate"><span class="pre">SheepdogRedundancyErasureCoded</span></code> (Object)<a class="headerlink" href="#qapidoc-675" title="Permalink to this headline">¶</a></h3>
<div class="section" id="qapidoc-673">
<h4>Members<a class="headerlink" href="#qapidoc-673" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">data-strips</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code></dt>
<dd>Number of data strips to use (one of {2,4,8,16})</dd>
<dt><code class="docutils literal notranslate"><span class="pre">parity-strips</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code></dt>
<dd>Number of parity strips to use (between 1 and 15)</dd>
</dl>
</div>
<div class="section" id="qapidoc-674">
<h4>Since<a class="headerlink" href="#qapidoc-674" title="Permalink to this headline">¶</a></h4>
<p>2.12</p>
</div>
</div>
<div class="section" id="qapidoc-678">
<h3><code class="docutils literal notranslate"><span class="pre">SheepdogRedundancy</span></code> (Object)<a class="headerlink" href="#qapidoc-678" title="Permalink to this headline">¶</a></h3>
<div class="section" id="qapidoc-676">
<h4>Members<a class="headerlink" href="#qapidoc-676" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">type</span></code>: <code class="docutils literal notranslate"><span class="pre">SheepdogRedundancyType</span></code></dt>
<dd>Not documented</dd>
<dt>The members of <code class="docutils literal notranslate"><span class="pre">SheepdogRedundancyFull</span></code> when <code class="docutils literal notranslate"><span class="pre">type</span></code> is <code class="docutils literal notranslate"><span class="pre">&quot;full&quot;</span></code><dt>The members of <code class="docutils literal notranslate"><span class="pre">SheepdogRedundancyErasureCoded</span></code> when <code class="docutils literal notranslate"><span class="pre">type</span></code> is <code class="docutils literal notranslate"><span class="pre">&quot;erasure-coded&quot;</span></code></dl>
</div>
<div class="section" id="qapidoc-677">
<h4>Since<a class="headerlink" href="#qapidoc-677" title="Permalink to this headline">¶</a></h4>
<p>2.12</p>
</div>
</div>
<div class="section" id="qapidoc-681">
<h3><code class="docutils literal notranslate"><span class="pre">BlockdevCreateOptionsSheepdog</span></code> (Object)<a class="headerlink" href="#qapidoc-681" title="Permalink to this headline">¶</a></h3>
<p>Driver specific image creation options for Sheepdog.</p>
<div class="section" id="qapidoc-679">
<h4>Members<a class="headerlink" href="#qapidoc-679" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">location</span></code>: <code class="docutils literal notranslate"><span class="pre">BlockdevOptionsSheepdog</span></code></dt>
<dd>Where to store the new image file</dd>
<dt><code class="docutils literal notranslate"><span class="pre">size</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code></dt>
<dd>Size of the virtual disk in bytes</dd>
<dt><code class="docutils literal notranslate"><span class="pre">backing-file</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code> (optional)</dt>
<dd>File name of a base image</dd>
<dt><code class="docutils literal notranslate"><span class="pre">preallocation</span></code>: <code class="docutils literal notranslate"><span class="pre">PreallocMode</span></code> (optional)</dt>
<dd>Preallocation mode for the new image (default: off;
allowed values: off, full)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">redundancy</span></code>: <code class="docutils literal notranslate"><span class="pre">SheepdogRedundancy</span></code> (optional)</dt>
<dd>Redundancy of the image</dd>
<dt><code class="docutils literal notranslate"><span class="pre">object-size</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code> (optional)</dt>
<dd>Object size of the image</dd>
</dl>
</div>
<div class="section" id="qapidoc-680">
<h4>Since<a class="headerlink" href="#qapidoc-680" title="Permalink to this headline">¶</a></h4>
<p>2.12</p>
</div>
</div>
<div class="section" id="qapidoc-684">
<h3><code class="docutils literal notranslate"><span class="pre">BlockdevCreateOptionsSsh</span></code> (Object)<a class="headerlink" href="#qapidoc-684" title="Permalink to this headline">¶</a></h3>
<p>Driver specific image creation options for SSH.</p>
<div class="section" id="qapidoc-682">
<h4>Members<a class="headerlink" href="#qapidoc-682" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">location</span></code>: <code class="docutils literal notranslate"><span class="pre">BlockdevOptionsSsh</span></code></dt>
<dd>Where to store the new image file</dd>
<dt><code class="docutils literal notranslate"><span class="pre">size</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code></dt>
<dd>Size of the virtual disk in bytes</dd>
</dl>
</div>
<div class="section" id="qapidoc-683">
<h4>Since<a class="headerlink" href="#qapidoc-683" title="Permalink to this headline">¶</a></h4>
<p>2.12</p>
</div>
</div>
<div class="section" id="qapidoc-687">
<h3><code class="docutils literal notranslate"><span class="pre">BlockdevCreateOptionsVdi</span></code> (Object)<a class="headerlink" href="#qapidoc-687" title="Permalink to this headline">¶</a></h3>
<p>Driver specific image creation options for VDI.</p>
<div class="section" id="qapidoc-685">
<h4>Members<a class="headerlink" href="#qapidoc-685" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">file</span></code>: <code class="docutils literal notranslate"><span class="pre">BlockdevRef</span></code></dt>
<dd>Node to create the image format on</dd>
<dt><code class="docutils literal notranslate"><span class="pre">size</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code></dt>
<dd>Size of the virtual disk in bytes</dd>
<dt><code class="docutils literal notranslate"><span class="pre">preallocation</span></code>: <code class="docutils literal notranslate"><span class="pre">PreallocMode</span></code> (optional)</dt>
<dd>Preallocation mode for the new image (default: off;
allowed values: off, metadata)</dd>
</dl>
</div>
<div class="section" id="qapidoc-686">
<h4>Since<a class="headerlink" href="#qapidoc-686" title="Permalink to this headline">¶</a></h4>
<p>2.12</p>
</div>
</div>
<div class="section" id="qapidoc-690">
<h3><code class="docutils literal notranslate"><span class="pre">BlockdevVhdxSubformat</span></code> (Enum)<a class="headerlink" href="#qapidoc-690" title="Permalink to this headline">¶</a></h3>
<div class="section" id="qapidoc-688">
<h4>Values<a class="headerlink" href="#qapidoc-688" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">dynamic</span></code></dt>
<dd>Growing image file</dd>
<dt><code class="docutils literal notranslate"><span class="pre">fixed</span></code></dt>
<dd>Preallocated fixed-size image file</dd>
</dl>
</div>
<div class="section" id="qapidoc-689">
<h4>Since<a class="headerlink" href="#qapidoc-689" title="Permalink to this headline">¶</a></h4>
<p>2.12</p>
</div>
</div>
<div class="section" id="qapidoc-693">
<h3><code class="docutils literal notranslate"><span class="pre">BlockdevCreateOptionsVhdx</span></code> (Object)<a class="headerlink" href="#qapidoc-693" title="Permalink to this headline">¶</a></h3>
<p>Driver specific image creation options for vhdx.</p>
<div class="section" id="qapidoc-691">
<h4>Members<a class="headerlink" href="#qapidoc-691" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">file</span></code>: <code class="docutils literal notranslate"><span class="pre">BlockdevRef</span></code></dt>
<dd>Node to create the image format on</dd>
<dt><code class="docutils literal notranslate"><span class="pre">size</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code></dt>
<dd>Size of the virtual disk in bytes</dd>
<dt><code class="docutils literal notranslate"><span class="pre">log-size</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code> (optional)</dt>
<dd>Log size in bytes, must be a multiple of 1 MB
(default: 1 MB)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">block-size</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code> (optional)</dt>
<dd>Block size in bytes, must be a multiple of 1 MB and not
larger than 256 MB (default: automatically choose a block
size depending on the image size)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">subformat</span></code>: <code class="docutils literal notranslate"><span class="pre">BlockdevVhdxSubformat</span></code> (optional)</dt>
<dd>vhdx subformat (default: dynamic)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">block-state-zero</span></code>: <code class="docutils literal notranslate"><span class="pre">boolean</span></code> (optional)</dt>
<dd>Force use of payload blocks of type ‘ZERO’. Non-standard,
but default.  Do not set to ‘off’ when using ‘qemu-img
convert’ with subformat=dynamic.</dd>
</dl>
</div>
<div class="section" id="qapidoc-692">
<h4>Since<a class="headerlink" href="#qapidoc-692" title="Permalink to this headline">¶</a></h4>
<p>2.12</p>
</div>
</div>
<div class="section" id="qapidoc-696">
<h3><code class="docutils literal notranslate"><span class="pre">BlockdevVpcSubformat</span></code> (Enum)<a class="headerlink" href="#qapidoc-696" title="Permalink to this headline">¶</a></h3>
<div class="section" id="qapidoc-694">
<h4>Values<a class="headerlink" href="#qapidoc-694" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">dynamic</span></code></dt>
<dd>Growing image file</dd>
<dt><code class="docutils literal notranslate"><span class="pre">fixed</span></code></dt>
<dd>Preallocated fixed-size image file</dd>
</dl>
</div>
<div class="section" id="qapidoc-695">
<h4>Since<a class="headerlink" href="#qapidoc-695" title="Permalink to this headline">¶</a></h4>
<p>2.12</p>
</div>
</div>
<div class="section" id="qapidoc-699">
<h3><code class="docutils literal notranslate"><span class="pre">BlockdevCreateOptionsVpc</span></code> (Object)<a class="headerlink" href="#qapidoc-699" title="Permalink to this headline">¶</a></h3>
<p>Driver specific image creation options for vpc (VHD).</p>
<div class="section" id="qapidoc-697">
<h4>Members<a class="headerlink" href="#qapidoc-697" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">file</span></code>: <code class="docutils literal notranslate"><span class="pre">BlockdevRef</span></code></dt>
<dd>Node to create the image format on</dd>
<dt><code class="docutils literal notranslate"><span class="pre">size</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code></dt>
<dd>Size of the virtual disk in bytes</dd>
<dt><code class="docutils literal notranslate"><span class="pre">subformat</span></code>: <code class="docutils literal notranslate"><span class="pre">BlockdevVpcSubformat</span></code> (optional)</dt>
<dd>vhdx subformat (default: dynamic)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">force-size</span></code>: <code class="docutils literal notranslate"><span class="pre">boolean</span></code> (optional)</dt>
<dd>Force use of the exact byte size instead of rounding to the
next size that can be represented in CHS geometry
(default: false)</dd>
</dl>
</div>
<div class="section" id="qapidoc-698">
<h4>Since<a class="headerlink" href="#qapidoc-698" title="Permalink to this headline">¶</a></h4>
<p>2.12</p>
</div>
</div>
<div class="section" id="qapidoc-702">
<h3><code class="docutils literal notranslate"><span class="pre">BlockdevCreateOptions</span></code> (Object)<a class="headerlink" href="#qapidoc-702" title="Permalink to this headline">¶</a></h3>
<p>Options for creating an image format on a given node.</p>
<div class="section" id="qapidoc-700">
<h4>Members<a class="headerlink" href="#qapidoc-700" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">driver</span></code>: <code class="docutils literal notranslate"><span class="pre">BlockdevDriver</span></code></dt>
<dd>block driver to create the image format</dd>
<dt>The members of <code class="docutils literal notranslate"><span class="pre">BlockdevCreateOptionsFile</span></code> when <code class="docutils literal notranslate"><span class="pre">driver</span></code> is <code class="docutils literal notranslate"><span class="pre">&quot;file&quot;</span></code><dt>The members of <code class="docutils literal notranslate"><span class="pre">BlockdevCreateOptionsGluster</span></code> when <code class="docutils literal notranslate"><span class="pre">driver</span></code> is <code class="docutils literal notranslate"><span class="pre">&quot;gluster&quot;</span></code><dt>The members of <code class="docutils literal notranslate"><span class="pre">BlockdevCreateOptionsLUKS</span></code> when <code class="docutils literal notranslate"><span class="pre">driver</span></code> is <code class="docutils literal notranslate"><span class="pre">&quot;luks&quot;</span></code><dt>The members of <code class="docutils literal notranslate"><span class="pre">BlockdevCreateOptionsNfs</span></code> when <code class="docutils literal notranslate"><span class="pre">driver</span></code> is <code class="docutils literal notranslate"><span class="pre">&quot;nfs&quot;</span></code><dt>The members of <code class="docutils literal notranslate"><span class="pre">BlockdevCreateOptionsParallels</span></code> when <code class="docutils literal notranslate"><span class="pre">driver</span></code> is <code class="docutils literal notranslate"><span class="pre">&quot;parallels&quot;</span></code><dt>The members of <code class="docutils literal notranslate"><span class="pre">BlockdevCreateOptionsQcow</span></code> when <code class="docutils literal notranslate"><span class="pre">driver</span></code> is <code class="docutils literal notranslate"><span class="pre">&quot;qcow&quot;</span></code><dt>The members of <code class="docutils literal notranslate"><span class="pre">BlockdevCreateOptionsQcow2</span></code> when <code class="docutils literal notranslate"><span class="pre">driver</span></code> is <code class="docutils literal notranslate"><span class="pre">&quot;qcow2&quot;</span></code><dt>The members of <code class="docutils literal notranslate"><span class="pre">BlockdevCreateOptionsQed</span></code> when <code class="docutils literal notranslate"><span class="pre">driver</span></code> is <code class="docutils literal notranslate"><span class="pre">&quot;qed&quot;</span></code><dt>The members of <code class="docutils literal notranslate"><span class="pre">BlockdevCreateOptionsRbd</span></code> when <code class="docutils literal notranslate"><span class="pre">driver</span></code> is <code class="docutils literal notranslate"><span class="pre">&quot;rbd&quot;</span></code><dt>The members of <code class="docutils literal notranslate"><span class="pre">BlockdevCreateOptionsSheepdog</span></code> when <code class="docutils literal notranslate"><span class="pre">driver</span></code> is <code class="docutils literal notranslate"><span class="pre">&quot;sheepdog&quot;</span></code><dt>The members of <code class="docutils literal notranslate"><span class="pre">BlockdevCreateOptionsSsh</span></code> when <code class="docutils literal notranslate"><span class="pre">driver</span></code> is <code class="docutils literal notranslate"><span class="pre">&quot;ssh&quot;</span></code><dt>The members of <code class="docutils literal notranslate"><span class="pre">BlockdevCreateOptionsVdi</span></code> when <code class="docutils literal notranslate"><span class="pre">driver</span></code> is <code class="docutils literal notranslate"><span class="pre">&quot;vdi&quot;</span></code><dt>The members of <code class="docutils literal notranslate"><span class="pre">BlockdevCreateOptionsVhdx</span></code> when <code class="docutils literal notranslate"><span class="pre">driver</span></code> is <code class="docutils literal notranslate"><span class="pre">&quot;vhdx&quot;</span></code><dt>The members of <code class="docutils literal notranslate"><span class="pre">BlockdevCreateOptionsVmdk</span></code> when <code class="docutils literal notranslate"><span class="pre">driver</span></code> is <code class="docutils literal notranslate"><span class="pre">&quot;vmdk&quot;</span></code><dt>The members of <code class="docutils literal notranslate"><span class="pre">BlockdevCreateOptionsVpc</span></code> when <code class="docutils literal notranslate"><span class="pre">driver</span></code> is <code class="docutils literal notranslate"><span class="pre">&quot;vpc&quot;</span></code></dl>
</div>
<div class="section" id="qapidoc-701">
<h4>Since<a class="headerlink" href="#qapidoc-701" title="Permalink to this headline">¶</a></h4>
<p>2.12</p>
</div>
</div>
<div class="section" id="qapidoc-705">
<h3><code class="docutils literal notranslate"><span class="pre">blockdev-create</span></code> (Command)<a class="headerlink" href="#qapidoc-705" title="Permalink to this headline">¶</a></h3>
<p>Starts a job to create an image format on a given node. The job is
automatically finalized, but a manual job-dismiss is required.</p>
<div class="section" id="qapidoc-703">
<h4>Arguments<a class="headerlink" href="#qapidoc-703" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">job-id</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code></dt>
<dd>Identifier for the newly created job.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">options</span></code>: <code class="docutils literal notranslate"><span class="pre">BlockdevCreateOptions</span></code></dt>
<dd>Options for the image creation.</dd>
</dl>
</div>
<div class="section" id="qapidoc-704">
<h4>Since<a class="headerlink" href="#qapidoc-704" title="Permalink to this headline">¶</a></h4>
<p>3.0</p>
</div>
</div>
<div class="section" id="qapidoc-708">
<h3><code class="docutils literal notranslate"><span class="pre">BlockdevAmendOptionsLUKS</span></code> (Object)<a class="headerlink" href="#qapidoc-708" title="Permalink to this headline">¶</a></h3>
<p>Driver specific image amend options for LUKS.</p>
<div class="section" id="qapidoc-706">
<h4>Members<a class="headerlink" href="#qapidoc-706" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt>The members of <code class="docutils literal notranslate"><span class="pre">QCryptoBlockAmendOptionsLUKS</span></code></dl>
</div>
<div class="section" id="qapidoc-707">
<h4>Since<a class="headerlink" href="#qapidoc-707" title="Permalink to this headline">¶</a></h4>
<p>5.1</p>
</div>
</div>
<div class="section" id="qapidoc-711">
<h3><code class="docutils literal notranslate"><span class="pre">BlockdevAmendOptionsQcow2</span></code> (Object)<a class="headerlink" href="#qapidoc-711" title="Permalink to this headline">¶</a></h3>
<p>Driver specific image amend options for qcow2.
For now, only encryption options can be amended</p>
<p><code class="docutils literal notranslate"><span class="pre">encrypt</span></code>          Encryption options to be amended</p>
<div class="section" id="qapidoc-709">
<h4>Members<a class="headerlink" href="#qapidoc-709" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">encrypt</span></code>: <code class="docutils literal notranslate"><span class="pre">QCryptoBlockAmendOptions</span></code> (optional)</dt>
<dd>Not documented</dd>
</dl>
</div>
<div class="section" id="qapidoc-710">
<h4>Since<a class="headerlink" href="#qapidoc-710" title="Permalink to this headline">¶</a></h4>
<p>5.1</p>
</div>
</div>
<div class="section" id="qapidoc-714">
<h3><code class="docutils literal notranslate"><span class="pre">BlockdevAmendOptions</span></code> (Object)<a class="headerlink" href="#qapidoc-714" title="Permalink to this headline">¶</a></h3>
<p>Options for amending an image format</p>
<div class="section" id="qapidoc-712">
<h4>Members<a class="headerlink" href="#qapidoc-712" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">driver</span></code>: <code class="docutils literal notranslate"><span class="pre">BlockdevDriver</span></code></dt>
<dd>Block driver of the node to amend.</dd>
<dt>The members of <code class="docutils literal notranslate"><span class="pre">BlockdevAmendOptionsLUKS</span></code> when <code class="docutils literal notranslate"><span class="pre">driver</span></code> is <code class="docutils literal notranslate"><span class="pre">&quot;luks&quot;</span></code><dt>The members of <code class="docutils literal notranslate"><span class="pre">BlockdevAmendOptionsQcow2</span></code> when <code class="docutils literal notranslate"><span class="pre">driver</span></code> is <code class="docutils literal notranslate"><span class="pre">&quot;qcow2&quot;</span></code></dl>
</div>
<div class="section" id="qapidoc-713">
<h4>Since<a class="headerlink" href="#qapidoc-713" title="Permalink to this headline">¶</a></h4>
<p>5.1</p>
</div>
</div>
<div class="section" id="qapidoc-717">
<h3><code class="docutils literal notranslate"><span class="pre">x-blockdev-amend</span></code> (Command)<a class="headerlink" href="#qapidoc-717" title="Permalink to this headline">¶</a></h3>
<p>Starts a job to amend format specific options of an existing open block device
The job is automatically finalized, but a manual job-dismiss is required.</p>
<div class="section" id="qapidoc-715">
<h4>Arguments<a class="headerlink" href="#qapidoc-715" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">job-id</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code></dt>
<dd>Identifier for the newly created job.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">node-name</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code></dt>
<dd>Name of the block node to work on</dd>
<dt><code class="docutils literal notranslate"><span class="pre">options</span></code>: <code class="docutils literal notranslate"><span class="pre">BlockdevAmendOptions</span></code></dt>
<dd>Options (driver specific)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">force</span></code>: <code class="docutils literal notranslate"><span class="pre">boolean</span></code> (optional)</dt>
<dd>Allow unsafe operations, format specific
For luks that allows erase of the last active keyslot
(permanent loss of data),
and replacement of an active keyslot
(possible loss of data if IO error happens)</dd>
</dl>
</div>
<div class="section" id="qapidoc-716">
<h4>Since<a class="headerlink" href="#qapidoc-716" title="Permalink to this headline">¶</a></h4>
<p>5.1</p>
</div>
</div>
<div class="section" id="qapidoc-720">
<h3><code class="docutils literal notranslate"><span class="pre">BlockErrorAction</span></code> (Enum)<a class="headerlink" href="#qapidoc-720" title="Permalink to this headline">¶</a></h3>
<p>An enumeration of action that has been taken when a DISK I/O occurs</p>
<div class="section" id="qapidoc-718">
<h4>Values<a class="headerlink" href="#qapidoc-718" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">ignore</span></code></dt>
<dd>error has been ignored</dd>
<dt><code class="docutils literal notranslate"><span class="pre">report</span></code></dt>
<dd>error has been reported to the device</dd>
<dt><code class="docutils literal notranslate"><span class="pre">stop</span></code></dt>
<dd>error caused VM to be stopped</dd>
</dl>
</div>
<div class="section" id="qapidoc-719">
<h4>Since<a class="headerlink" href="#qapidoc-719" title="Permalink to this headline">¶</a></h4>
<p>2.1</p>
</div>
</div>
<div class="section" id="qapidoc-725">
<h3><code class="docutils literal notranslate"><span class="pre">BLOCK_IMAGE_CORRUPTED</span></code> (Event)<a class="headerlink" href="#qapidoc-725" title="Permalink to this headline">¶</a></h3>
<p>Emitted when a disk image is being marked corrupt. The image can be
identified by its device or node name. The ‘device’ field is always
present for compatibility reasons, but it can be empty (“”) if the
image does not have a device name associated.</p>
<div class="section" id="qapidoc-721">
<h4>Arguments<a class="headerlink" href="#qapidoc-721" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">device</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code></dt>
<dd>device name. This is always present for compatibility
reasons, but it can be empty (“”) if the image does not
have a device name associated.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">node-name</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code> (optional)</dt>
<dd>node name (Since: 2.4)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">msg</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code></dt>
<dd>informative message for human consumption, such as the kind of
corruption being detected. It should not be parsed by machine as it is
not guaranteed to be stable</dd>
<dt><code class="docutils literal notranslate"><span class="pre">offset</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code> (optional)</dt>
<dd>if the corruption resulted from an image access, this is
the host’s access offset into the image</dd>
<dt><code class="docutils literal notranslate"><span class="pre">size</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code> (optional)</dt>
<dd>if the corruption resulted from an image access, this is
the access size</dd>
<dt><code class="docutils literal notranslate"><span class="pre">fatal</span></code>: <code class="docutils literal notranslate"><span class="pre">boolean</span></code></dt>
<dd>if set, the image is marked corrupt and therefore unusable after this
event and must be repaired (Since 2.2; before, every
BLOCK_IMAGE_CORRUPTED event was fatal)</dd>
</dl>
</div>
<div class="section" id="qapidoc-722">
<h4>Note<a class="headerlink" href="#qapidoc-722" title="Permalink to this headline">¶</a></h4>
<p>If action is “stop”, a STOP event will eventually follow the
BLOCK_IO_ERROR event.</p>
</div>
<div class="section" id="qapidoc-723">
<h4>Example<a class="headerlink" href="#qapidoc-723" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;-</span> <span class="p">{</span> <span class="s2">&quot;event&quot;</span><span class="p">:</span> <span class="s2">&quot;BLOCK_IMAGE_CORRUPTED&quot;</span><span class="p">,</span>
     <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span> <span class="s2">&quot;device&quot;</span><span class="p">:</span> <span class="s2">&quot;ide0-hd0&quot;</span><span class="p">,</span> <span class="s2">&quot;node-name&quot;</span><span class="p">:</span> <span class="s2">&quot;node0&quot;</span><span class="p">,</span>
               <span class="s2">&quot;msg&quot;</span><span class="p">:</span> <span class="s2">&quot;Prevented active L1 table overwrite&quot;</span><span class="p">,</span> <span class="s2">&quot;offset&quot;</span><span class="p">:</span> <span class="mi">196608</span><span class="p">,</span>
               <span class="s2">&quot;size&quot;</span><span class="p">:</span> <span class="mi">65536</span> <span class="p">},</span>
     <span class="s2">&quot;timestamp&quot;</span><span class="p">:</span> <span class="p">{</span> <span class="s2">&quot;seconds&quot;</span><span class="p">:</span> <span class="mi">1378126126</span><span class="p">,</span> <span class="s2">&quot;microseconds&quot;</span><span class="p">:</span> <span class="mi">966463</span> <span class="p">}</span> <span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="qapidoc-724">
<h4>Since<a class="headerlink" href="#qapidoc-724" title="Permalink to this headline">¶</a></h4>
<p>1.7</p>
</div>
</div>
<div class="section" id="qapidoc-730">
<h3><code class="docutils literal notranslate"><span class="pre">BLOCK_IO_ERROR</span></code> (Event)<a class="headerlink" href="#qapidoc-730" title="Permalink to this headline">¶</a></h3>
<p>Emitted when a disk I/O error occurs</p>
<div class="section" id="qapidoc-726">
<h4>Arguments<a class="headerlink" href="#qapidoc-726" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">device</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code></dt>
<dd>device name. This is always present for compatibility
reasons, but it can be empty (“”) if the image does not
have a device name associated.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">node-name</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code> (optional)</dt>
<dd>node name. Note that errors may be reported for the root node
that is directly attached to a guest device rather than for the
node where the error occurred. The node name is not present if
the drive is empty. (Since: 2.8)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">operation</span></code>: <code class="docutils literal notranslate"><span class="pre">IoOperationType</span></code></dt>
<dd>I/O operation</dd>
<dt><code class="docutils literal notranslate"><span class="pre">action</span></code>: <code class="docutils literal notranslate"><span class="pre">BlockErrorAction</span></code></dt>
<dd>action that has been taken</dd>
<dt><code class="docutils literal notranslate"><span class="pre">nospace</span></code>: <code class="docutils literal notranslate"><span class="pre">boolean</span></code> (optional)</dt>
<dd>true if I/O error was caused due to a no-space
condition. This key is only present if query-block’s
io-status is present, please see query-block documentation
for more information (since: 2.2)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">reason</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code></dt>
<dd>human readable string describing the error cause.
(This field is a debugging aid for humans, it should not
be parsed by applications) (since: 2.2)</dd>
</dl>
</div>
<div class="section" id="qapidoc-727">
<h4>Note<a class="headerlink" href="#qapidoc-727" title="Permalink to this headline">¶</a></h4>
<p>If action is “stop”, a STOP event will eventually follow the
BLOCK_IO_ERROR event</p>
</div>
<div class="section" id="qapidoc-728">
<h4>Since<a class="headerlink" href="#qapidoc-728" title="Permalink to this headline">¶</a></h4>
<p>0.13</p>
</div>
<div class="section" id="qapidoc-729">
<h4>Example<a class="headerlink" href="#qapidoc-729" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;-</span> <span class="p">{</span> <span class="s2">&quot;event&quot;</span><span class="p">:</span> <span class="s2">&quot;BLOCK_IO_ERROR&quot;</span><span class="p">,</span>
     <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span> <span class="s2">&quot;device&quot;</span><span class="p">:</span> <span class="s2">&quot;ide0-hd1&quot;</span><span class="p">,</span>
               <span class="s2">&quot;node-name&quot;</span><span class="p">:</span> <span class="s2">&quot;#block212&quot;</span><span class="p">,</span>
               <span class="s2">&quot;operation&quot;</span><span class="p">:</span> <span class="s2">&quot;write&quot;</span><span class="p">,</span>
               <span class="s2">&quot;action&quot;</span><span class="p">:</span> <span class="s2">&quot;stop&quot;</span> <span class="p">},</span>
     <span class="s2">&quot;timestamp&quot;</span><span class="p">:</span> <span class="p">{</span> <span class="s2">&quot;seconds&quot;</span><span class="p">:</span> <span class="mi">1265044230</span><span class="p">,</span> <span class="s2">&quot;microseconds&quot;</span><span class="p">:</span> <span class="mi">450486</span> <span class="p">}</span> <span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="qapidoc-734">
<h3><code class="docutils literal notranslate"><span class="pre">BLOCK_JOB_COMPLETED</span></code> (Event)<a class="headerlink" href="#qapidoc-734" title="Permalink to this headline">¶</a></h3>
<p>Emitted when a block job has completed</p>
<div class="section" id="qapidoc-731">
<h4>Arguments<a class="headerlink" href="#qapidoc-731" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">type</span></code>: <code class="docutils literal notranslate"><span class="pre">JobType</span></code></dt>
<dd>job type</dd>
<dt><code class="docutils literal notranslate"><span class="pre">device</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code></dt>
<dd>The job identifier. Originally the device name but other
values are allowed since QEMU 2.7</dd>
<dt><code class="docutils literal notranslate"><span class="pre">len</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code></dt>
<dd>maximum progress value</dd>
<dt><code class="docutils literal notranslate"><span class="pre">offset</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code></dt>
<dd>current progress value. On success this is equal to len.
On failure this is less than len</dd>
<dt><code class="docutils literal notranslate"><span class="pre">speed</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code></dt>
<dd>rate limit, bytes per second</dd>
<dt><code class="docutils literal notranslate"><span class="pre">error</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code> (optional)</dt>
<dd>error message. Only present on failure. This field
contains a human-readable error message. There are no semantics
other than that streaming has failed and clients should not try to
interpret the error string</dd>
</dl>
</div>
<div class="section" id="qapidoc-732">
<h4>Since<a class="headerlink" href="#qapidoc-732" title="Permalink to this headline">¶</a></h4>
<p>1.1</p>
</div>
<div class="section" id="qapidoc-733">
<h4>Example<a class="headerlink" href="#qapidoc-733" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;-</span> <span class="p">{</span> <span class="s2">&quot;event&quot;</span><span class="p">:</span> <span class="s2">&quot;BLOCK_JOB_COMPLETED&quot;</span><span class="p">,</span>
     <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span> <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;stream&quot;</span><span class="p">,</span> <span class="s2">&quot;device&quot;</span><span class="p">:</span> <span class="s2">&quot;virtio-disk0&quot;</span><span class="p">,</span>
               <span class="s2">&quot;len&quot;</span><span class="p">:</span> <span class="mi">10737418240</span><span class="p">,</span> <span class="s2">&quot;offset&quot;</span><span class="p">:</span> <span class="mi">10737418240</span><span class="p">,</span>
               <span class="s2">&quot;speed&quot;</span><span class="p">:</span> <span class="mi">0</span> <span class="p">},</span>
     <span class="s2">&quot;timestamp&quot;</span><span class="p">:</span> <span class="p">{</span> <span class="s2">&quot;seconds&quot;</span><span class="p">:</span> <span class="mi">1267061043</span><span class="p">,</span> <span class="s2">&quot;microseconds&quot;</span><span class="p">:</span> <span class="mi">959568</span> <span class="p">}</span> <span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="qapidoc-738">
<h3><code class="docutils literal notranslate"><span class="pre">BLOCK_JOB_CANCELLED</span></code> (Event)<a class="headerlink" href="#qapidoc-738" title="Permalink to this headline">¶</a></h3>
<p>Emitted when a block job has been cancelled</p>
<div class="section" id="qapidoc-735">
<h4>Arguments<a class="headerlink" href="#qapidoc-735" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">type</span></code>: <code class="docutils literal notranslate"><span class="pre">JobType</span></code></dt>
<dd>job type</dd>
<dt><code class="docutils literal notranslate"><span class="pre">device</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code></dt>
<dd>The job identifier. Originally the device name but other
values are allowed since QEMU 2.7</dd>
<dt><code class="docutils literal notranslate"><span class="pre">len</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code></dt>
<dd>maximum progress value</dd>
<dt><code class="docutils literal notranslate"><span class="pre">offset</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code></dt>
<dd>current progress value. On success this is equal to len.
On failure this is less than len</dd>
<dt><code class="docutils literal notranslate"><span class="pre">speed</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code></dt>
<dd>rate limit, bytes per second</dd>
</dl>
</div>
<div class="section" id="qapidoc-736">
<h4>Since<a class="headerlink" href="#qapidoc-736" title="Permalink to this headline">¶</a></h4>
<p>1.1</p>
</div>
<div class="section" id="qapidoc-737">
<h4>Example<a class="headerlink" href="#qapidoc-737" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;-</span> <span class="p">{</span> <span class="s2">&quot;event&quot;</span><span class="p">:</span> <span class="s2">&quot;BLOCK_JOB_CANCELLED&quot;</span><span class="p">,</span>
     <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span> <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;stream&quot;</span><span class="p">,</span> <span class="s2">&quot;device&quot;</span><span class="p">:</span> <span class="s2">&quot;virtio-disk0&quot;</span><span class="p">,</span>
               <span class="s2">&quot;len&quot;</span><span class="p">:</span> <span class="mi">10737418240</span><span class="p">,</span> <span class="s2">&quot;offset&quot;</span><span class="p">:</span> <span class="mi">134217728</span><span class="p">,</span>
               <span class="s2">&quot;speed&quot;</span><span class="p">:</span> <span class="mi">0</span> <span class="p">},</span>
     <span class="s2">&quot;timestamp&quot;</span><span class="p">:</span> <span class="p">{</span> <span class="s2">&quot;seconds&quot;</span><span class="p">:</span> <span class="mi">1267061043</span><span class="p">,</span> <span class="s2">&quot;microseconds&quot;</span><span class="p">:</span> <span class="mi">959568</span> <span class="p">}</span> <span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="qapidoc-742">
<h3><code class="docutils literal notranslate"><span class="pre">BLOCK_JOB_ERROR</span></code> (Event)<a class="headerlink" href="#qapidoc-742" title="Permalink to this headline">¶</a></h3>
<p>Emitted when a block job encounters an error</p>
<div class="section" id="qapidoc-739">
<h4>Arguments<a class="headerlink" href="#qapidoc-739" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">device</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code></dt>
<dd>The job identifier. Originally the device name but other
values are allowed since QEMU 2.7</dd>
<dt><code class="docutils literal notranslate"><span class="pre">operation</span></code>: <code class="docutils literal notranslate"><span class="pre">IoOperationType</span></code></dt>
<dd>I/O operation</dd>
<dt><code class="docutils literal notranslate"><span class="pre">action</span></code>: <code class="docutils literal notranslate"><span class="pre">BlockErrorAction</span></code></dt>
<dd>action that has been taken</dd>
</dl>
</div>
<div class="section" id="qapidoc-740">
<h4>Since<a class="headerlink" href="#qapidoc-740" title="Permalink to this headline">¶</a></h4>
<p>1.3</p>
</div>
<div class="section" id="qapidoc-741">
<h4>Example<a class="headerlink" href="#qapidoc-741" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;-</span> <span class="p">{</span> <span class="s2">&quot;event&quot;</span><span class="p">:</span> <span class="s2">&quot;BLOCK_JOB_ERROR&quot;</span><span class="p">,</span>
     <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span> <span class="s2">&quot;device&quot;</span><span class="p">:</span> <span class="s2">&quot;ide0-hd1&quot;</span><span class="p">,</span>
               <span class="s2">&quot;operation&quot;</span><span class="p">:</span> <span class="s2">&quot;write&quot;</span><span class="p">,</span>
               <span class="s2">&quot;action&quot;</span><span class="p">:</span> <span class="s2">&quot;stop&quot;</span> <span class="p">},</span>
     <span class="s2">&quot;timestamp&quot;</span><span class="p">:</span> <span class="p">{</span> <span class="s2">&quot;seconds&quot;</span><span class="p">:</span> <span class="mi">1265044230</span><span class="p">,</span> <span class="s2">&quot;microseconds&quot;</span><span class="p">:</span> <span class="mi">450486</span> <span class="p">}</span> <span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="qapidoc-747">
<h3><code class="docutils literal notranslate"><span class="pre">BLOCK_JOB_READY</span></code> (Event)<a class="headerlink" href="#qapidoc-747" title="Permalink to this headline">¶</a></h3>
<p>Emitted when a block job is ready to complete</p>
<div class="section" id="qapidoc-743">
<h4>Arguments<a class="headerlink" href="#qapidoc-743" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">type</span></code>: <code class="docutils literal notranslate"><span class="pre">JobType</span></code></dt>
<dd>job type</dd>
<dt><code class="docutils literal notranslate"><span class="pre">device</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code></dt>
<dd>The job identifier. Originally the device name but other
values are allowed since QEMU 2.7</dd>
<dt><code class="docutils literal notranslate"><span class="pre">len</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code></dt>
<dd>maximum progress value</dd>
<dt><code class="docutils literal notranslate"><span class="pre">offset</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code></dt>
<dd>current progress value. On success this is equal to len.
On failure this is less than len</dd>
<dt><code class="docutils literal notranslate"><span class="pre">speed</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code></dt>
<dd>rate limit, bytes per second</dd>
</dl>
</div>
<div class="section" id="qapidoc-744">
<h4>Note<a class="headerlink" href="#qapidoc-744" title="Permalink to this headline">¶</a></h4>
<p>The “ready to complete” status is always reset by a <code class="docutils literal notranslate"><span class="pre">BLOCK_JOB_ERROR</span></code>
event</p>
</div>
<div class="section" id="qapidoc-745">
<h4>Since<a class="headerlink" href="#qapidoc-745" title="Permalink to this headline">¶</a></h4>
<p>1.3</p>
</div>
<div class="section" id="qapidoc-746">
<h4>Example<a class="headerlink" href="#qapidoc-746" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;-</span> <span class="p">{</span> <span class="s2">&quot;event&quot;</span><span class="p">:</span> <span class="s2">&quot;BLOCK_JOB_READY&quot;</span><span class="p">,</span>
     <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span> <span class="s2">&quot;device&quot;</span><span class="p">:</span> <span class="s2">&quot;drive0&quot;</span><span class="p">,</span> <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;mirror&quot;</span><span class="p">,</span> <span class="s2">&quot;speed&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
               <span class="s2">&quot;len&quot;</span><span class="p">:</span> <span class="mi">2097152</span><span class="p">,</span> <span class="s2">&quot;offset&quot;</span><span class="p">:</span> <span class="mi">2097152</span> <span class="p">}</span>
     <span class="s2">&quot;timestamp&quot;</span><span class="p">:</span> <span class="p">{</span> <span class="s2">&quot;seconds&quot;</span><span class="p">:</span> <span class="mi">1265044230</span><span class="p">,</span> <span class="s2">&quot;microseconds&quot;</span><span class="p">:</span> <span class="mi">450486</span> <span class="p">}</span> <span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="qapidoc-751">
<h3><code class="docutils literal notranslate"><span class="pre">BLOCK_JOB_PENDING</span></code> (Event)<a class="headerlink" href="#qapidoc-751" title="Permalink to this headline">¶</a></h3>
<p>Emitted when a block job is awaiting explicit authorization to finalize graph
changes via <code class="docutils literal notranslate"><span class="pre">block-job-finalize</span></code>. If this job is part of a transaction, it will
not emit this event until the transaction has converged first.</p>
<div class="section" id="qapidoc-748">
<h4>Arguments<a class="headerlink" href="#qapidoc-748" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">type</span></code>: <code class="docutils literal notranslate"><span class="pre">JobType</span></code></dt>
<dd>job type</dd>
<dt><code class="docutils literal notranslate"><span class="pre">id</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code></dt>
<dd>The job identifier.</dd>
</dl>
</div>
<div class="section" id="qapidoc-749">
<h4>Since<a class="headerlink" href="#qapidoc-749" title="Permalink to this headline">¶</a></h4>
<p>2.12</p>
</div>
<div class="section" id="qapidoc-750">
<h4>Example<a class="headerlink" href="#qapidoc-750" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;-</span> <span class="p">{</span> <span class="s2">&quot;event&quot;</span><span class="p">:</span> <span class="s2">&quot;BLOCK_JOB_WAITING&quot;</span><span class="p">,</span>
     <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span> <span class="s2">&quot;device&quot;</span><span class="p">:</span> <span class="s2">&quot;drive0&quot;</span><span class="p">,</span> <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;mirror&quot;</span> <span class="p">},</span>
     <span class="s2">&quot;timestamp&quot;</span><span class="p">:</span> <span class="p">{</span> <span class="s2">&quot;seconds&quot;</span><span class="p">:</span> <span class="mi">1265044230</span><span class="p">,</span> <span class="s2">&quot;microseconds&quot;</span><span class="p">:</span> <span class="mi">450486</span> <span class="p">}</span> <span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="qapidoc-754">
<h3><code class="docutils literal notranslate"><span class="pre">PreallocMode</span></code> (Enum)<a class="headerlink" href="#qapidoc-754" title="Permalink to this headline">¶</a></h3>
<p>Preallocation mode of QEMU image file</p>
<div class="section" id="qapidoc-752">
<h4>Values<a class="headerlink" href="#qapidoc-752" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">off</span></code></dt>
<dd>no preallocation</dd>
<dt><code class="docutils literal notranslate"><span class="pre">metadata</span></code></dt>
<dd>preallocate only for metadata</dd>
<dt><code class="docutils literal notranslate"><span class="pre">falloc</span></code></dt>
<dd>like <code class="docutils literal notranslate"><span class="pre">full</span></code> preallocation but allocate disk space by
posix_fallocate() rather than writing data.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">full</span></code></dt>
<dd>preallocate all data by writing it to the device to ensure
disk space is really available. This data may or may not be
zero, depending on the image format and storage.
<code class="docutils literal notranslate"><span class="pre">full</span></code> preallocation also sets up metadata correctly.</dd>
</dl>
</div>
<div class="section" id="qapidoc-753">
<h4>Since<a class="headerlink" href="#qapidoc-753" title="Permalink to this headline">¶</a></h4>
<p>2.2</p>
</div>
</div>
<div class="section" id="qapidoc-757">
<h3><code class="docutils literal notranslate"><span class="pre">BLOCK_WRITE_THRESHOLD</span></code> (Event)<a class="headerlink" href="#qapidoc-757" title="Permalink to this headline">¶</a></h3>
<p>Emitted when writes on block device reaches or exceeds the
configured write threshold. For thin-provisioned devices, this
means the device should be extended to avoid pausing for
disk exhaustion.
The event is one shot. Once triggered, it needs to be
re-registered with another block-set-write-threshold command.</p>
<div class="section" id="qapidoc-755">
<h4>Arguments<a class="headerlink" href="#qapidoc-755" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">node-name</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code></dt>
<dd>graph node name on which the threshold was exceeded.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">amount-exceeded</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code></dt>
<dd>amount of data which exceeded the threshold, in bytes.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">write-threshold</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code></dt>
<dd>last configured threshold, in bytes.</dd>
</dl>
</div>
<div class="section" id="qapidoc-756">
<h4>Since<a class="headerlink" href="#qapidoc-756" title="Permalink to this headline">¶</a></h4>
<p>2.3</p>
</div>
</div>
<div class="section" id="qapidoc-761">
<h3><code class="docutils literal notranslate"><span class="pre">block-set-write-threshold</span></code> (Command)<a class="headerlink" href="#qapidoc-761" title="Permalink to this headline">¶</a></h3>
<p>Change the write threshold for a block drive. An event will be
delivered if a write to this block drive crosses the configured
threshold.  The threshold is an offset, thus must be
non-negative. Default is no write threshold. Setting the threshold
to zero disables it.</p>
<p>This is useful to transparently resize thin-provisioned drives without
the guest OS noticing.</p>
<div class="section" id="qapidoc-758">
<h4>Arguments<a class="headerlink" href="#qapidoc-758" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">node-name</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code></dt>
<dd>graph node name on which the threshold must be set.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">write-threshold</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code></dt>
<dd>configured threshold for the block device, bytes.
Use 0 to disable the threshold.</dd>
</dl>
</div>
<div class="section" id="qapidoc-759">
<h4>Since<a class="headerlink" href="#qapidoc-759" title="Permalink to this headline">¶</a></h4>
<p>2.3</p>
</div>
<div class="section" id="qapidoc-760">
<h4>Example<a class="headerlink" href="#qapidoc-760" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-&gt;</span> <span class="p">{</span> <span class="s2">&quot;execute&quot;</span><span class="p">:</span> <span class="s2">&quot;block-set-write-threshold&quot;</span><span class="p">,</span>
     <span class="s2">&quot;arguments&quot;</span><span class="p">:</span> <span class="p">{</span> <span class="s2">&quot;node-name&quot;</span><span class="p">:</span> <span class="s2">&quot;mydev&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;write-threshold&quot;</span><span class="p">:</span> <span class="mi">17179869184</span> <span class="p">}</span> <span class="p">}</span>
<span class="o">&lt;-</span> <span class="p">{</span> <span class="s2">&quot;return&quot;</span><span class="p">:</span> <span class="p">{}</span> <span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="qapidoc-766">
<h3><code class="docutils literal notranslate"><span class="pre">x-blockdev-change</span></code> (Command)<a class="headerlink" href="#qapidoc-766" title="Permalink to this headline">¶</a></h3>
<p>Dynamically reconfigure the block driver state graph. It can be used
to add, remove, insert or replace a graph node. Currently only the
Quorum driver implements this feature to add or remove its child. This
is useful to fix a broken quorum child.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">node</span></code> is specified, it will be inserted under <code class="docutils literal notranslate"><span class="pre">parent</span></code>. <code class="docutils literal notranslate"><span class="pre">child</span></code>
may not be specified in this case. If both <code class="docutils literal notranslate"><span class="pre">parent</span></code> and <code class="docutils literal notranslate"><span class="pre">child</span></code> are
specified but <code class="docutils literal notranslate"><span class="pre">node</span></code> is not, <code class="docutils literal notranslate"><span class="pre">child</span></code> will be detached from <code class="docutils literal notranslate"><span class="pre">parent</span></code>.</p>
<div class="section" id="qapidoc-762">
<h4>Arguments<a class="headerlink" href="#qapidoc-762" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">parent</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code></dt>
<dd>the id or name of the parent node.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">child</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code> (optional)</dt>
<dd>the name of a child under the given parent node.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">node</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code> (optional)</dt>
<dd>the name of the node that will be added.</dd>
</dl>
</div>
<div class="section" id="qapidoc-763">
<h4>Note<a class="headerlink" href="#qapidoc-763" title="Permalink to this headline">¶</a></h4>
<p>this command is experimental, and its API is not stable. It
does not support all kinds of operations, all kinds of children, nor
all block drivers.</p>
<p>FIXME Removing children from a quorum node means introducing gaps in the
child indices. This cannot be represented in the ‘children’ list of
BlockdevOptionsQuorum, as returned by .bdrv_refresh_filename().</p>
<p>Warning: The data in a new quorum child MUST be consistent with that of
the rest of the array.</p>
</div>
<div class="section" id="qapidoc-764">
<h4>Since<a class="headerlink" href="#qapidoc-764" title="Permalink to this headline">¶</a></h4>
<p>2.7</p>
</div>
<div class="section" id="qapidoc-765">
<h4>Example<a class="headerlink" href="#qapidoc-765" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mf">1.</span> <span class="n">Add</span> <span class="n">a</span> <span class="n">new</span> <span class="n">node</span> <span class="n">to</span> <span class="n">a</span> <span class="n">quorum</span>
<span class="o">-&gt;</span> <span class="p">{</span> <span class="s2">&quot;execute&quot;</span><span class="p">:</span> <span class="s2">&quot;blockdev-add&quot;</span><span class="p">,</span>
     <span class="s2">&quot;arguments&quot;</span><span class="p">:</span> <span class="p">{</span>
         <span class="s2">&quot;driver&quot;</span><span class="p">:</span> <span class="s2">&quot;raw&quot;</span><span class="p">,</span>
         <span class="s2">&quot;node-name&quot;</span><span class="p">:</span> <span class="s2">&quot;new_node&quot;</span><span class="p">,</span>
         <span class="s2">&quot;file&quot;</span><span class="p">:</span> <span class="p">{</span> <span class="s2">&quot;driver&quot;</span><span class="p">:</span> <span class="s2">&quot;file&quot;</span><span class="p">,</span>
                   <span class="s2">&quot;filename&quot;</span><span class="p">:</span> <span class="s2">&quot;test.raw&quot;</span> <span class="p">}</span> <span class="p">}</span> <span class="p">}</span>
<span class="o">&lt;-</span> <span class="p">{</span> <span class="s2">&quot;return&quot;</span><span class="p">:</span> <span class="p">{}</span> <span class="p">}</span>
<span class="o">-&gt;</span> <span class="p">{</span> <span class="s2">&quot;execute&quot;</span><span class="p">:</span> <span class="s2">&quot;x-blockdev-change&quot;</span><span class="p">,</span>
     <span class="s2">&quot;arguments&quot;</span><span class="p">:</span> <span class="p">{</span> <span class="s2">&quot;parent&quot;</span><span class="p">:</span> <span class="s2">&quot;disk1&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;node&quot;</span><span class="p">:</span> <span class="s2">&quot;new_node&quot;</span> <span class="p">}</span> <span class="p">}</span>
<span class="o">&lt;-</span> <span class="p">{</span> <span class="s2">&quot;return&quot;</span><span class="p">:</span> <span class="p">{}</span> <span class="p">}</span>

<span class="mf">2.</span> <span class="n">Delete</span> <span class="n">a</span> <span class="n">quorum</span><span class="s1">&#39;s node</span>
<span class="o">-&gt;</span> <span class="p">{</span> <span class="s2">&quot;execute&quot;</span><span class="p">:</span> <span class="s2">&quot;x-blockdev-change&quot;</span><span class="p">,</span>
     <span class="s2">&quot;arguments&quot;</span><span class="p">:</span> <span class="p">{</span> <span class="s2">&quot;parent&quot;</span><span class="p">:</span> <span class="s2">&quot;disk1&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;child&quot;</span><span class="p">:</span> <span class="s2">&quot;children.1&quot;</span> <span class="p">}</span> <span class="p">}</span>
<span class="o">&lt;-</span> <span class="p">{</span> <span class="s2">&quot;return&quot;</span><span class="p">:</span> <span class="p">{}</span> <span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="qapidoc-771">
<h3><code class="docutils literal notranslate"><span class="pre">x-blockdev-set-iothread</span></code> (Command)<a class="headerlink" href="#qapidoc-771" title="Permalink to this headline">¶</a></h3>
<p>Move <code class="docutils literal notranslate"><span class="pre">node</span></code> and its children into the <code class="docutils literal notranslate"><span class="pre">iothread</span></code>.  If <code class="docutils literal notranslate"><span class="pre">iothread</span></code> is null then
move <code class="docutils literal notranslate"><span class="pre">node</span></code> and its children into the main loop.</p>
<p>The node must not be attached to a BlockBackend.</p>
<div class="section" id="qapidoc-767">
<h4>Arguments<a class="headerlink" href="#qapidoc-767" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">node-name</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code></dt>
<dd>the name of the block driver node</dd>
<dt><code class="docutils literal notranslate"><span class="pre">iothread</span></code>: <code class="docutils literal notranslate"><span class="pre">StrOrNull</span></code></dt>
<dd>the name of the IOThread object or null for the main loop</dd>
<dt><code class="docutils literal notranslate"><span class="pre">force</span></code>: <code class="docutils literal notranslate"><span class="pre">boolean</span></code> (optional)</dt>
<dd>true if the node and its children should be moved when a BlockBackend
is already attached</dd>
</dl>
</div>
<div class="section" id="qapidoc-768">
<h4>Note<a class="headerlink" href="#qapidoc-768" title="Permalink to this headline">¶</a></h4>
<p>this command is experimental and intended for test cases that need
control over IOThreads only.</p>
</div>
<div class="section" id="qapidoc-769">
<h4>Since<a class="headerlink" href="#qapidoc-769" title="Permalink to this headline">¶</a></h4>
<p>2.12</p>
</div>
<div class="section" id="qapidoc-770">
<h4>Example<a class="headerlink" href="#qapidoc-770" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mf">1.</span> <span class="n">Move</span> <span class="n">a</span> <span class="n">node</span> <span class="n">into</span> <span class="n">an</span> <span class="n">IOThread</span>
<span class="o">-&gt;</span> <span class="p">{</span> <span class="s2">&quot;execute&quot;</span><span class="p">:</span> <span class="s2">&quot;x-blockdev-set-iothread&quot;</span><span class="p">,</span>
     <span class="s2">&quot;arguments&quot;</span><span class="p">:</span> <span class="p">{</span> <span class="s2">&quot;node-name&quot;</span><span class="p">:</span> <span class="s2">&quot;disk1&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;iothread&quot;</span><span class="p">:</span> <span class="s2">&quot;iothread0&quot;</span> <span class="p">}</span> <span class="p">}</span>
<span class="o">&lt;-</span> <span class="p">{</span> <span class="s2">&quot;return&quot;</span><span class="p">:</span> <span class="p">{}</span> <span class="p">}</span>

<span class="mf">2.</span> <span class="n">Move</span> <span class="n">a</span> <span class="n">node</span> <span class="n">into</span> <span class="n">the</span> <span class="n">main</span> <span class="n">loop</span>
<span class="o">-&gt;</span> <span class="p">{</span> <span class="s2">&quot;execute&quot;</span><span class="p">:</span> <span class="s2">&quot;x-blockdev-set-iothread&quot;</span><span class="p">,</span>
     <span class="s2">&quot;arguments&quot;</span><span class="p">:</span> <span class="p">{</span> <span class="s2">&quot;node-name&quot;</span><span class="p">:</span> <span class="s2">&quot;disk1&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;iothread&quot;</span><span class="p">:</span> <span class="n">null</span> <span class="p">}</span> <span class="p">}</span>
<span class="o">&lt;-</span> <span class="p">{</span> <span class="s2">&quot;return&quot;</span><span class="p">:</span> <span class="p">{}</span> <span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="qapidoc-774">
<h3><code class="docutils literal notranslate"><span class="pre">QuorumOpType</span></code> (Enum)<a class="headerlink" href="#qapidoc-774" title="Permalink to this headline">¶</a></h3>
<p>An enumeration of the quorum operation types</p>
<div class="section" id="qapidoc-772">
<h4>Values<a class="headerlink" href="#qapidoc-772" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">read</span></code></dt>
<dd>read operation</dd>
<dt><code class="docutils literal notranslate"><span class="pre">write</span></code></dt>
<dd>write operation</dd>
<dt><code class="docutils literal notranslate"><span class="pre">flush</span></code></dt>
<dd>flush operation</dd>
</dl>
</div>
<div class="section" id="qapidoc-773">
<h4>Since<a class="headerlink" href="#qapidoc-773" title="Permalink to this headline">¶</a></h4>
<p>2.6</p>
</div>
</div>
<div class="section" id="qapidoc-779">
<h3><code class="docutils literal notranslate"><span class="pre">QUORUM_FAILURE</span></code> (Event)<a class="headerlink" href="#qapidoc-779" title="Permalink to this headline">¶</a></h3>
<p>Emitted by the Quorum block driver if it fails to establish a quorum</p>
<div class="section" id="qapidoc-775">
<h4>Arguments<a class="headerlink" href="#qapidoc-775" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">reference</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code></dt>
<dd>device name if defined else node name</dd>
<dt><code class="docutils literal notranslate"><span class="pre">sector-num</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code></dt>
<dd>number of the first sector of the failed read operation</dd>
<dt><code class="docutils literal notranslate"><span class="pre">sectors-count</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code></dt>
<dd>failed read operation sector count</dd>
</dl>
</div>
<div class="section" id="qapidoc-776">
<h4>Note<a class="headerlink" href="#qapidoc-776" title="Permalink to this headline">¶</a></h4>
<p>This event is rate-limited.</p>
</div>
<div class="section" id="qapidoc-777">
<h4>Since<a class="headerlink" href="#qapidoc-777" title="Permalink to this headline">¶</a></h4>
<p>2.0</p>
</div>
<div class="section" id="qapidoc-778">
<h4>Example<a class="headerlink" href="#qapidoc-778" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;-</span> <span class="p">{</span> <span class="s2">&quot;event&quot;</span><span class="p">:</span> <span class="s2">&quot;QUORUM_FAILURE&quot;</span><span class="p">,</span>
     <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span> <span class="s2">&quot;reference&quot;</span><span class="p">:</span> <span class="s2">&quot;usr1&quot;</span><span class="p">,</span> <span class="s2">&quot;sector-num&quot;</span><span class="p">:</span> <span class="mi">345435</span><span class="p">,</span> <span class="s2">&quot;sectors-count&quot;</span><span class="p">:</span> <span class="mi">5</span> <span class="p">},</span>
     <span class="s2">&quot;timestamp&quot;</span><span class="p">:</span> <span class="p">{</span> <span class="s2">&quot;seconds&quot;</span><span class="p">:</span> <span class="mi">1344522075</span><span class="p">,</span> <span class="s2">&quot;microseconds&quot;</span><span class="p">:</span> <span class="mi">745528</span> <span class="p">}</span> <span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="qapidoc-784">
<h3><code class="docutils literal notranslate"><span class="pre">QUORUM_REPORT_BAD</span></code> (Event)<a class="headerlink" href="#qapidoc-784" title="Permalink to this headline">¶</a></h3>
<p>Emitted to report a corruption of a Quorum file</p>
<div class="section" id="qapidoc-780">
<h4>Arguments<a class="headerlink" href="#qapidoc-780" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">type</span></code>: <code class="docutils literal notranslate"><span class="pre">QuorumOpType</span></code></dt>
<dd>quorum operation type (Since 2.6)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">error</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code> (optional)</dt>
<dd>error message. Only present on failure. This field
contains a human-readable error message. There are no semantics other
than that the block layer reported an error and clients should not
try to interpret the error string.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">node-name</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code></dt>
<dd>the graph node name of the block driver state</dd>
<dt><code class="docutils literal notranslate"><span class="pre">sector-num</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code></dt>
<dd>number of the first sector of the failed read operation</dd>
<dt><code class="docutils literal notranslate"><span class="pre">sectors-count</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code></dt>
<dd>failed read operation sector count</dd>
</dl>
</div>
<div class="section" id="qapidoc-781">
<h4>Note<a class="headerlink" href="#qapidoc-781" title="Permalink to this headline">¶</a></h4>
<p>This event is rate-limited.</p>
</div>
<div class="section" id="qapidoc-782">
<h4>Since<a class="headerlink" href="#qapidoc-782" title="Permalink to this headline">¶</a></h4>
<p>2.0</p>
</div>
<div class="section" id="qapidoc-783">
<h4>Example<a class="headerlink" href="#qapidoc-783" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mf">1.</span> <span class="n">Read</span> <span class="n">operation</span>

<span class="p">{</span> <span class="s2">&quot;event&quot;</span><span class="p">:</span> <span class="s2">&quot;QUORUM_REPORT_BAD&quot;</span><span class="p">,</span>
     <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span> <span class="s2">&quot;node-name&quot;</span><span class="p">:</span> <span class="s2">&quot;node0&quot;</span><span class="p">,</span> <span class="s2">&quot;sector-num&quot;</span><span class="p">:</span> <span class="mi">345435</span><span class="p">,</span> <span class="s2">&quot;sectors-count&quot;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
               <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;read&quot;</span> <span class="p">},</span>
     <span class="s2">&quot;timestamp&quot;</span><span class="p">:</span> <span class="p">{</span> <span class="s2">&quot;seconds&quot;</span><span class="p">:</span> <span class="mi">1344522075</span><span class="p">,</span> <span class="s2">&quot;microseconds&quot;</span><span class="p">:</span> <span class="mi">745528</span> <span class="p">}</span> <span class="p">}</span>

<span class="mf">2.</span> <span class="n">Flush</span> <span class="n">operation</span>

<span class="p">{</span> <span class="s2">&quot;event&quot;</span><span class="p">:</span> <span class="s2">&quot;QUORUM_REPORT_BAD&quot;</span><span class="p">,</span>
     <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span> <span class="s2">&quot;node-name&quot;</span><span class="p">:</span> <span class="s2">&quot;node0&quot;</span><span class="p">,</span> <span class="s2">&quot;sector-num&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;sectors-count&quot;</span><span class="p">:</span> <span class="mi">2097120</span><span class="p">,</span>
               <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;flush&quot;</span><span class="p">,</span> <span class="s2">&quot;error&quot;</span><span class="p">:</span> <span class="s2">&quot;Broken pipe&quot;</span> <span class="p">},</span>
     <span class="s2">&quot;timestamp&quot;</span><span class="p">:</span> <span class="p">{</span> <span class="s2">&quot;seconds&quot;</span><span class="p">:</span> <span class="mi">1456406829</span><span class="p">,</span> <span class="s2">&quot;microseconds&quot;</span><span class="p">:</span> <span class="mi">291763</span> <span class="p">}</span> <span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="qapidoc-788">
<h3><code class="docutils literal notranslate"><span class="pre">BlockdevSnapshotInternal</span></code> (Object)<a class="headerlink" href="#qapidoc-788" title="Permalink to this headline">¶</a></h3>
<div class="section" id="qapidoc-785">
<h4>Members<a class="headerlink" href="#qapidoc-785" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">device</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code></dt>
<dd>the device name or node-name of a root node to generate the snapshot
from</dd>
<dt><code class="docutils literal notranslate"><span class="pre">name</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code></dt>
<dd>the name of the internal snapshot to be created</dd>
</dl>
</div>
<div class="section" id="qapidoc-786">
<h4>Notes<a class="headerlink" href="#qapidoc-786" title="Permalink to this headline">¶</a></h4>
<p>In transaction, if <code class="docutils literal notranslate"><span class="pre">name</span></code> is empty, or any snapshot matching <code class="docutils literal notranslate"><span class="pre">name</span></code>
exists, the operation will fail. Only some image formats support it,
for example, qcow2, rbd, and sheepdog.</p>
</div>
<div class="section" id="qapidoc-787">
<h4>Since<a class="headerlink" href="#qapidoc-787" title="Permalink to this headline">¶</a></h4>
<p>1.7</p>
</div>
</div>
<div class="section" id="qapidoc-792">
<h3><code class="docutils literal notranslate"><span class="pre">blockdev-snapshot-internal-sync</span></code> (Command)<a class="headerlink" href="#qapidoc-792" title="Permalink to this headline">¶</a></h3>
<p>Synchronously take an internal snapshot of a block device, when the
format of the image used supports it. If the name is an empty
string, or a snapshot with name already exists, the operation will
fail.</p>
<p>For the arguments, see the documentation of BlockdevSnapshotInternal.</p>
<div class="section" id="qapidoc-789">
<h4>Returns<a class="headerlink" href="#qapidoc-789" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>nothing on success</li>
<li>If <code class="docutils literal notranslate"><span class="pre">device</span></code> is not a valid block device, GenericError</li>
<li>If any snapshot matching <code class="docutils literal notranslate"><span class="pre">name</span></code> exists, or <code class="docutils literal notranslate"><span class="pre">name</span></code> is empty,
GenericError</li>
<li>If the format of the image used does not support it,
BlockFormatFeatureNotSupported</li>
</ul>
</div>
<div class="section" id="qapidoc-790">
<h4>Since<a class="headerlink" href="#qapidoc-790" title="Permalink to this headline">¶</a></h4>
<p>1.7</p>
</div>
<div class="section" id="qapidoc-791">
<h4>Example<a class="headerlink" href="#qapidoc-791" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-&gt;</span> <span class="p">{</span> <span class="s2">&quot;execute&quot;</span><span class="p">:</span> <span class="s2">&quot;blockdev-snapshot-internal-sync&quot;</span><span class="p">,</span>
     <span class="s2">&quot;arguments&quot;</span><span class="p">:</span> <span class="p">{</span> <span class="s2">&quot;device&quot;</span><span class="p">:</span> <span class="s2">&quot;ide-hd0&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;snapshot0&quot;</span> <span class="p">}</span>
   <span class="p">}</span>
<span class="o">&lt;-</span> <span class="p">{</span> <span class="s2">&quot;return&quot;</span><span class="p">:</span> <span class="p">{}</span> <span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="qapidoc-797">
<h3><code class="docutils literal notranslate"><span class="pre">blockdev-snapshot-delete-internal-sync</span></code> (Command)<a class="headerlink" href="#qapidoc-797" title="Permalink to this headline">¶</a></h3>
<p>Synchronously delete an internal snapshot of a block device, when the format
of the image used support it. The snapshot is identified by name or id or
both. One of the name or id is required. Return SnapshotInfo for the
successfully deleted snapshot.</p>
<div class="section" id="qapidoc-793">
<h4>Arguments<a class="headerlink" href="#qapidoc-793" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">device</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code></dt>
<dd>the device name or node-name of a root node to delete the snapshot
from</dd>
<dt><code class="docutils literal notranslate"><span class="pre">id</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code> (optional)</dt>
<dd>optional the snapshot’s ID to be deleted</dd>
<dt><code class="docutils literal notranslate"><span class="pre">name</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code> (optional)</dt>
<dd>optional the snapshot’s name to be deleted</dd>
</dl>
</div>
<div class="section" id="qapidoc-794">
<h4>Returns<a class="headerlink" href="#qapidoc-794" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>SnapshotInfo on success</li>
<li>If <code class="docutils literal notranslate"><span class="pre">device</span></code> is not a valid block device, GenericError</li>
<li>If snapshot not found, GenericError</li>
<li>If the format of the image used does not support it,
BlockFormatFeatureNotSupported</li>
<li>If <code class="docutils literal notranslate"><span class="pre">id</span></code> and <code class="docutils literal notranslate"><span class="pre">name</span></code> are both not specified, GenericError</li>
</ul>
</div>
<div class="section" id="qapidoc-795">
<h4>Since<a class="headerlink" href="#qapidoc-795" title="Permalink to this headline">¶</a></h4>
<p>1.7</p>
</div>
<div class="section" id="qapidoc-796">
<h4>Example<a class="headerlink" href="#qapidoc-796" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-&gt;</span> <span class="p">{</span> <span class="s2">&quot;execute&quot;</span><span class="p">:</span> <span class="s2">&quot;blockdev-snapshot-delete-internal-sync&quot;</span><span class="p">,</span>
     <span class="s2">&quot;arguments&quot;</span><span class="p">:</span> <span class="p">{</span> <span class="s2">&quot;device&quot;</span><span class="p">:</span> <span class="s2">&quot;ide-hd0&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;snapshot0&quot;</span> <span class="p">}</span>
   <span class="p">}</span>
<span class="o">&lt;-</span> <span class="p">{</span> <span class="s2">&quot;return&quot;</span><span class="p">:</span> <span class="p">{</span>
                   <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;1&quot;</span><span class="p">,</span>
                   <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;snapshot0&quot;</span><span class="p">,</span>
                   <span class="s2">&quot;vm-state-size&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                   <span class="s2">&quot;date-sec&quot;</span><span class="p">:</span> <span class="mi">1000012</span><span class="p">,</span>
                   <span class="s2">&quot;date-nsec&quot;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
                   <span class="s2">&quot;vm-clock-sec&quot;</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span>
                   <span class="s2">&quot;vm-clock-nsec&quot;</span><span class="p">:</span> <span class="mi">20</span><span class="p">,</span>
                   <span class="s2">&quot;icount&quot;</span><span class="p">:</span> <span class="mi">220414</span>
     <span class="p">}</span>
   <span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="qapidoc-798">
<h3>Block device exports<a class="headerlink" href="#qapidoc-798" title="Permalink to this headline">¶</a></h3>
<div class="section" id="qapidoc-801">
<h4><code class="docutils literal notranslate"><span class="pre">NbdServerOptions</span></code> (Object)<a class="headerlink" href="#qapidoc-801" title="Permalink to this headline">¶</a></h4>
<p>Keep this type consistent with the nbd-server-start arguments. The only
intended difference is using SocketAddress instead of SocketAddressLegacy.</p>
<div class="section" id="qapidoc-799">
<h5>Members<a class="headerlink" href="#qapidoc-799" title="Permalink to this headline">¶</a></h5>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">addr</span></code>: <code class="docutils literal notranslate"><span class="pre">SocketAddress</span></code></dt>
<dd>Address on which to listen.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">tls-creds</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code> (optional)</dt>
<dd>ID of the TLS credentials object (since 2.6).</dd>
<dt><code class="docutils literal notranslate"><span class="pre">tls-authz</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code> (optional)</dt>
<dd>ID of the QAuthZ authorization object used to validate
the client’s x509 distinguished name. This object is
is only resolved at time of use, so can be deleted and
recreated on the fly while the NBD server is active.
If missing, it will default to denying access (since 4.0).</dd>
<dt><code class="docutils literal notranslate"><span class="pre">max-connections</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code> (optional)</dt>
<dd>The maximum number of connections to allow at the same
time, 0 for unlimited. (since 5.2; default: 0)</dd>
</dl>
</div>
<div class="section" id="qapidoc-800">
<h5>Since<a class="headerlink" href="#qapidoc-800" title="Permalink to this headline">¶</a></h5>
<p>4.2</p>
</div>
</div>
<div class="section" id="qapidoc-805">
<h4><code class="docutils literal notranslate"><span class="pre">nbd-server-start</span></code> (Command)<a class="headerlink" href="#qapidoc-805" title="Permalink to this headline">¶</a></h4>
<p>Start an NBD server listening on the given host and port.  Block
devices can then be exported using <code class="docutils literal notranslate"><span class="pre">nbd-server-add</span></code>.  The NBD
server will present them as named exports; for example, another
QEMU instance could refer to them as “nbd:HOST:PORT:exportname=NAME”.</p>
<p>Keep this type consistent with the NbdServerOptions type. The only intended
difference is using SocketAddressLegacy instead of SocketAddress.</p>
<div class="section" id="qapidoc-802">
<h5>Arguments<a class="headerlink" href="#qapidoc-802" title="Permalink to this headline">¶</a></h5>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">addr</span></code>: <code class="docutils literal notranslate"><span class="pre">SocketAddressLegacy</span></code></dt>
<dd>Address on which to listen.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">tls-creds</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code> (optional)</dt>
<dd>ID of the TLS credentials object (since 2.6).</dd>
<dt><code class="docutils literal notranslate"><span class="pre">tls-authz</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code> (optional)</dt>
<dd>ID of the QAuthZ authorization object used to validate
the client’s x509 distinguished name. This object is
is only resolved at time of use, so can be deleted and
recreated on the fly while the NBD server is active.
If missing, it will default to denying access (since 4.0).</dd>
<dt><code class="docutils literal notranslate"><span class="pre">max-connections</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code> (optional)</dt>
<dd>The maximum number of connections to allow at the same
time, 0 for unlimited. (since 5.2; default: 0)</dd>
</dl>
</div>
<div class="section" id="qapidoc-803">
<h5>Returns<a class="headerlink" href="#qapidoc-803" title="Permalink to this headline">¶</a></h5>
<p>error if the server is already running.</p>
</div>
<div class="section" id="qapidoc-804">
<h5>Since<a class="headerlink" href="#qapidoc-804" title="Permalink to this headline">¶</a></h5>
<p>1.3</p>
</div>
</div>
<div class="section" id="qapidoc-808">
<h4><code class="docutils literal notranslate"><span class="pre">BlockExportOptionsNbdBase</span></code> (Object)<a class="headerlink" href="#qapidoc-808" title="Permalink to this headline">¶</a></h4>
<p>An NBD block export (common options shared between nbd-server-add and
the NBD branch of block-export-add).</p>
<div class="section" id="qapidoc-806">
<h5>Members<a class="headerlink" href="#qapidoc-806" title="Permalink to this headline">¶</a></h5>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">name</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code> (optional)</dt>
<dd>Export name. If unspecified, the <code class="docutils literal notranslate"><span class="pre">device</span></code> parameter is used as the
export name. (Since 2.12)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">description</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code> (optional)</dt>
<dd>Free-form description of the export, up to 4096 bytes.
(Since 5.0)</dd>
</dl>
</div>
<div class="section" id="qapidoc-807">
<h5>Since<a class="headerlink" href="#qapidoc-807" title="Permalink to this headline">¶</a></h5>
<p>5.0</p>
</div>
</div>
<div class="section" id="qapidoc-811">
<h4><code class="docutils literal notranslate"><span class="pre">BlockExportOptionsNbd</span></code> (Object)<a class="headerlink" href="#qapidoc-811" title="Permalink to this headline">¶</a></h4>
<p>An NBD block export (distinct options used in the NBD branch of
block-export-add).</p>
<div class="section" id="qapidoc-809">
<h5>Members<a class="headerlink" href="#qapidoc-809" title="Permalink to this headline">¶</a></h5>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">bitmaps</span></code>: <code class="docutils literal notranslate"><span class="pre">array</span> <span class="pre">of</span> <span class="pre">string</span></code> (optional)</dt>
<dd>Also export each of the named dirty bitmaps reachable from
<code class="docutils literal notranslate"><span class="pre">device</span></code>, so the NBD client can use NBD_OPT_SET_META_CONTEXT with
the metadata context name “qemu:dirty-bitmap:BITMAP” to inspect
each bitmap.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">allocation-depth</span></code>: <code class="docutils literal notranslate"><span class="pre">boolean</span></code> (optional)</dt>
<dd>Also export the allocation depth map for <code class="docutils literal notranslate"><span class="pre">device</span></code>, so
the NBD client can use NBD_OPT_SET_META_CONTEXT with
the metadata context name “qemu:allocation-depth” to
inspect allocation details. (since 5.2)</dd>
<dt>The members of <code class="docutils literal notranslate"><span class="pre">BlockExportOptionsNbdBase</span></code></dl>
</div>
<div class="section" id="qapidoc-810">
<h5>Since<a class="headerlink" href="#qapidoc-810" title="Permalink to this headline">¶</a></h5>
<p>5.2</p>
</div>
</div>
<div class="section" id="qapidoc-814">
<h4><code class="docutils literal notranslate"><span class="pre">BlockExportOptionsVhostUserBlk</span></code> (Object)<a class="headerlink" href="#qapidoc-814" title="Permalink to this headline">¶</a></h4>
<p>A vhost-user-blk block export.</p>
<div class="section" id="qapidoc-812">
<h5>Members<a class="headerlink" href="#qapidoc-812" title="Permalink to this headline">¶</a></h5>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">addr</span></code>: <code class="docutils literal notranslate"><span class="pre">SocketAddress</span></code></dt>
<dd>The vhost-user socket on which to listen. Both ‘unix’ and ‘fd’
SocketAddress types are supported. Passed fds must be UNIX domain
sockets.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">logical-block-size</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code> (optional)</dt>
<dd>Logical block size in bytes. Defaults to 512 bytes.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">num-queues</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code> (optional)</dt>
<dd>Number of request virtqueues. Must be greater than 0. Defaults
to 1.</dd>
</dl>
</div>
<div class="section" id="qapidoc-813">
<h5>Since<a class="headerlink" href="#qapidoc-813" title="Permalink to this headline">¶</a></h5>
<p>5.2</p>
</div>
</div>
<div class="section" id="qapidoc-818">
<h4><code class="docutils literal notranslate"><span class="pre">BlockExportOptionsFuse</span></code> (Object)<a class="headerlink" href="#qapidoc-818" title="Permalink to this headline">¶</a></h4>
<p>Options for exporting a block graph node on some (file) mountpoint
as a raw image.</p>
<div class="section" id="qapidoc-815">
<h5>Members<a class="headerlink" href="#qapidoc-815" title="Permalink to this headline">¶</a></h5>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">mountpoint</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code></dt>
<dd>Path on which to export the block device via FUSE.
This must point to an existing regular file.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">growable</span></code>: <code class="docutils literal notranslate"><span class="pre">boolean</span></code> (optional)</dt>
<dd>Whether writes beyond the EOF should grow the block node
accordingly. (default: false)</dd>
</dl>
</div>
<div class="section" id="qapidoc-816">
<h5>Since<a class="headerlink" href="#qapidoc-816" title="Permalink to this headline">¶</a></h5>
<p>6.0</p>
</div>
<div class="section" id="qapidoc-817">
<h5>If<a class="headerlink" href="#qapidoc-817" title="Permalink to this headline">¶</a></h5>
<code class="docutils literal notranslate"><span class="pre">defined(CONFIG_FUSE)</span></code></div>
</div>
<div class="section" id="qapidoc-821">
<h4><code class="docutils literal notranslate"><span class="pre">NbdServerAddOptions</span></code> (Object)<a class="headerlink" href="#qapidoc-821" title="Permalink to this headline">¶</a></h4>
<p>An NBD block export, per legacy nbd-server-add command.</p>
<div class="section" id="qapidoc-819">
<h5>Members<a class="headerlink" href="#qapidoc-819" title="Permalink to this headline">¶</a></h5>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">device</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code></dt>
<dd>The device name or node name of the node to be exported</dd>
<dt><code class="docutils literal notranslate"><span class="pre">writable</span></code>: <code class="docutils literal notranslate"><span class="pre">boolean</span></code> (optional)</dt>
<dd>Whether clients should be able to write to the device via the
NBD connection (default false).</dd>
<dt><code class="docutils literal notranslate"><span class="pre">bitmap</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code> (optional)</dt>
<dd>Also export a single dirty bitmap reachable from <code class="docutils literal notranslate"><span class="pre">device</span></code>, so the
NBD client can use NBD_OPT_SET_META_CONTEXT with the metadata
context name “qemu:dirty-bitmap:BITMAP” to inspect the bitmap
(since 4.0).</dd>
<dt>The members of <code class="docutils literal notranslate"><span class="pre">BlockExportOptionsNbdBase</span></code></dl>
</div>
<div class="section" id="qapidoc-820">
<h5>Since<a class="headerlink" href="#qapidoc-820" title="Permalink to this headline">¶</a></h5>
<p>5.0</p>
</div>
</div>
<div class="section" id="qapidoc-826">
<h4><code class="docutils literal notranslate"><span class="pre">nbd-server-add</span></code> (Command)<a class="headerlink" href="#qapidoc-826" title="Permalink to this headline">¶</a></h4>
<p>Export a block node to QEMU’s embedded NBD server.</p>
<p>The export name will be used as the id for the resulting block export.</p>
<div class="section" id="qapidoc-822">
<h5>Arguments<a class="headerlink" href="#qapidoc-822" title="Permalink to this headline">¶</a></h5>
<dl class="docutils">
<dt>The members of <code class="docutils literal notranslate"><span class="pre">NbdServerAddOptions</span></code></dl>
</div>
<div class="section" id="qapidoc-823">
<h5>Features<a class="headerlink" href="#qapidoc-823" title="Permalink to this headline">¶</a></h5>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">deprecated</span></code></dt>
<dd>This command is deprecated. Use <code class="docutils literal notranslate"><span class="pre">block-export-add</span></code> instead.</dd>
</dl>
</div>
<div class="section" id="qapidoc-824">
<h5>Returns<a class="headerlink" href="#qapidoc-824" title="Permalink to this headline">¶</a></h5>
<p>error if the server is not running, or export with the same name
already exists.</p>
</div>
<div class="section" id="qapidoc-825">
<h5>Since<a class="headerlink" href="#qapidoc-825" title="Permalink to this headline">¶</a></h5>
<p>1.3</p>
</div>
</div>
<div class="section" id="qapidoc-830">
<h4><code class="docutils literal notranslate"><span class="pre">BlockExportRemoveMode</span></code> (Enum)<a class="headerlink" href="#qapidoc-830" title="Permalink to this headline">¶</a></h4>
<p>Mode for removing a block export.</p>
<div class="section" id="qapidoc-827">
<h5>Values<a class="headerlink" href="#qapidoc-827" title="Permalink to this headline">¶</a></h5>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">safe</span></code></dt>
<dd>Remove export if there are no existing connections, fail otherwise.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">hard</span></code></dt>
<dd>Drop all connections immediately and remove export.</dd>
</dl>
</div>
<div class="section" id="qapidoc-828">
<p>Potential additional modes to be added in the future:</p>
<p>hide: Just hide export from new clients, leave existing connections as is.
Remove export after all clients are disconnected.</p>
<p>soft: Hide export from new clients, answer with ESHUTDOWN for all further
requests from existing clients.</p>
</div>
<div class="section" id="qapidoc-829">
<h5>Since<a class="headerlink" href="#qapidoc-829" title="Permalink to this headline">¶</a></h5>
<p>2.12</p>
</div>
</div>
<div class="section" id="qapidoc-835">
<h4><code class="docutils literal notranslate"><span class="pre">nbd-server-remove</span></code> (Command)<a class="headerlink" href="#qapidoc-835" title="Permalink to this headline">¶</a></h4>
<p>Remove NBD export by name.</p>
<div class="section" id="qapidoc-831">
<h5>Arguments<a class="headerlink" href="#qapidoc-831" title="Permalink to this headline">¶</a></h5>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">name</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code></dt>
<dd>Block export id.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">mode</span></code>: <code class="docutils literal notranslate"><span class="pre">BlockExportRemoveMode</span></code> (optional)</dt>
<dd>Mode of command operation. See <code class="docutils literal notranslate"><span class="pre">BlockExportRemoveMode</span></code> description.
Default is ‘safe’.</dd>
</dl>
</div>
<div class="section" id="qapidoc-832">
<h5>Features<a class="headerlink" href="#qapidoc-832" title="Permalink to this headline">¶</a></h5>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">deprecated</span></code></dt>
<dd>This command is deprecated. Use <code class="docutils literal notranslate"><span class="pre">block-export-del</span></code> instead.</dd>
</dl>
</div>
<div class="section" id="qapidoc-833">
<h5>Returns<a class="headerlink" href="#qapidoc-833" title="Permalink to this headline">¶</a></h5>
<dl class="docutils">
<dt>error if</dt>
<dd><ul class="first last simple">
<li>the server is not running</li>
<li>export is not found</li>
<li>mode is ‘safe’ and there are existing connections</li>
</ul>
</dd>
</dl>
</div>
<div class="section" id="qapidoc-834">
<h5>Since<a class="headerlink" href="#qapidoc-834" title="Permalink to this headline">¶</a></h5>
<p>2.12</p>
</div>
</div>
<div class="section" id="qapidoc-837">
<h4><code class="docutils literal notranslate"><span class="pre">nbd-server-stop</span></code> (Command)<a class="headerlink" href="#qapidoc-837" title="Permalink to this headline">¶</a></h4>
<p>Stop QEMU’s embedded NBD server, and unregister all devices previously
added via <code class="docutils literal notranslate"><span class="pre">nbd-server-add</span></code>.</p>
<div class="section" id="qapidoc-836">
<h5>Since<a class="headerlink" href="#qapidoc-836" title="Permalink to this headline">¶</a></h5>
<p>1.3</p>
</div>
</div>
<div class="section" id="qapidoc-840">
<h4><code class="docutils literal notranslate"><span class="pre">BlockExportType</span></code> (Enum)<a class="headerlink" href="#qapidoc-840" title="Permalink to this headline">¶</a></h4>
<p>An enumeration of block export types</p>
<div class="section" id="qapidoc-838">
<h5>Values<a class="headerlink" href="#qapidoc-838" title="Permalink to this headline">¶</a></h5>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">nbd</span></code></dt>
<dd>NBD export</dd>
<dt><code class="docutils literal notranslate"><span class="pre">vhost-user-blk</span></code></dt>
<dd>vhost-user-blk export (since 5.2)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">fuse</span></code> (<strong>If: </strong><code class="docutils literal notranslate"><span class="pre">defined(CONFIG_FUSE)</span></code>)</dt>
<dd>FUSE export (since: 6.0)</dd>
</dl>
</div>
<div class="section" id="qapidoc-839">
<h5>Since<a class="headerlink" href="#qapidoc-839" title="Permalink to this headline">¶</a></h5>
<p>4.2</p>
</div>
</div>
<div class="section" id="qapidoc-843">
<h4><code class="docutils literal notranslate"><span class="pre">BlockExportOptions</span></code> (Object)<a class="headerlink" href="#qapidoc-843" title="Permalink to this headline">¶</a></h4>
<p>Describes a block export, i.e. how single node should be exported on an
external interface.</p>
<div class="section" id="qapidoc-841">
<h5>Members<a class="headerlink" href="#qapidoc-841" title="Permalink to this headline">¶</a></h5>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">id</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code></dt>
<dd>A unique identifier for the block export (across all export types)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">node-name</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code></dt>
<dd>The node name of the block node to be exported (since: 5.2)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">writable</span></code>: <code class="docutils literal notranslate"><span class="pre">boolean</span></code> (optional)</dt>
<dd>True if clients should be able to write to the export
(default false)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">writethrough</span></code>: <code class="docutils literal notranslate"><span class="pre">boolean</span></code> (optional)</dt>
<dd>If true, caches are flushed after every write request to the
export before completion is signalled. (since: 5.2;
default: false)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">iothread</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code> (optional)</dt>
<dd>The name of the iothread object where the export will run. The
default is to use the thread currently associated with the
block node. (since: 5.2)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">fixed-iothread</span></code>: <code class="docutils literal notranslate"><span class="pre">boolean</span></code> (optional)</dt>
<dd>True prevents the block node from being moved to another
thread while the export is active. If true and <code class="docutils literal notranslate"><span class="pre">iothread</span></code> is
given, export creation fails if the block node cannot be
moved to the iothread. The default is false. (since: 5.2)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">type</span></code>: <code class="docutils literal notranslate"><span class="pre">BlockExportType</span></code></dt>
<dd>Not documented</dd>
<dt>The members of <code class="docutils literal notranslate"><span class="pre">BlockExportOptionsNbd</span></code> when <code class="docutils literal notranslate"><span class="pre">type</span></code> is <code class="docutils literal notranslate"><span class="pre">&quot;nbd&quot;</span></code><dt>The members of <code class="docutils literal notranslate"><span class="pre">BlockExportOptionsVhostUserBlk</span></code> when <code class="docutils literal notranslate"><span class="pre">type</span></code> is <code class="docutils literal notranslate"><span class="pre">&quot;vhost-user-blk&quot;</span></code><dt>The members of <code class="docutils literal notranslate"><span class="pre">BlockExportOptionsFuse</span></code> when <code class="docutils literal notranslate"><span class="pre">type</span></code> is <code class="docutils literal notranslate"><span class="pre">&quot;fuse&quot;</span></code> (<strong>If: </strong><code class="docutils literal notranslate"><span class="pre">defined(CONFIG_FUSE)</span></code>)</dl>
</div>
<div class="section" id="qapidoc-842">
<h5>Since<a class="headerlink" href="#qapidoc-842" title="Permalink to this headline">¶</a></h5>
<p>4.2</p>
</div>
</div>
<div class="section" id="qapidoc-846">
<h4><code class="docutils literal notranslate"><span class="pre">block-export-add</span></code> (Command)<a class="headerlink" href="#qapidoc-846" title="Permalink to this headline">¶</a></h4>
<p>Creates a new block export.</p>
<div class="section" id="qapidoc-844">
<h5>Arguments<a class="headerlink" href="#qapidoc-844" title="Permalink to this headline">¶</a></h5>
<dl class="docutils">
<dt>The members of <code class="docutils literal notranslate"><span class="pre">BlockExportOptions</span></code></dl>
</div>
<div class="section" id="qapidoc-845">
<h5>Since<a class="headerlink" href="#qapidoc-845" title="Permalink to this headline">¶</a></h5>
<p>5.2</p>
</div>
</div>
<div class="section" id="qapidoc-850">
<h4><code class="docutils literal notranslate"><span class="pre">block-export-del</span></code> (Command)<a class="headerlink" href="#qapidoc-850" title="Permalink to this headline">¶</a></h4>
<p>Request to remove a block export. This drops the user’s reference to the
export, but the export may still stay around after this command returns until
the shutdown of the export has completed.</p>
<div class="section" id="qapidoc-847">
<h5>Arguments<a class="headerlink" href="#qapidoc-847" title="Permalink to this headline">¶</a></h5>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">id</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code></dt>
<dd>Block export id.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">mode</span></code>: <code class="docutils literal notranslate"><span class="pre">BlockExportRemoveMode</span></code> (optional)</dt>
<dd>Mode of command operation. See <code class="docutils literal notranslate"><span class="pre">BlockExportRemoveMode</span></code> description.
Default is ‘safe’.</dd>
</dl>
</div>
<div class="section" id="qapidoc-848">
<h5>Returns<a class="headerlink" href="#qapidoc-848" title="Permalink to this headline">¶</a></h5>
<p>Error if the export is not found or <code class="docutils literal notranslate"><span class="pre">mode</span></code> is ‘safe’ and the export
is still in use (e.g. by existing client connections)</p>
</div>
<div class="section" id="qapidoc-849">
<h5>Since<a class="headerlink" href="#qapidoc-849" title="Permalink to this headline">¶</a></h5>
<p>5.2</p>
</div>
</div>
<div class="section" id="qapidoc-853">
<h4><code class="docutils literal notranslate"><span class="pre">BLOCK_EXPORT_DELETED</span></code> (Event)<a class="headerlink" href="#qapidoc-853" title="Permalink to this headline">¶</a></h4>
<p>Emitted when a block export is removed and its id can be reused.</p>
<div class="section" id="qapidoc-851">
<h5>Arguments<a class="headerlink" href="#qapidoc-851" title="Permalink to this headline">¶</a></h5>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">id</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code></dt>
<dd>Block export id.</dd>
</dl>
</div>
<div class="section" id="qapidoc-852">
<h5>Since<a class="headerlink" href="#qapidoc-852" title="Permalink to this headline">¶</a></h5>
<p>5.2</p>
</div>
</div>
<div class="section" id="qapidoc-856">
<h4><code class="docutils literal notranslate"><span class="pre">BlockExportInfo</span></code> (Object)<a class="headerlink" href="#qapidoc-856" title="Permalink to this headline">¶</a></h4>
<p>Information about a single block export.</p>
<div class="section" id="qapidoc-854">
<h5>Members<a class="headerlink" href="#qapidoc-854" title="Permalink to this headline">¶</a></h5>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">id</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code></dt>
<dd>The unique identifier for the block export</dd>
<dt><code class="docutils literal notranslate"><span class="pre">type</span></code>: <code class="docutils literal notranslate"><span class="pre">BlockExportType</span></code></dt>
<dd>The block export type</dd>
<dt><code class="docutils literal notranslate"><span class="pre">node-name</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code></dt>
<dd>The node name of the block node that is exported</dd>
<dt><code class="docutils literal notranslate"><span class="pre">shutting-down</span></code>: <code class="docutils literal notranslate"><span class="pre">boolean</span></code></dt>
<dd>True if the export is shutting down (e.g. after a
block-export-del command, but before the shutdown has
completed)</dd>
</dl>
</div>
<div class="section" id="qapidoc-855">
<h5>Since<a class="headerlink" href="#qapidoc-855" title="Permalink to this headline">¶</a></h5>
<p>5.2</p>
</div>
</div>
<div class="section" id="qapidoc-859">
<h4><code class="docutils literal notranslate"><span class="pre">query-block-exports</span></code> (Command)<a class="headerlink" href="#qapidoc-859" title="Permalink to this headline">¶</a></h4>
<div class="section" id="qapidoc-857">
<h5>Returns<a class="headerlink" href="#qapidoc-857" title="Permalink to this headline">¶</a></h5>
<p>A list of BlockExportInfo describing all block exports</p>
</div>
<div class="section" id="qapidoc-858">
<h5>Since<a class="headerlink" href="#qapidoc-858" title="Permalink to this headline">¶</a></h5>
<p>5.2</p>
</div>
</div>
</div>
</div>
<div class="section" id="qapidoc-860">
<h2>Character devices<a class="headerlink" href="#qapidoc-860" title="Permalink to this headline">¶</a></h2>
<div class="section" id="qapidoc-864">
<h3><code class="docutils literal notranslate"><span class="pre">ChardevInfo</span></code> (Object)<a class="headerlink" href="#qapidoc-864" title="Permalink to this headline">¶</a></h3>
<p>Information about a character device.</p>
<div class="section" id="qapidoc-861">
<h4>Members<a class="headerlink" href="#qapidoc-861" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">label</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code></dt>
<dd>the label of the character device</dd>
<dt><code class="docutils literal notranslate"><span class="pre">filename</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code></dt>
<dd>the filename of the character device</dd>
<dt><code class="docutils literal notranslate"><span class="pre">frontend-open</span></code>: <code class="docutils literal notranslate"><span class="pre">boolean</span></code></dt>
<dd>shows whether the frontend device attached to this backend
(eg. with the chardev=… option) is in open or closed state
(since 2.1)</dd>
</dl>
</div>
<div class="section" id="qapidoc-862">
<h4>Notes<a class="headerlink" href="#qapidoc-862" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">filename</span></code> is encoded using the QEMU command line character device
encoding.  See the QEMU man page for details.</p>
</div>
<div class="section" id="qapidoc-863">
<h4>Since<a class="headerlink" href="#qapidoc-863" title="Permalink to this headline">¶</a></h4>
<p>0.14</p>
</div>
</div>
<div class="section" id="qapidoc-868">
<h3><code class="docutils literal notranslate"><span class="pre">query-chardev</span></code> (Command)<a class="headerlink" href="#qapidoc-868" title="Permalink to this headline">¶</a></h3>
<p>Returns information about current character devices.</p>
<div class="section" id="qapidoc-865">
<h4>Returns<a class="headerlink" href="#qapidoc-865" title="Permalink to this headline">¶</a></h4>
<p>a list of <code class="docutils literal notranslate"><span class="pre">ChardevInfo</span></code></p>
</div>
<div class="section" id="qapidoc-866">
<h4>Since<a class="headerlink" href="#qapidoc-866" title="Permalink to this headline">¶</a></h4>
<p>0.14</p>
</div>
<div class="section" id="qapidoc-867">
<h4>Example<a class="headerlink" href="#qapidoc-867" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-&gt;</span> <span class="p">{</span> <span class="s2">&quot;execute&quot;</span><span class="p">:</span> <span class="s2">&quot;query-chardev&quot;</span> <span class="p">}</span>
<span class="o">&lt;-</span> <span class="p">{</span>
      <span class="s2">&quot;return&quot;</span><span class="p">:</span> <span class="p">[</span>
         <span class="p">{</span>
            <span class="s2">&quot;label&quot;</span><span class="p">:</span> <span class="s2">&quot;charchannel0&quot;</span><span class="p">,</span>
            <span class="s2">&quot;filename&quot;</span><span class="p">:</span> <span class="s2">&quot;unix:/var/lib/libvirt/qemu/seabios.rhel6.agent,server&quot;</span><span class="p">,</span>
            <span class="s2">&quot;frontend-open&quot;</span><span class="p">:</span> <span class="n">false</span>
         <span class="p">},</span>
         <span class="p">{</span>
            <span class="s2">&quot;label&quot;</span><span class="p">:</span> <span class="s2">&quot;charmonitor&quot;</span><span class="p">,</span>
            <span class="s2">&quot;filename&quot;</span><span class="p">:</span> <span class="s2">&quot;unix:/var/lib/libvirt/qemu/seabios.rhel6.monitor,server&quot;</span><span class="p">,</span>
            <span class="s2">&quot;frontend-open&quot;</span><span class="p">:</span> <span class="n">true</span>
         <span class="p">},</span>
         <span class="p">{</span>
            <span class="s2">&quot;label&quot;</span><span class="p">:</span> <span class="s2">&quot;charserial0&quot;</span><span class="p">,</span>
            <span class="s2">&quot;filename&quot;</span><span class="p">:</span> <span class="s2">&quot;pty:/dev/pts/2&quot;</span><span class="p">,</span>
            <span class="s2">&quot;frontend-open&quot;</span><span class="p">:</span> <span class="n">true</span>
         <span class="p">}</span>
      <span class="p">]</span>
   <span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="qapidoc-871">
<h3><code class="docutils literal notranslate"><span class="pre">ChardevBackendInfo</span></code> (Object)<a class="headerlink" href="#qapidoc-871" title="Permalink to this headline">¶</a></h3>
<p>Information about a character device backend</p>
<div class="section" id="qapidoc-869">
<h4>Members<a class="headerlink" href="#qapidoc-869" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">name</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code></dt>
<dd>The backend name</dd>
</dl>
</div>
<div class="section" id="qapidoc-870">
<h4>Since<a class="headerlink" href="#qapidoc-870" title="Permalink to this headline">¶</a></h4>
<p>2.0</p>
</div>
</div>
<div class="section" id="qapidoc-875">
<h3><code class="docutils literal notranslate"><span class="pre">query-chardev-backends</span></code> (Command)<a class="headerlink" href="#qapidoc-875" title="Permalink to this headline">¶</a></h3>
<p>Returns information about character device backends.</p>
<div class="section" id="qapidoc-872">
<h4>Returns<a class="headerlink" href="#qapidoc-872" title="Permalink to this headline">¶</a></h4>
<p>a list of <code class="docutils literal notranslate"><span class="pre">ChardevBackendInfo</span></code></p>
</div>
<div class="section" id="qapidoc-873">
<h4>Since<a class="headerlink" href="#qapidoc-873" title="Permalink to this headline">¶</a></h4>
<p>2.0</p>
</div>
<div class="section" id="qapidoc-874">
<h4>Example<a class="headerlink" href="#qapidoc-874" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-&gt;</span> <span class="p">{</span> <span class="s2">&quot;execute&quot;</span><span class="p">:</span> <span class="s2">&quot;query-chardev-backends&quot;</span> <span class="p">}</span>
<span class="o">&lt;-</span> <span class="p">{</span>
      <span class="s2">&quot;return&quot;</span><span class="p">:[</span>
         <span class="p">{</span>
            <span class="s2">&quot;name&quot;</span><span class="p">:</span><span class="s2">&quot;udp&quot;</span>
         <span class="p">},</span>
         <span class="p">{</span>
            <span class="s2">&quot;name&quot;</span><span class="p">:</span><span class="s2">&quot;tcp&quot;</span>
         <span class="p">},</span>
         <span class="p">{</span>
            <span class="s2">&quot;name&quot;</span><span class="p">:</span><span class="s2">&quot;unix&quot;</span>
         <span class="p">},</span>
         <span class="p">{</span>
            <span class="s2">&quot;name&quot;</span><span class="p">:</span><span class="s2">&quot;spiceport&quot;</span>
         <span class="p">}</span>
      <span class="p">]</span>
   <span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="qapidoc-878">
<h3><code class="docutils literal notranslate"><span class="pre">DataFormat</span></code> (Enum)<a class="headerlink" href="#qapidoc-878" title="Permalink to this headline">¶</a></h3>
<p>An enumeration of data format.</p>
<div class="section" id="qapidoc-876">
<h4>Values<a class="headerlink" href="#qapidoc-876" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">utf8</span></code></dt>
<dd>Data is a UTF-8 string (RFC 3629)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">base64</span></code></dt>
<dd>Data is Base64 encoded binary (RFC 3548)</dd>
</dl>
</div>
<div class="section" id="qapidoc-877">
<h4>Since<a class="headerlink" href="#qapidoc-877" title="Permalink to this headline">¶</a></h4>
<p>1.4</p>
</div>
</div>
<div class="section" id="qapidoc-883">
<h3><code class="docutils literal notranslate"><span class="pre">ringbuf-write</span></code> (Command)<a class="headerlink" href="#qapidoc-883" title="Permalink to this headline">¶</a></h3>
<p>Write to a ring buffer character device.</p>
<div class="section" id="qapidoc-879">
<h4>Arguments<a class="headerlink" href="#qapidoc-879" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">device</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code></dt>
<dd>the ring buffer character device name</dd>
<dt><code class="docutils literal notranslate"><span class="pre">data</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code></dt>
<dd>data to write</dd>
<dt><code class="docutils literal notranslate"><span class="pre">format</span></code>: <code class="docutils literal notranslate"><span class="pre">DataFormat</span></code> (optional)</dt>
<dd><p class="first">data encoding (default ‘utf8’).</p>
<ul class="last simple">
<li>base64: data must be base64 encoded text.  Its binary
decoding gets written.</li>
<li>utf8: data’s UTF-8 encoding is written</li>
<li>data itself is always Unicode regardless of format, like
any other string.</li>
</ul>
</dd>
</dl>
</div>
<div class="section" id="qapidoc-880">
<h4>Returns<a class="headerlink" href="#qapidoc-880" title="Permalink to this headline">¶</a></h4>
<p>Nothing on success</p>
</div>
<div class="section" id="qapidoc-881">
<h4>Since<a class="headerlink" href="#qapidoc-881" title="Permalink to this headline">¶</a></h4>
<p>1.4</p>
</div>
<div class="section" id="qapidoc-882">
<h4>Example<a class="headerlink" href="#qapidoc-882" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-&gt;</span> <span class="p">{</span> <span class="s2">&quot;execute&quot;</span><span class="p">:</span> <span class="s2">&quot;ringbuf-write&quot;</span><span class="p">,</span>
     <span class="s2">&quot;arguments&quot;</span><span class="p">:</span> <span class="p">{</span> <span class="s2">&quot;device&quot;</span><span class="p">:</span> <span class="s2">&quot;foo&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="s2">&quot;abcdefgh&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;format&quot;</span><span class="p">:</span> <span class="s2">&quot;utf8&quot;</span> <span class="p">}</span> <span class="p">}</span>
<span class="o">&lt;-</span> <span class="p">{</span> <span class="s2">&quot;return&quot;</span><span class="p">:</span> <span class="p">{}</span> <span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="qapidoc-888">
<h3><code class="docutils literal notranslate"><span class="pre">ringbuf-read</span></code> (Command)<a class="headerlink" href="#qapidoc-888" title="Permalink to this headline">¶</a></h3>
<p>Read from a ring buffer character device.</p>
<div class="section" id="qapidoc-884">
<h4>Arguments<a class="headerlink" href="#qapidoc-884" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">device</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code></dt>
<dd>the ring buffer character device name</dd>
<dt><code class="docutils literal notranslate"><span class="pre">size</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code></dt>
<dd>how many bytes to read at most</dd>
<dt><code class="docutils literal notranslate"><span class="pre">format</span></code>: <code class="docutils literal notranslate"><span class="pre">DataFormat</span></code> (optional)</dt>
<dd><p class="first">data encoding (default ‘utf8’).</p>
<ul class="last simple">
<li>base64: the data read is returned in base64 encoding.</li>
<li>utf8: the data read is interpreted as UTF-8.
Bug: can screw up when the buffer contains invalid UTF-8
sequences, NUL characters, after the ring buffer lost
data, and when reading stops because the size limit is
reached.</li>
<li>The return value is always Unicode regardless of format,
like any other string.</li>
</ul>
</dd>
</dl>
</div>
<div class="section" id="qapidoc-885">
<h4>Returns<a class="headerlink" href="#qapidoc-885" title="Permalink to this headline">¶</a></h4>
<p>data read from the device</p>
</div>
<div class="section" id="qapidoc-886">
<h4>Since<a class="headerlink" href="#qapidoc-886" title="Permalink to this headline">¶</a></h4>
<p>1.4</p>
</div>
<div class="section" id="qapidoc-887">
<h4>Example<a class="headerlink" href="#qapidoc-887" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-&gt;</span> <span class="p">{</span> <span class="s2">&quot;execute&quot;</span><span class="p">:</span> <span class="s2">&quot;ringbuf-read&quot;</span><span class="p">,</span>
     <span class="s2">&quot;arguments&quot;</span><span class="p">:</span> <span class="p">{</span> <span class="s2">&quot;device&quot;</span><span class="p">:</span> <span class="s2">&quot;foo&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;size&quot;</span><span class="p">:</span> <span class="mi">1000</span><span class="p">,</span>
                    <span class="s2">&quot;format&quot;</span><span class="p">:</span> <span class="s2">&quot;utf8&quot;</span> <span class="p">}</span> <span class="p">}</span>
<span class="o">&lt;-</span> <span class="p">{</span> <span class="s2">&quot;return&quot;</span><span class="p">:</span> <span class="s2">&quot;abcdefgh&quot;</span> <span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="qapidoc-891">
<h3><code class="docutils literal notranslate"><span class="pre">ChardevCommon</span></code> (Object)<a class="headerlink" href="#qapidoc-891" title="Permalink to this headline">¶</a></h3>
<p>Configuration shared across all chardev backends</p>
<div class="section" id="qapidoc-889">
<h4>Members<a class="headerlink" href="#qapidoc-889" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">logfile</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code> (optional)</dt>
<dd>The name of a logfile to save output</dd>
<dt><code class="docutils literal notranslate"><span class="pre">logappend</span></code>: <code class="docutils literal notranslate"><span class="pre">boolean</span></code> (optional)</dt>
<dd>true to append instead of truncate
(default to false to truncate)</dd>
</dl>
</div>
<div class="section" id="qapidoc-890">
<h4>Since<a class="headerlink" href="#qapidoc-890" title="Permalink to this headline">¶</a></h4>
<p>2.6</p>
</div>
</div>
<div class="section" id="qapidoc-894">
<h3><code class="docutils literal notranslate"><span class="pre">ChardevFile</span></code> (Object)<a class="headerlink" href="#qapidoc-894" title="Permalink to this headline">¶</a></h3>
<p>Configuration info for file chardevs.</p>
<div class="section" id="qapidoc-892">
<h4>Members<a class="headerlink" href="#qapidoc-892" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">in</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code> (optional)</dt>
<dd>The name of the input file</dd>
<dt><code class="docutils literal notranslate"><span class="pre">out</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code></dt>
<dd>The name of the output file</dd>
<dt><code class="docutils literal notranslate"><span class="pre">append</span></code>: <code class="docutils literal notranslate"><span class="pre">boolean</span></code> (optional)</dt>
<dd>Open the file in append mode (default false to
truncate) (Since 2.6)</dd>
<dt>The members of <code class="docutils literal notranslate"><span class="pre">ChardevCommon</span></code></dl>
</div>
<div class="section" id="qapidoc-893">
<h4>Since<a class="headerlink" href="#qapidoc-893" title="Permalink to this headline">¶</a></h4>
<p>1.4</p>
</div>
</div>
<div class="section" id="qapidoc-897">
<h3><code class="docutils literal notranslate"><span class="pre">ChardevHostdev</span></code> (Object)<a class="headerlink" href="#qapidoc-897" title="Permalink to this headline">¶</a></h3>
<p>Configuration info for device and pipe chardevs.</p>
<div class="section" id="qapidoc-895">
<h4>Members<a class="headerlink" href="#qapidoc-895" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">device</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code></dt>
<dd>The name of the special file for the device,
i.e. /dev/ttyS0 on Unix or COM1: on Windows</dd>
<dt>The members of <code class="docutils literal notranslate"><span class="pre">ChardevCommon</span></code></dl>
</div>
<div class="section" id="qapidoc-896">
<h4>Since<a class="headerlink" href="#qapidoc-896" title="Permalink to this headline">¶</a></h4>
<p>1.4</p>
</div>
</div>
<div class="section" id="qapidoc-900">
<h3><code class="docutils literal notranslate"><span class="pre">ChardevSocket</span></code> (Object)<a class="headerlink" href="#qapidoc-900" title="Permalink to this headline">¶</a></h3>
<p>Configuration info for (stream) socket chardevs.</p>
<div class="section" id="qapidoc-898">
<h4>Members<a class="headerlink" href="#qapidoc-898" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">addr</span></code>: <code class="docutils literal notranslate"><span class="pre">SocketAddressLegacy</span></code></dt>
<dd>socket address to listen on (server=true)
or connect to (server=false)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">tls-creds</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code> (optional)</dt>
<dd>the ID of the TLS credentials object (since 2.6)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">tls-authz</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code> (optional)</dt>
<dd>the ID of the QAuthZ authorization object against which
the client’s x509 distinguished name will be validated. This
object is only resolved at time of use, so can be deleted
and recreated on the fly while the chardev server is active.
If missing, it will default to denying access (since 4.0)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">server</span></code>: <code class="docutils literal notranslate"><span class="pre">boolean</span></code> (optional)</dt>
<dd>create server socket (default: true)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">wait</span></code>: <code class="docutils literal notranslate"><span class="pre">boolean</span></code> (optional)</dt>
<dd>wait for incoming connection on server
sockets (default: false).
Silently ignored with server: false.  This use is deprecated.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">nodelay</span></code>: <code class="docutils literal notranslate"><span class="pre">boolean</span></code> (optional)</dt>
<dd>set TCP_NODELAY socket option (default: false)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">telnet</span></code>: <code class="docutils literal notranslate"><span class="pre">boolean</span></code> (optional)</dt>
<dd>enable telnet protocol on server
sockets (default: false)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">tn3270</span></code>: <code class="docutils literal notranslate"><span class="pre">boolean</span></code> (optional)</dt>
<dd>enable tn3270 protocol on server
sockets (default: false) (Since: 2.10)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">websocket</span></code>: <code class="docutils literal notranslate"><span class="pre">boolean</span></code> (optional)</dt>
<dd>enable websocket protocol on server
sockets (default: false) (Since: 3.1)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">reconnect</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code> (optional)</dt>
<dd>For a client socket, if a socket is disconnected,
then attempt a reconnect after the given number of seconds.
Setting this to zero disables this function. (default: 0)
(Since: 2.2)</dd>
<dt>The members of <code class="docutils literal notranslate"><span class="pre">ChardevCommon</span></code></dl>
</div>
<div class="section" id="qapidoc-899">
<h4>Since<a class="headerlink" href="#qapidoc-899" title="Permalink to this headline">¶</a></h4>
<p>1.4</p>
</div>
</div>
<div class="section" id="qapidoc-903">
<h3><code class="docutils literal notranslate"><span class="pre">ChardevUdp</span></code> (Object)<a class="headerlink" href="#qapidoc-903" title="Permalink to this headline">¶</a></h3>
<p>Configuration info for datagram socket chardevs.</p>
<div class="section" id="qapidoc-901">
<h4>Members<a class="headerlink" href="#qapidoc-901" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">remote</span></code>: <code class="docutils literal notranslate"><span class="pre">SocketAddressLegacy</span></code></dt>
<dd>remote address</dd>
<dt><code class="docutils literal notranslate"><span class="pre">local</span></code>: <code class="docutils literal notranslate"><span class="pre">SocketAddressLegacy</span></code> (optional)</dt>
<dd>local address</dd>
<dt>The members of <code class="docutils literal notranslate"><span class="pre">ChardevCommon</span></code></dl>
</div>
<div class="section" id="qapidoc-902">
<h4>Since<a class="headerlink" href="#qapidoc-902" title="Permalink to this headline">¶</a></h4>
<p>1.5</p>
</div>
</div>
<div class="section" id="qapidoc-906">
<h3><code class="docutils literal notranslate"><span class="pre">ChardevMux</span></code> (Object)<a class="headerlink" href="#qapidoc-906" title="Permalink to this headline">¶</a></h3>
<p>Configuration info for mux chardevs.</p>
<div class="section" id="qapidoc-904">
<h4>Members<a class="headerlink" href="#qapidoc-904" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">chardev</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code></dt>
<dd>name of the base chardev.</dd>
<dt>The members of <code class="docutils literal notranslate"><span class="pre">ChardevCommon</span></code></dl>
</div>
<div class="section" id="qapidoc-905">
<h4>Since<a class="headerlink" href="#qapidoc-905" title="Permalink to this headline">¶</a></h4>
<p>1.5</p>
</div>
</div>
<div class="section" id="qapidoc-909">
<h3><code class="docutils literal notranslate"><span class="pre">ChardevStdio</span></code> (Object)<a class="headerlink" href="#qapidoc-909" title="Permalink to this headline">¶</a></h3>
<p>Configuration info for stdio chardevs.</p>
<div class="section" id="qapidoc-907">
<h4>Members<a class="headerlink" href="#qapidoc-907" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">signal</span></code>: <code class="docutils literal notranslate"><span class="pre">boolean</span></code> (optional)</dt>
<dd>Allow signals (such as SIGINT triggered by ^C)
be delivered to qemu.  Default: true.</dd>
<dt>The members of <code class="docutils literal notranslate"><span class="pre">ChardevCommon</span></code></dl>
</div>
<div class="section" id="qapidoc-908">
<h4>Since<a class="headerlink" href="#qapidoc-908" title="Permalink to this headline">¶</a></h4>
<p>1.5</p>
</div>
</div>
<div class="section" id="qapidoc-913">
<h3><code class="docutils literal notranslate"><span class="pre">ChardevSpiceChannel</span></code> (Object)<a class="headerlink" href="#qapidoc-913" title="Permalink to this headline">¶</a></h3>
<p>Configuration info for spice vm channel chardevs.</p>
<div class="section" id="qapidoc-910">
<h4>Members<a class="headerlink" href="#qapidoc-910" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">type</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code></dt>
<dd>kind of channel (for example vdagent).</dd>
<dt>The members of <code class="docutils literal notranslate"><span class="pre">ChardevCommon</span></code></dl>
</div>
<div class="section" id="qapidoc-911">
<h4>Since<a class="headerlink" href="#qapidoc-911" title="Permalink to this headline">¶</a></h4>
<p>1.5</p>
</div>
<div class="section" id="qapidoc-912">
<h4>If<a class="headerlink" href="#qapidoc-912" title="Permalink to this headline">¶</a></h4>
<code class="docutils literal notranslate"><span class="pre">defined(CONFIG_SPICE)</span></code></div>
</div>
<div class="section" id="qapidoc-917">
<h3><code class="docutils literal notranslate"><span class="pre">ChardevSpicePort</span></code> (Object)<a class="headerlink" href="#qapidoc-917" title="Permalink to this headline">¶</a></h3>
<p>Configuration info for spice port chardevs.</p>
<div class="section" id="qapidoc-914">
<h4>Members<a class="headerlink" href="#qapidoc-914" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">fqdn</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code></dt>
<dd>name of the channel (see docs/spice-port-fqdn.txt)</dd>
<dt>The members of <code class="docutils literal notranslate"><span class="pre">ChardevCommon</span></code></dl>
</div>
<div class="section" id="qapidoc-915">
<h4>Since<a class="headerlink" href="#qapidoc-915" title="Permalink to this headline">¶</a></h4>
<p>1.5</p>
</div>
<div class="section" id="qapidoc-916">
<h4>If<a class="headerlink" href="#qapidoc-916" title="Permalink to this headline">¶</a></h4>
<code class="docutils literal notranslate"><span class="pre">defined(CONFIG_SPICE)</span></code></div>
</div>
<div class="section" id="qapidoc-920">
<h3><code class="docutils literal notranslate"><span class="pre">ChardevVC</span></code> (Object)<a class="headerlink" href="#qapidoc-920" title="Permalink to this headline">¶</a></h3>
<p>Configuration info for virtual console chardevs.</p>
<div class="section" id="qapidoc-918">
<h4>Members<a class="headerlink" href="#qapidoc-918" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">width</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code> (optional)</dt>
<dd>console width,  in pixels</dd>
<dt><code class="docutils literal notranslate"><span class="pre">height</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code> (optional)</dt>
<dd>console height, in pixels</dd>
<dt><code class="docutils literal notranslate"><span class="pre">cols</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code> (optional)</dt>
<dd>console width,  in chars</dd>
<dt><code class="docutils literal notranslate"><span class="pre">rows</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code> (optional)</dt>
<dd>console height, in chars</dd>
<dt>The members of <code class="docutils literal notranslate"><span class="pre">ChardevCommon</span></code></dl>
</div>
<div class="section" id="qapidoc-919">
<h4>Since<a class="headerlink" href="#qapidoc-919" title="Permalink to this headline">¶</a></h4>
<p>1.5</p>
</div>
</div>
<div class="section" id="qapidoc-923">
<h3><code class="docutils literal notranslate"><span class="pre">ChardevRingbuf</span></code> (Object)<a class="headerlink" href="#qapidoc-923" title="Permalink to this headline">¶</a></h3>
<p>Configuration info for ring buffer chardevs.</p>
<div class="section" id="qapidoc-921">
<h4>Members<a class="headerlink" href="#qapidoc-921" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">size</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code> (optional)</dt>
<dd>ring buffer size, must be power of two, default is 65536</dd>
<dt>The members of <code class="docutils literal notranslate"><span class="pre">ChardevCommon</span></code></dl>
</div>
<div class="section" id="qapidoc-922">
<h4>Since<a class="headerlink" href="#qapidoc-922" title="Permalink to this headline">¶</a></h4>
<p>1.5</p>
</div>
</div>
<div class="section" id="qapidoc-926">
<h3><code class="docutils literal notranslate"><span class="pre">ChardevBackend</span></code> (Object)<a class="headerlink" href="#qapidoc-926" title="Permalink to this headline">¶</a></h3>
<p>Configuration info for the new chardev backend.</p>
<div class="section" id="qapidoc-924">
<h4>Members<a class="headerlink" href="#qapidoc-924" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">type</span></code></dt>
<dd>One of <code class="docutils literal notranslate"><span class="pre">file</span></code>, <code class="docutils literal notranslate"><span class="pre">serial</span></code>, <code class="docutils literal notranslate"><span class="pre">parallel</span></code>, <code class="docutils literal notranslate"><span class="pre">pipe</span></code>, <code class="docutils literal notranslate"><span class="pre">socket</span></code>, <code class="docutils literal notranslate"><span class="pre">udp</span></code>, <code class="docutils literal notranslate"><span class="pre">pty</span></code>, <code class="docutils literal notranslate"><span class="pre">null</span></code>, <code class="docutils literal notranslate"><span class="pre">mux</span></code>, <code class="docutils literal notranslate"><span class="pre">msmouse</span></code>, <code class="docutils literal notranslate"><span class="pre">wctablet</span></code>, <code class="docutils literal notranslate"><span class="pre">braille</span></code>, <code class="docutils literal notranslate"><span class="pre">testdev</span></code>, <code class="docutils literal notranslate"><span class="pre">stdio</span></code>, <code class="docutils literal notranslate"><span class="pre">console</span></code>, <code class="docutils literal notranslate"><span class="pre">spicevmc</span></code>, <code class="docutils literal notranslate"><span class="pre">spiceport</span></code>, <code class="docutils literal notranslate"><span class="pre">vc</span></code>, <code class="docutils literal notranslate"><span class="pre">ringbuf</span></code>, <code class="docutils literal notranslate"><span class="pre">memory</span></code></dd>
<dt><code class="docutils literal notranslate"><span class="pre">data</span></code>: <code class="docutils literal notranslate"><span class="pre">ChardevFile</span></code> when <code class="docutils literal notranslate"><span class="pre">type</span></code> is <code class="docutils literal notranslate"><span class="pre">&quot;file&quot;</span></code><dt><code class="docutils literal notranslate"><span class="pre">data</span></code>: <code class="docutils literal notranslate"><span class="pre">ChardevHostdev</span></code> when <code class="docutils literal notranslate"><span class="pre">type</span></code> is <code class="docutils literal notranslate"><span class="pre">&quot;serial&quot;</span></code><dt><code class="docutils literal notranslate"><span class="pre">data</span></code>: <code class="docutils literal notranslate"><span class="pre">ChardevHostdev</span></code> when <code class="docutils literal notranslate"><span class="pre">type</span></code> is <code class="docutils literal notranslate"><span class="pre">&quot;parallel&quot;</span></code><dt><code class="docutils literal notranslate"><span class="pre">data</span></code>: <code class="docutils literal notranslate"><span class="pre">ChardevHostdev</span></code> when <code class="docutils literal notranslate"><span class="pre">type</span></code> is <code class="docutils literal notranslate"><span class="pre">&quot;pipe&quot;</span></code><dt><code class="docutils literal notranslate"><span class="pre">data</span></code>: <code class="docutils literal notranslate"><span class="pre">ChardevSocket</span></code> when <code class="docutils literal notranslate"><span class="pre">type</span></code> is <code class="docutils literal notranslate"><span class="pre">&quot;socket&quot;</span></code><dt><code class="docutils literal notranslate"><span class="pre">data</span></code>: <code class="docutils literal notranslate"><span class="pre">ChardevUdp</span></code> when <code class="docutils literal notranslate"><span class="pre">type</span></code> is <code class="docutils literal notranslate"><span class="pre">&quot;udp&quot;</span></code><dt><code class="docutils literal notranslate"><span class="pre">data</span></code>: <code class="docutils literal notranslate"><span class="pre">ChardevCommon</span></code> when <code class="docutils literal notranslate"><span class="pre">type</span></code> is <code class="docutils literal notranslate"><span class="pre">&quot;pty&quot;</span></code><dt><code class="docutils literal notranslate"><span class="pre">data</span></code>: <code class="docutils literal notranslate"><span class="pre">ChardevCommon</span></code> when <code class="docutils literal notranslate"><span class="pre">type</span></code> is <code class="docutils literal notranslate"><span class="pre">&quot;null&quot;</span></code><dt><code class="docutils literal notranslate"><span class="pre">data</span></code>: <code class="docutils literal notranslate"><span class="pre">ChardevMux</span></code> when <code class="docutils literal notranslate"><span class="pre">type</span></code> is <code class="docutils literal notranslate"><span class="pre">&quot;mux&quot;</span></code><dt><code class="docutils literal notranslate"><span class="pre">data</span></code>: <code class="docutils literal notranslate"><span class="pre">ChardevCommon</span></code> when <code class="docutils literal notranslate"><span class="pre">type</span></code> is <code class="docutils literal notranslate"><span class="pre">&quot;msmouse&quot;</span></code><dt><code class="docutils literal notranslate"><span class="pre">data</span></code>: <code class="docutils literal notranslate"><span class="pre">ChardevCommon</span></code> when <code class="docutils literal notranslate"><span class="pre">type</span></code> is <code class="docutils literal notranslate"><span class="pre">&quot;wctablet&quot;</span></code><dt><code class="docutils literal notranslate"><span class="pre">data</span></code>: <code class="docutils literal notranslate"><span class="pre">ChardevCommon</span></code> when <code class="docutils literal notranslate"><span class="pre">type</span></code> is <code class="docutils literal notranslate"><span class="pre">&quot;braille&quot;</span></code><dt><code class="docutils literal notranslate"><span class="pre">data</span></code>: <code class="docutils literal notranslate"><span class="pre">ChardevCommon</span></code> when <code class="docutils literal notranslate"><span class="pre">type</span></code> is <code class="docutils literal notranslate"><span class="pre">&quot;testdev&quot;</span></code><dt><code class="docutils literal notranslate"><span class="pre">data</span></code>: <code class="docutils literal notranslate"><span class="pre">ChardevStdio</span></code> when <code class="docutils literal notranslate"><span class="pre">type</span></code> is <code class="docutils literal notranslate"><span class="pre">&quot;stdio&quot;</span></code><dt><code class="docutils literal notranslate"><span class="pre">data</span></code>: <code class="docutils literal notranslate"><span class="pre">ChardevCommon</span></code> when <code class="docutils literal notranslate"><span class="pre">type</span></code> is <code class="docutils literal notranslate"><span class="pre">&quot;console&quot;</span></code><dt><code class="docutils literal notranslate"><span class="pre">data</span></code>: <code class="docutils literal notranslate"><span class="pre">ChardevSpiceChannel</span></code> when <code class="docutils literal notranslate"><span class="pre">type</span></code> is <code class="docutils literal notranslate"><span class="pre">&quot;spicevmc&quot;</span></code> (<strong>If: </strong><code class="docutils literal notranslate"><span class="pre">defined(CONFIG_SPICE)</span></code>)<dt><code class="docutils literal notranslate"><span class="pre">data</span></code>: <code class="docutils literal notranslate"><span class="pre">ChardevSpicePort</span></code> when <code class="docutils literal notranslate"><span class="pre">type</span></code> is <code class="docutils literal notranslate"><span class="pre">&quot;spiceport&quot;</span></code> (<strong>If: </strong><code class="docutils literal notranslate"><span class="pre">defined(CONFIG_SPICE)</span></code>)<dt><code class="docutils literal notranslate"><span class="pre">data</span></code>: <code class="docutils literal notranslate"><span class="pre">ChardevVC</span></code> when <code class="docutils literal notranslate"><span class="pre">type</span></code> is <code class="docutils literal notranslate"><span class="pre">&quot;vc&quot;</span></code><dt><code class="docutils literal notranslate"><span class="pre">data</span></code>: <code class="docutils literal notranslate"><span class="pre">ChardevRingbuf</span></code> when <code class="docutils literal notranslate"><span class="pre">type</span></code> is <code class="docutils literal notranslate"><span class="pre">&quot;ringbuf&quot;</span></code><dt><code class="docutils literal notranslate"><span class="pre">data</span></code>: <code class="docutils literal notranslate"><span class="pre">ChardevRingbuf</span></code> when <code class="docutils literal notranslate"><span class="pre">type</span></code> is <code class="docutils literal notranslate"><span class="pre">&quot;memory&quot;</span></code></dl>
</div>
<div class="section" id="qapidoc-925">
<h4>Since<a class="headerlink" href="#qapidoc-925" title="Permalink to this headline">¶</a></h4>
<p>1.4 (testdev since 2.2, wctablet since 2.9)</p>
</div>
</div>
<div class="section" id="qapidoc-929">
<h3><code class="docutils literal notranslate"><span class="pre">ChardevReturn</span></code> (Object)<a class="headerlink" href="#qapidoc-929" title="Permalink to this headline">¶</a></h3>
<p>Return info about the chardev backend just created.</p>
<div class="section" id="qapidoc-927">
<h4>Members<a class="headerlink" href="#qapidoc-927" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">pty</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code> (optional)</dt>
<dd>name of the slave pseudoterminal device, present if
and only if a chardev of type ‘pty’ was created</dd>
</dl>
</div>
<div class="section" id="qapidoc-928">
<h4>Since<a class="headerlink" href="#qapidoc-928" title="Permalink to this headline">¶</a></h4>
<p>1.4</p>
</div>
</div>
<div class="section" id="qapidoc-934">
<h3><code class="docutils literal notranslate"><span class="pre">chardev-add</span></code> (Command)<a class="headerlink" href="#qapidoc-934" title="Permalink to this headline">¶</a></h3>
<p>Add a character device backend</p>
<div class="section" id="qapidoc-930">
<h4>Arguments<a class="headerlink" href="#qapidoc-930" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">id</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code></dt>
<dd>the chardev’s ID, must be unique</dd>
<dt><code class="docutils literal notranslate"><span class="pre">backend</span></code>: <code class="docutils literal notranslate"><span class="pre">ChardevBackend</span></code></dt>
<dd>backend type and parameters</dd>
</dl>
</div>
<div class="section" id="qapidoc-931">
<h4>Returns<a class="headerlink" href="#qapidoc-931" title="Permalink to this headline">¶</a></h4>
<p>ChardevReturn.</p>
</div>
<div class="section" id="qapidoc-932">
<h4>Since<a class="headerlink" href="#qapidoc-932" title="Permalink to this headline">¶</a></h4>
<p>1.4</p>
</div>
<div class="section" id="qapidoc-933">
<h4>Example<a class="headerlink" href="#qapidoc-933" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-&gt;</span> <span class="p">{</span> <span class="s2">&quot;execute&quot;</span> <span class="p">:</span> <span class="s2">&quot;chardev-add&quot;</span><span class="p">,</span>
     <span class="s2">&quot;arguments&quot;</span> <span class="p">:</span> <span class="p">{</span> <span class="s2">&quot;id&quot;</span> <span class="p">:</span> <span class="s2">&quot;foo&quot;</span><span class="p">,</span>
                     <span class="s2">&quot;backend&quot;</span> <span class="p">:</span> <span class="p">{</span> <span class="s2">&quot;type&quot;</span> <span class="p">:</span> <span class="s2">&quot;null&quot;</span><span class="p">,</span> <span class="s2">&quot;data&quot;</span> <span class="p">:</span> <span class="p">{}</span> <span class="p">}</span> <span class="p">}</span> <span class="p">}</span>
<span class="o">&lt;-</span> <span class="p">{</span> <span class="s2">&quot;return&quot;</span><span class="p">:</span> <span class="p">{}</span> <span class="p">}</span>

<span class="o">-&gt;</span> <span class="p">{</span> <span class="s2">&quot;execute&quot;</span> <span class="p">:</span> <span class="s2">&quot;chardev-add&quot;</span><span class="p">,</span>
     <span class="s2">&quot;arguments&quot;</span> <span class="p">:</span> <span class="p">{</span> <span class="s2">&quot;id&quot;</span> <span class="p">:</span> <span class="s2">&quot;bar&quot;</span><span class="p">,</span>
                     <span class="s2">&quot;backend&quot;</span> <span class="p">:</span> <span class="p">{</span> <span class="s2">&quot;type&quot;</span> <span class="p">:</span> <span class="s2">&quot;file&quot;</span><span class="p">,</span>
                                   <span class="s2">&quot;data&quot;</span> <span class="p">:</span> <span class="p">{</span> <span class="s2">&quot;out&quot;</span> <span class="p">:</span> <span class="s2">&quot;/tmp/bar.log&quot;</span> <span class="p">}</span> <span class="p">}</span> <span class="p">}</span> <span class="p">}</span>
<span class="o">&lt;-</span> <span class="p">{</span> <span class="s2">&quot;return&quot;</span><span class="p">:</span> <span class="p">{}</span> <span class="p">}</span>

<span class="o">-&gt;</span> <span class="p">{</span> <span class="s2">&quot;execute&quot;</span> <span class="p">:</span> <span class="s2">&quot;chardev-add&quot;</span><span class="p">,</span>
     <span class="s2">&quot;arguments&quot;</span> <span class="p">:</span> <span class="p">{</span> <span class="s2">&quot;id&quot;</span> <span class="p">:</span> <span class="s2">&quot;baz&quot;</span><span class="p">,</span>
                     <span class="s2">&quot;backend&quot;</span> <span class="p">:</span> <span class="p">{</span> <span class="s2">&quot;type&quot;</span> <span class="p">:</span> <span class="s2">&quot;pty&quot;</span><span class="p">,</span> <span class="s2">&quot;data&quot;</span> <span class="p">:</span> <span class="p">{}</span> <span class="p">}</span> <span class="p">}</span> <span class="p">}</span>
<span class="o">&lt;-</span> <span class="p">{</span> <span class="s2">&quot;return&quot;</span><span class="p">:</span> <span class="p">{</span> <span class="s2">&quot;pty&quot;</span> <span class="p">:</span> <span class="s2">&quot;/dev/pty/42&quot;</span> <span class="p">}</span> <span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="qapidoc-939">
<h3><code class="docutils literal notranslate"><span class="pre">chardev-change</span></code> (Command)<a class="headerlink" href="#qapidoc-939" title="Permalink to this headline">¶</a></h3>
<p>Change a character device backend</p>
<div class="section" id="qapidoc-935">
<h4>Arguments<a class="headerlink" href="#qapidoc-935" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">id</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code></dt>
<dd>the chardev’s ID, must exist</dd>
<dt><code class="docutils literal notranslate"><span class="pre">backend</span></code>: <code class="docutils literal notranslate"><span class="pre">ChardevBackend</span></code></dt>
<dd>new backend type and parameters</dd>
</dl>
</div>
<div class="section" id="qapidoc-936">
<h4>Returns<a class="headerlink" href="#qapidoc-936" title="Permalink to this headline">¶</a></h4>
<p>ChardevReturn.</p>
</div>
<div class="section" id="qapidoc-937">
<h4>Since<a class="headerlink" href="#qapidoc-937" title="Permalink to this headline">¶</a></h4>
<p>2.10</p>
</div>
<div class="section" id="qapidoc-938">
<h4>Example<a class="headerlink" href="#qapidoc-938" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-&gt;</span> <span class="p">{</span> <span class="s2">&quot;execute&quot;</span> <span class="p">:</span> <span class="s2">&quot;chardev-change&quot;</span><span class="p">,</span>
     <span class="s2">&quot;arguments&quot;</span> <span class="p">:</span> <span class="p">{</span> <span class="s2">&quot;id&quot;</span> <span class="p">:</span> <span class="s2">&quot;baz&quot;</span><span class="p">,</span>
                     <span class="s2">&quot;backend&quot;</span> <span class="p">:</span> <span class="p">{</span> <span class="s2">&quot;type&quot;</span> <span class="p">:</span> <span class="s2">&quot;pty&quot;</span><span class="p">,</span> <span class="s2">&quot;data&quot;</span> <span class="p">:</span> <span class="p">{}</span> <span class="p">}</span> <span class="p">}</span> <span class="p">}</span>
<span class="o">&lt;-</span> <span class="p">{</span> <span class="s2">&quot;return&quot;</span><span class="p">:</span> <span class="p">{</span> <span class="s2">&quot;pty&quot;</span> <span class="p">:</span> <span class="s2">&quot;/dev/pty/42&quot;</span> <span class="p">}</span> <span class="p">}</span>

<span class="o">-&gt;</span> <span class="p">{</span><span class="s2">&quot;execute&quot;</span> <span class="p">:</span> <span class="s2">&quot;chardev-change&quot;</span><span class="p">,</span>
    <span class="s2">&quot;arguments&quot;</span> <span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;id&quot;</span> <span class="p">:</span> <span class="s2">&quot;charchannel2&quot;</span><span class="p">,</span>
        <span class="s2">&quot;backend&quot;</span> <span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;type&quot;</span> <span class="p">:</span> <span class="s2">&quot;socket&quot;</span><span class="p">,</span>
            <span class="s2">&quot;data&quot;</span> <span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;addr&quot;</span> <span class="p">:</span> <span class="p">{</span>
                    <span class="s2">&quot;type&quot;</span> <span class="p">:</span> <span class="s2">&quot;unix&quot;</span> <span class="p">,</span>
                    <span class="s2">&quot;data&quot;</span> <span class="p">:</span> <span class="p">{</span>
                        <span class="s2">&quot;path&quot;</span> <span class="p">:</span> <span class="s2">&quot;/tmp/charchannel2.socket&quot;</span>
                    <span class="p">}</span>
                 <span class="p">},</span>
                 <span class="s2">&quot;server&quot;</span> <span class="p">:</span> <span class="n">true</span><span class="p">,</span>
                 <span class="s2">&quot;wait&quot;</span> <span class="p">:</span> <span class="n">false</span> <span class="p">}}}}</span>
<span class="o">&lt;-</span> <span class="p">{</span><span class="s2">&quot;return&quot;</span><span class="p">:</span> <span class="p">{}}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="qapidoc-944">
<h3><code class="docutils literal notranslate"><span class="pre">chardev-remove</span></code> (Command)<a class="headerlink" href="#qapidoc-944" title="Permalink to this headline">¶</a></h3>
<p>Remove a character device backend</p>
<div class="section" id="qapidoc-940">
<h4>Arguments<a class="headerlink" href="#qapidoc-940" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">id</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code></dt>
<dd>the chardev’s ID, must exist and not be in use</dd>
</dl>
</div>
<div class="section" id="qapidoc-941">
<h4>Returns<a class="headerlink" href="#qapidoc-941" title="Permalink to this headline">¶</a></h4>
<p>Nothing on success</p>
</div>
<div class="section" id="qapidoc-942">
<h4>Since<a class="headerlink" href="#qapidoc-942" title="Permalink to this headline">¶</a></h4>
<p>1.4</p>
</div>
<div class="section" id="qapidoc-943">
<h4>Example<a class="headerlink" href="#qapidoc-943" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-&gt;</span> <span class="p">{</span> <span class="s2">&quot;execute&quot;</span><span class="p">:</span> <span class="s2">&quot;chardev-remove&quot;</span><span class="p">,</span> <span class="s2">&quot;arguments&quot;</span><span class="p">:</span> <span class="p">{</span> <span class="s2">&quot;id&quot;</span> <span class="p">:</span> <span class="s2">&quot;foo&quot;</span> <span class="p">}</span> <span class="p">}</span>
<span class="o">&lt;-</span> <span class="p">{</span> <span class="s2">&quot;return&quot;</span><span class="p">:</span> <span class="p">{}</span> <span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="qapidoc-949">
<h3><code class="docutils literal notranslate"><span class="pre">chardev-send-break</span></code> (Command)<a class="headerlink" href="#qapidoc-949" title="Permalink to this headline">¶</a></h3>
<p>Send a break to a character device</p>
<div class="section" id="qapidoc-945">
<h4>Arguments<a class="headerlink" href="#qapidoc-945" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">id</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code></dt>
<dd>the chardev’s ID, must exist</dd>
</dl>
</div>
<div class="section" id="qapidoc-946">
<h4>Returns<a class="headerlink" href="#qapidoc-946" title="Permalink to this headline">¶</a></h4>
<p>Nothing on success</p>
</div>
<div class="section" id="qapidoc-947">
<h4>Since<a class="headerlink" href="#qapidoc-947" title="Permalink to this headline">¶</a></h4>
<p>2.10</p>
</div>
<div class="section" id="qapidoc-948">
<h4>Example<a class="headerlink" href="#qapidoc-948" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-&gt;</span> <span class="p">{</span> <span class="s2">&quot;execute&quot;</span><span class="p">:</span> <span class="s2">&quot;chardev-send-break&quot;</span><span class="p">,</span> <span class="s2">&quot;arguments&quot;</span><span class="p">:</span> <span class="p">{</span> <span class="s2">&quot;id&quot;</span> <span class="p">:</span> <span class="s2">&quot;foo&quot;</span> <span class="p">}</span> <span class="p">}</span>
<span class="o">&lt;-</span> <span class="p">{</span> <span class="s2">&quot;return&quot;</span><span class="p">:</span> <span class="p">{}</span> <span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="qapidoc-954">
<h3><code class="docutils literal notranslate"><span class="pre">VSERPORT_CHANGE</span></code> (Event)<a class="headerlink" href="#qapidoc-954" title="Permalink to this headline">¶</a></h3>
<p>Emitted when the guest opens or closes a virtio-serial port.</p>
<div class="section" id="qapidoc-950">
<h4>Arguments<a class="headerlink" href="#qapidoc-950" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">id</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code></dt>
<dd>device identifier of the virtio-serial port</dd>
<dt><code class="docutils literal notranslate"><span class="pre">open</span></code>: <code class="docutils literal notranslate"><span class="pre">boolean</span></code></dt>
<dd>true if the guest has opened the virtio-serial port</dd>
</dl>
</div>
<div class="section" id="qapidoc-951">
<h4>Note<a class="headerlink" href="#qapidoc-951" title="Permalink to this headline">¶</a></h4>
<p>This event is rate-limited.</p>
</div>
<div class="section" id="qapidoc-952">
<h4>Since<a class="headerlink" href="#qapidoc-952" title="Permalink to this headline">¶</a></h4>
<p>2.1</p>
</div>
<div class="section" id="qapidoc-953">
<h4>Example<a class="headerlink" href="#qapidoc-953" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;-</span> <span class="p">{</span> <span class="s2">&quot;event&quot;</span><span class="p">:</span> <span class="s2">&quot;VSERPORT_CHANGE&quot;</span><span class="p">,</span>
     <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span> <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;channel0&quot;</span><span class="p">,</span> <span class="s2">&quot;open&quot;</span><span class="p">:</span> <span class="n">true</span> <span class="p">},</span>
     <span class="s2">&quot;timestamp&quot;</span><span class="p">:</span> <span class="p">{</span> <span class="s2">&quot;seconds&quot;</span><span class="p">:</span> <span class="mi">1401385907</span><span class="p">,</span> <span class="s2">&quot;microseconds&quot;</span><span class="p">:</span> <span class="mi">422329</span> <span class="p">}</span> <span class="p">}</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="qapidoc-955">
<h2>QMP monitor control<a class="headerlink" href="#qapidoc-955" title="Permalink to this headline">¶</a></h2>
<div class="section" id="qapidoc-960">
<h3><code class="docutils literal notranslate"><span class="pre">qmp_capabilities</span></code> (Command)<a class="headerlink" href="#qapidoc-960" title="Permalink to this headline">¶</a></h3>
<p>Enable QMP capabilities.</p>
<p>Arguments:</p>
<div class="section" id="qapidoc-956">
<h4>Arguments<a class="headerlink" href="#qapidoc-956" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">enable</span></code>: <code class="docutils literal notranslate"><span class="pre">array</span> <span class="pre">of</span> <span class="pre">QMPCapability</span></code> (optional)</dt>
<dd>An optional list of QMPCapability values to enable.  The
client must not enable any capability that is not
mentioned in the QMP greeting message.  If the field is not
provided, it means no QMP capabilities will be enabled.
(since 2.12)</dd>
</dl>
</div>
<div class="section" id="qapidoc-957">
<h4>Example<a class="headerlink" href="#qapidoc-957" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-&gt;</span> <span class="p">{</span> <span class="s2">&quot;execute&quot;</span><span class="p">:</span> <span class="s2">&quot;qmp_capabilities&quot;</span><span class="p">,</span>
     <span class="s2">&quot;arguments&quot;</span><span class="p">:</span> <span class="p">{</span> <span class="s2">&quot;enable&quot;</span><span class="p">:</span> <span class="p">[</span> <span class="s2">&quot;oob&quot;</span> <span class="p">]</span> <span class="p">}</span> <span class="p">}</span>
<span class="o">&lt;-</span> <span class="p">{</span> <span class="s2">&quot;return&quot;</span><span class="p">:</span> <span class="p">{}</span> <span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="qapidoc-958">
<h4>Notes<a class="headerlink" href="#qapidoc-958" title="Permalink to this headline">¶</a></h4>
<p>This command is valid exactly when first connecting: it must be
issued before any other command will be accepted, and will fail once the
monitor is accepting other commands. (see qemu docs/interop/qmp-spec.txt)</p>
<p>The QMP client needs to explicitly enable QMP capabilities, otherwise
all the QMP capabilities will be turned off by default.</p>
</div>
<div class="section" id="qapidoc-959">
<h4>Since<a class="headerlink" href="#qapidoc-959" title="Permalink to this headline">¶</a></h4>
<p>0.13</p>
</div>
</div>
<div class="section" id="qapidoc-963">
<h3><code class="docutils literal notranslate"><span class="pre">QMPCapability</span></code> (Enum)<a class="headerlink" href="#qapidoc-963" title="Permalink to this headline">¶</a></h3>
<p>Enumeration of capabilities to be advertised during initial client
connection, used for agreeing on particular QMP extension behaviors.</p>
<div class="section" id="qapidoc-961">
<h4>Values<a class="headerlink" href="#qapidoc-961" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">oob</span></code></dt>
<dd>QMP ability to support out-of-band requests.
(Please refer to qmp-spec.txt for more information on OOB)</dd>
</dl>
</div>
<div class="section" id="qapidoc-962">
<h4>Since<a class="headerlink" href="#qapidoc-962" title="Permalink to this headline">¶</a></h4>
<p>2.12</p>
</div>
</div>
<div class="section" id="qapidoc-966">
<h3><code class="docutils literal notranslate"><span class="pre">VersionTriple</span></code> (Object)<a class="headerlink" href="#qapidoc-966" title="Permalink to this headline">¶</a></h3>
<p>A three-part version number.</p>
<div class="section" id="qapidoc-964">
<h4>Members<a class="headerlink" href="#qapidoc-964" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">major</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code></dt>
<dd>The major version number.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">minor</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code></dt>
<dd>The minor version number.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">micro</span></code>: <code class="docutils literal notranslate"><span class="pre">int</span></code></dt>
<dd>The micro version number.</dd>
</dl>
</div>
<div class="section" id="qapidoc-965">
<h4>Since<a class="headerlink" href="#qapidoc-965" title="Permalink to this headline">¶</a></h4>
<p>2.4</p>
</div>
</div>
<div class="section" id="qapidoc-969">
<h3><code class="docutils literal notranslate"><span class="pre">VersionInfo</span></code> (Object)<a class="headerlink" href="#qapidoc-969" title="Permalink to this headline">¶</a></h3>
<p>A description of QEMU’s version.</p>
<div class="section" id="qapidoc-967">
<h4>Members<a class="headerlink" href="#qapidoc-967" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">qemu</span></code>: <code class="docutils literal notranslate"><span class="pre">VersionTriple</span></code></dt>
<dd>The version of QEMU.  By current convention, a micro
version of 50 signifies a development branch.  A micro version
greater than or equal to 90 signifies a release candidate for
the next minor version.  A micro version of less than 50
signifies a stable release.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">package</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code></dt>
<dd>QEMU will always set this field to an empty string.  Downstream
versions of QEMU should set this to a non-empty string.  The
exact format depends on the downstream however it highly
recommended that a unique name is used.</dd>
</dl>
</div>
<div class="section" id="qapidoc-968">
<h4>Since<a class="headerlink" href="#qapidoc-968" title="Permalink to this headline">¶</a></h4>
<p>0.14</p>
</div>
</div>
<div class="section" id="qapidoc-973">
<h3><code class="docutils literal notranslate"><span class="pre">query-version</span></code> (Command)<a class="headerlink" href="#qapidoc-973" title="Permalink to this headline">¶</a></h3>
<p>Returns the current version of QEMU.</p>
<div class="section" id="qapidoc-970">
<h4>Returns<a class="headerlink" href="#qapidoc-970" title="Permalink to this headline">¶</a></h4>
<p>A <code class="docutils literal notranslate"><span class="pre">VersionInfo</span></code> object describing the current version of QEMU.</p>
</div>
<div class="section" id="qapidoc-971">
<h4>Since<a class="headerlink" href="#qapidoc-971" title="Permalink to this headline">¶</a></h4>
<p>0.14</p>
</div>
<div class="section" id="qapidoc-972">
<h4>Example<a class="headerlink" href="#qapidoc-972" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-&gt;</span> <span class="p">{</span> <span class="s2">&quot;execute&quot;</span><span class="p">:</span> <span class="s2">&quot;query-version&quot;</span> <span class="p">}</span>
<span class="o">&lt;-</span> <span class="p">{</span>
      <span class="s2">&quot;return&quot;</span><span class="p">:{</span>
         <span class="s2">&quot;qemu&quot;</span><span class="p">:{</span>
            <span class="s2">&quot;major&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
            <span class="s2">&quot;minor&quot;</span><span class="p">:</span><span class="mi">11</span><span class="p">,</span>
            <span class="s2">&quot;micro&quot;</span><span class="p">:</span><span class="mi">5</span>
         <span class="p">},</span>
         <span class="s2">&quot;package&quot;</span><span class="p">:</span><span class="s2">&quot;&quot;</span>
      <span class="p">}</span>
   <span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="qapidoc-976">
<h3><code class="docutils literal notranslate"><span class="pre">CommandInfo</span></code> (Object)<a class="headerlink" href="#qapidoc-976" title="Permalink to this headline">¶</a></h3>
<p>Information about a QMP command</p>
<div class="section" id="qapidoc-974">
<h4>Members<a class="headerlink" href="#qapidoc-974" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">name</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code></dt>
<dd>The command name</dd>
</dl>
</div>
<div class="section" id="qapidoc-975">
<h4>Since<a class="headerlink" href="#qapidoc-975" title="Permalink to this headline">¶</a></h4>
<p>0.14</p>
</div>
</div>
<div class="section" id="qapidoc-981">
<h3><code class="docutils literal notranslate"><span class="pre">query-commands</span></code> (Command)<a class="headerlink" href="#qapidoc-981" title="Permalink to this headline">¶</a></h3>
<p>Return a list of supported QMP commands by this server</p>
<div class="section" id="qapidoc-977">
<h4>Returns<a class="headerlink" href="#qapidoc-977" title="Permalink to this headline">¶</a></h4>
<p>A list of <code class="docutils literal notranslate"><span class="pre">CommandInfo</span></code> for all supported commands</p>
</div>
<div class="section" id="qapidoc-978">
<h4>Since<a class="headerlink" href="#qapidoc-978" title="Permalink to this headline">¶</a></h4>
<p>0.14</p>
</div>
<div class="section" id="qapidoc-979">
<h4>Example<a class="headerlink" href="#qapidoc-979" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-&gt;</span> <span class="p">{</span> <span class="s2">&quot;execute&quot;</span><span class="p">:</span> <span class="s2">&quot;query-commands&quot;</span> <span class="p">}</span>
<span class="o">&lt;-</span> <span class="p">{</span>
     <span class="s2">&quot;return&quot;</span><span class="p">:[</span>
        <span class="p">{</span>
           <span class="s2">&quot;name&quot;</span><span class="p">:</span><span class="s2">&quot;query-balloon&quot;</span>
        <span class="p">},</span>
        <span class="p">{</span>
           <span class="s2">&quot;name&quot;</span><span class="p">:</span><span class="s2">&quot;system_powerdown&quot;</span>
        <span class="p">}</span>
     <span class="p">]</span>
   <span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="qapidoc-980">
<h4>Note<a class="headerlink" href="#qapidoc-980" title="Permalink to this headline">¶</a></h4>
<p>This example has been shortened as the real response is too long.</p>
</div>
</div>
<div class="section" id="qapidoc-984">
<h3><code class="docutils literal notranslate"><span class="pre">EventInfo</span></code> (Object)<a class="headerlink" href="#qapidoc-984" title="Permalink to this headline">¶</a></h3>
<p>Information about a QMP event</p>
<div class="section" id="qapidoc-982">
<h4>Members<a class="headerlink" href="#qapidoc-982" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">name</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code></dt>
<dd>The event name</dd>
</dl>
</div>
<div class="section" id="qapidoc-983">
<h4>Since<a class="headerlink" href="#qapidoc-983" title="Permalink to this headline">¶</a></h4>
<p>1.2</p>
</div>
</div>
<div class="section" id="qapidoc-990">
<h3><code class="docutils literal notranslate"><span class="pre">query-events</span></code> (Command)<a class="headerlink" href="#qapidoc-990" title="Permalink to this headline">¶</a></h3>
<p>Return information on QMP events.</p>
<div class="section" id="qapidoc-985">
<h4>Features<a class="headerlink" href="#qapidoc-985" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">deprecated</span></code></dt>
<dd>This command is deprecated, because its output doesn’t
reflect compile-time configuration.  Use ‘query-qmp-schema’
instead.</dd>
</dl>
</div>
<div class="section" id="qapidoc-986">
<h4>Returns<a class="headerlink" href="#qapidoc-986" title="Permalink to this headline">¶</a></h4>
<p>A list of <code class="docutils literal notranslate"><span class="pre">EventInfo</span></code>.</p>
</div>
<div class="section" id="qapidoc-987">
<h4>Since<a class="headerlink" href="#qapidoc-987" title="Permalink to this headline">¶</a></h4>
<p>1.2</p>
</div>
<div class="section" id="qapidoc-988">
<h4>Example<a class="headerlink" href="#qapidoc-988" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-&gt;</span> <span class="p">{</span> <span class="s2">&quot;execute&quot;</span><span class="p">:</span> <span class="s2">&quot;query-events&quot;</span> <span class="p">}</span>
<span class="o">&lt;-</span> <span class="p">{</span>
     <span class="s2">&quot;return&quot;</span><span class="p">:</span> <span class="p">[</span>
         <span class="p">{</span>
            <span class="s2">&quot;name&quot;</span><span class="p">:</span><span class="s2">&quot;SHUTDOWN&quot;</span>
         <span class="p">},</span>
         <span class="p">{</span>
            <span class="s2">&quot;name&quot;</span><span class="p">:</span><span class="s2">&quot;RESET&quot;</span>
         <span class="p">}</span>
      <span class="p">]</span>
   <span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="qapidoc-989">
<h4>Note<a class="headerlink" href="#qapidoc-989" title="Permalink to this headline">¶</a></h4>
<p>This example has been shortened as the real response is too long.</p>
</div>
</div>
<div class="section" id="qapidoc-993">
<h3><code class="docutils literal notranslate"><span class="pre">quit</span></code> (Command)<a class="headerlink" href="#qapidoc-993" title="Permalink to this headline">¶</a></h3>
<p>This command will cause the QEMU process to exit gracefully.  While every
attempt is made to send the QMP response before terminating, this is not
guaranteed.  When using this interface, a premature EOF would not be
unexpected.</p>
<div class="section" id="qapidoc-991">
<h4>Since<a class="headerlink" href="#qapidoc-991" title="Permalink to this headline">¶</a></h4>
<p>0.14</p>
</div>
<div class="section" id="qapidoc-992">
<h4>Example<a class="headerlink" href="#qapidoc-992" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-&gt;</span> <span class="p">{</span> <span class="s2">&quot;execute&quot;</span><span class="p">:</span> <span class="s2">&quot;quit&quot;</span> <span class="p">}</span>
<span class="o">&lt;-</span> <span class="p">{</span> <span class="s2">&quot;return&quot;</span><span class="p">:</span> <span class="p">{}</span> <span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="qapidoc-996">
<h3><code class="docutils literal notranslate"><span class="pre">MonitorMode</span></code> (Enum)<a class="headerlink" href="#qapidoc-996" title="Permalink to this headline">¶</a></h3>
<p>An enumeration of monitor modes.</p>
<div class="section" id="qapidoc-994">
<h4>Values<a class="headerlink" href="#qapidoc-994" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">readline</span></code></dt>
<dd>HMP monitor (human-oriented command line interface)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">control</span></code></dt>
<dd>QMP monitor (JSON-based machine interface)</dd>
</dl>
</div>
<div class="section" id="qapidoc-995">
<h4>Since<a class="headerlink" href="#qapidoc-995" title="Permalink to this headline">¶</a></h4>
<p>5.0</p>
</div>
</div>
<div class="section" id="qapidoc-999">
<h3><code class="docutils literal notranslate"><span class="pre">MonitorOptions</span></code> (Object)<a class="headerlink" href="#qapidoc-999" title="Permalink to this headline">¶</a></h3>
<p>Options to be used for adding a new monitor.</p>
<div class="section" id="qapidoc-997">
<h4>Members<a class="headerlink" href="#qapidoc-997" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">id</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code> (optional)</dt>
<dd>Name of the monitor</dd>
<dt><code class="docutils literal notranslate"><span class="pre">mode</span></code>: <code class="docutils literal notranslate"><span class="pre">MonitorMode</span></code> (optional)</dt>
<dd>Selects the monitor mode (default: readline in the system
emulator, control in qemu-storage-daemon)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">pretty</span></code>: <code class="docutils literal notranslate"><span class="pre">boolean</span></code> (optional)</dt>
<dd>Enables pretty printing (QMP only)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">chardev</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code></dt>
<dd>Name of a character device to expose the monitor on</dd>
</dl>
</div>
<div class="section" id="qapidoc-998">
<h4>Since<a class="headerlink" href="#qapidoc-998" title="Permalink to this headline">¶</a></h4>
<p>5.0</p>
</div>
</div>
</div>
<div class="section" id="qapidoc-1000">
<h2>QMP introspection<a class="headerlink" href="#qapidoc-1000" title="Permalink to this headline">¶</a></h2>
<div class="section" id="qapidoc-1004">
<h3><code class="docutils literal notranslate"><span class="pre">query-qmp-schema</span></code> (Command)<a class="headerlink" href="#qapidoc-1004" title="Permalink to this headline">¶</a></h3>
<p>Command query-qmp-schema exposes the QMP wire ABI as an array of
SchemaInfo.  This lets QMP clients figure out what commands and
events are available in this QEMU, and their parameters and results.</p>
<p>However, the SchemaInfo can’t reflect all the rules and restrictions
that apply to QMP.  It’s interface introspection (figuring out
what’s there), not interface specification.  The specification is in
the QAPI schema.</p>
<p>Furthermore, while we strive to keep the QMP wire format
backwards-compatible across qemu versions, the introspection output
is not guaranteed to have the same stability.  For example, one
version of qemu may list an object member as an optional
non-variant, while another lists the same member only through the
object’s variants; or the type of a member may change from a generic
string into a specific enum or from one specific type into an
alternate that includes the original type alongside something else.</p>
<div class="section" id="qapidoc-1001">
<h4>Returns<a class="headerlink" href="#qapidoc-1001" title="Permalink to this headline">¶</a></h4>
<p>array of <code class="docutils literal notranslate"><span class="pre">SchemaInfo</span></code>, where each element describes an
entity in the ABI: command, event, type, …</p>
<p>The order of the various SchemaInfo is unspecified; however, all
names are guaranteed to be unique (no name will be duplicated with
different meta-types).</p>
</div>
<div class="section" id="qapidoc-1002">
<h4>Note<a class="headerlink" href="#qapidoc-1002" title="Permalink to this headline">¶</a></h4>
<p>the QAPI schema is also used to help define <em>internal</em>
interfaces, by defining QAPI types.  These are not part of the QMP
wire ABI, and therefore not returned by this command.</p>
</div>
<div class="section" id="qapidoc-1003">
<h4>Since<a class="headerlink" href="#qapidoc-1003" title="Permalink to this headline">¶</a></h4>
<p>2.5</p>
</div>
</div>
<div class="section" id="qapidoc-1007">
<h3><code class="docutils literal notranslate"><span class="pre">SchemaMetaType</span></code> (Enum)<a class="headerlink" href="#qapidoc-1007" title="Permalink to this headline">¶</a></h3>
<p>This is a <code class="docutils literal notranslate"><span class="pre">SchemaInfo</span></code>’s meta type, i.e. the kind of entity it
describes.</p>
<div class="section" id="qapidoc-1005">
<h4>Values<a class="headerlink" href="#qapidoc-1005" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">builtin</span></code></dt>
<dd>a predefined type such as ‘int’ or ‘bool’.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">enum</span></code></dt>
<dd>an enumeration type</dd>
<dt><code class="docutils literal notranslate"><span class="pre">array</span></code></dt>
<dd>an array type</dd>
<dt><code class="docutils literal notranslate"><span class="pre">object</span></code></dt>
<dd>an object type (struct or union)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">alternate</span></code></dt>
<dd>an alternate type</dd>
<dt><code class="docutils literal notranslate"><span class="pre">command</span></code></dt>
<dd>a QMP command</dd>
<dt><code class="docutils literal notranslate"><span class="pre">event</span></code></dt>
<dd>a QMP event</dd>
</dl>
</div>
<div class="section" id="qapidoc-1006">
<h4>Since<a class="headerlink" href="#qapidoc-1006" title="Permalink to this headline">¶</a></h4>
<p>2.5</p>
</div>
</div>
<div class="section" id="qapidoc-1011">
<h3><code class="docutils literal notranslate"><span class="pre">SchemaInfo</span></code> (Object)<a class="headerlink" href="#qapidoc-1011" title="Permalink to this headline">¶</a></h3>
<div class="section" id="qapidoc-1008">
<h4>Members<a class="headerlink" href="#qapidoc-1008" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">name</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code></dt>
<dd>the entity’s name, inherited from <code class="docutils literal notranslate"><span class="pre">base</span></code>.
The SchemaInfo is always referenced by this name.
Commands and events have the name defined in the QAPI schema.
Unlike command and event names, type names are not part of
the wire ABI.  Consequently, type names are meaningless
strings here, although they are still guaranteed unique
regardless of <code class="docutils literal notranslate"><span class="pre">meta-type</span></code>.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">meta-type</span></code>: <code class="docutils literal notranslate"><span class="pre">SchemaMetaType</span></code></dt>
<dd>the entity’s meta type, inherited from <code class="docutils literal notranslate"><span class="pre">base</span></code>.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">features</span></code>: <code class="docutils literal notranslate"><span class="pre">array</span> <span class="pre">of</span> <span class="pre">string</span></code> (optional)</dt>
<dd>names of features associated with the entity, in no
particular order.
(since 4.1 for object types, 4.2 for commands, 5.0 for
the rest)</dd>
<dt>The members of <code class="docutils literal notranslate"><span class="pre">SchemaInfoBuiltin</span></code> when <code class="docutils literal notranslate"><span class="pre">meta-type</span></code> is <code class="docutils literal notranslate"><span class="pre">&quot;builtin&quot;</span></code><dt>The members of <code class="docutils literal notranslate"><span class="pre">SchemaInfoEnum</span></code> when <code class="docutils literal notranslate"><span class="pre">meta-type</span></code> is <code class="docutils literal notranslate"><span class="pre">&quot;enum&quot;</span></code><dt>The members of <code class="docutils literal notranslate"><span class="pre">SchemaInfoArray</span></code> when <code class="docutils literal notranslate"><span class="pre">meta-type</span></code> is <code class="docutils literal notranslate"><span class="pre">&quot;array&quot;</span></code><dt>The members of <code class="docutils literal notranslate"><span class="pre">SchemaInfoObject</span></code> when <code class="docutils literal notranslate"><span class="pre">meta-type</span></code> is <code class="docutils literal notranslate"><span class="pre">&quot;object&quot;</span></code><dt>The members of <code class="docutils literal notranslate"><span class="pre">SchemaInfoAlternate</span></code> when <code class="docutils literal notranslate"><span class="pre">meta-type</span></code> is <code class="docutils literal notranslate"><span class="pre">&quot;alternate&quot;</span></code><dt>The members of <code class="docutils literal notranslate"><span class="pre">SchemaInfoCommand</span></code> when <code class="docutils literal notranslate"><span class="pre">meta-type</span></code> is <code class="docutils literal notranslate"><span class="pre">&quot;command&quot;</span></code><dt>The members of <code class="docutils literal notranslate"><span class="pre">SchemaInfoEvent</span></code> when <code class="docutils literal notranslate"><span class="pre">meta-type</span></code> is <code class="docutils literal notranslate"><span class="pre">&quot;event&quot;</span></code></dl>
</div>
<div class="section" id="qapidoc-1009">
Additional members depend on the value of <code class="docutils literal notranslate"><span class="pre">meta-type</span></code>.</div>
<div class="section" id="qapidoc-1010">
<h4>Since<a class="headerlink" href="#qapidoc-1010" title="Permalink to this headline">¶</a></h4>
<p>2.5</p>
</div>
</div>
<div class="section" id="qapidoc-1014">
<h3><code class="docutils literal notranslate"><span class="pre">SchemaInfoBuiltin</span></code> (Object)<a class="headerlink" href="#qapidoc-1014" title="Permalink to this headline">¶</a></h3>
<p>Additional SchemaInfo members for meta-type ‘builtin’.</p>
<div class="section" id="qapidoc-1012">
<h4>Members<a class="headerlink" href="#qapidoc-1012" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">json-type</span></code>: <code class="docutils literal notranslate"><span class="pre">JSONType</span></code></dt>
<dd>the JSON type used for this type on the wire.</dd>
</dl>
</div>
<div class="section" id="qapidoc-1013">
<h4>Since<a class="headerlink" href="#qapidoc-1013" title="Permalink to this headline">¶</a></h4>
<p>2.5</p>
</div>
</div>
<div class="section" id="qapidoc-1017">
<h3><code class="docutils literal notranslate"><span class="pre">JSONType</span></code> (Enum)<a class="headerlink" href="#qapidoc-1017" title="Permalink to this headline">¶</a></h3>
<p>The four primitive and two structured types according to RFC 8259
section 1, plus ‘int’ (split off ‘number’), plus the obvious top
type ‘value’.</p>
<div class="section" id="qapidoc-1015">
<h4>Values<a class="headerlink" href="#qapidoc-1015" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">string</span></code></dt>
<dd>Not documented</dd>
<dt><code class="docutils literal notranslate"><span class="pre">number</span></code></dt>
<dd>Not documented</dd>
<dt><code class="docutils literal notranslate"><span class="pre">int</span></code></dt>
<dd>Not documented</dd>
<dt><code class="docutils literal notranslate"><span class="pre">boolean</span></code></dt>
<dd>Not documented</dd>
<dt><code class="docutils literal notranslate"><span class="pre">null</span></code></dt>
<dd>Not documented</dd>
<dt><code class="docutils literal notranslate"><span class="pre">object</span></code></dt>
<dd>Not documented</dd>
<dt><code class="docutils literal notranslate"><span class="pre">array</span></code></dt>
<dd>Not documented</dd>
<dt><code class="docutils literal notranslate"><span class="pre">value</span></code></dt>
<dd>Not documented</dd>
</dl>
</div>
<div class="section" id="qapidoc-1016">
<h4>Since<a class="headerlink" href="#qapidoc-1016" title="Permalink to this headline">¶</a></h4>
<p>2.5</p>
</div>
</div>
<div class="section" id="qapidoc-1021">
<h3><code class="docutils literal notranslate"><span class="pre">SchemaInfoEnum</span></code> (Object)<a class="headerlink" href="#qapidoc-1021" title="Permalink to this headline">¶</a></h3>
<p>Additional SchemaInfo members for meta-type ‘enum’.</p>
<div class="section" id="qapidoc-1018">
<h4>Members<a class="headerlink" href="#qapidoc-1018" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">values</span></code>: <code class="docutils literal notranslate"><span class="pre">array</span> <span class="pre">of</span> <span class="pre">string</span></code></dt>
<dd>the enumeration type’s values, in no particular order.</dd>
</dl>
</div>
<div class="section" id="qapidoc-1019">
Values of this type are JSON string on the wire.</div>
<div class="section" id="qapidoc-1020">
<h4>Since<a class="headerlink" href="#qapidoc-1020" title="Permalink to this headline">¶</a></h4>
<p>2.5</p>
</div>
</div>
<div class="section" id="qapidoc-1025">
<h3><code class="docutils literal notranslate"><span class="pre">SchemaInfoArray</span></code> (Object)<a class="headerlink" href="#qapidoc-1025" title="Permalink to this headline">¶</a></h3>
<p>Additional SchemaInfo members for meta-type ‘array’.</p>
<div class="section" id="qapidoc-1022">
<h4>Members<a class="headerlink" href="#qapidoc-1022" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">element-type</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code></dt>
<dd>the array type’s element type.</dd>
</dl>
</div>
<div class="section" id="qapidoc-1023">
Values of this type are JSON array on the wire.</div>
<div class="section" id="qapidoc-1024">
<h4>Since<a class="headerlink" href="#qapidoc-1024" title="Permalink to this headline">¶</a></h4>
<p>2.5</p>
</div>
</div>
<div class="section" id="qapidoc-1029">
<h3><code class="docutils literal notranslate"><span class="pre">SchemaInfoObject</span></code> (Object)<a class="headerlink" href="#qapidoc-1029" title="Permalink to this headline">¶</a></h3>
<p>Additional SchemaInfo members for meta-type ‘object’.</p>
<div class="section" id="qapidoc-1026">
<h4>Members<a class="headerlink" href="#qapidoc-1026" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">members</span></code>: <code class="docutils literal notranslate"><span class="pre">array</span> <span class="pre">of</span> <span class="pre">SchemaInfoObjectMember</span></code></dt>
<dd>the object type’s (non-variant) members, in no particular order.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">tag</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code> (optional)</dt>
<dd>the name of the member serving as type tag.
An element of <code class="docutils literal notranslate"><span class="pre">members</span></code> with this name must exist.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">variants</span></code>: <code class="docutils literal notranslate"><span class="pre">array</span> <span class="pre">of</span> <span class="pre">SchemaInfoObjectVariant</span></code> (optional)</dt>
<dd>variant members, i.e. additional members that
depend on the type tag’s value.  Present exactly when
<code class="docutils literal notranslate"><span class="pre">tag</span></code> is present.  The variants are in no particular order,
and may even differ from the order of the values of the
enum type of the <code class="docutils literal notranslate"><span class="pre">tag</span></code>.</dd>
</dl>
</div>
<div class="section" id="qapidoc-1027">
Values of this type are JSON object on the wire.</div>
<div class="section" id="qapidoc-1028">
<h4>Since<a class="headerlink" href="#qapidoc-1028" title="Permalink to this headline">¶</a></h4>
<p>2.5</p>
</div>
</div>
<div class="section" id="qapidoc-1032">
<h3><code class="docutils literal notranslate"><span class="pre">SchemaInfoObjectMember</span></code> (Object)<a class="headerlink" href="#qapidoc-1032" title="Permalink to this headline">¶</a></h3>
<p>An object member.</p>
<div class="section" id="qapidoc-1030">
<h4>Members<a class="headerlink" href="#qapidoc-1030" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">name</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code></dt>
<dd>the member’s name, as defined in the QAPI schema.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">type</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code></dt>
<dd>the name of the member’s type.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">default</span></code>: <code class="docutils literal notranslate"><span class="pre">value</span></code> (optional)</dt>
<dd>default when used as command parameter.
If absent, the parameter is mandatory.
If present, the value must be null.  The parameter is
optional, and behavior when it’s missing is not specified
here.
Future extension: if present and non-null, the parameter
is optional, and defaults to this value.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">features</span></code>: <code class="docutils literal notranslate"><span class="pre">array</span> <span class="pre">of</span> <span class="pre">string</span></code> (optional)</dt>
<dd>names of features associated with the member, in no
particular order.  (since 5.0)</dd>
</dl>
</div>
<div class="section" id="qapidoc-1031">
<h4>Since<a class="headerlink" href="#qapidoc-1031" title="Permalink to this headline">¶</a></h4>
<p>2.5</p>
</div>
</div>
<div class="section" id="qapidoc-1035">
<h3><code class="docutils literal notranslate"><span class="pre">SchemaInfoObjectVariant</span></code> (Object)<a class="headerlink" href="#qapidoc-1035" title="Permalink to this headline">¶</a></h3>
<p>The variant members for a value of the type tag.</p>
<div class="section" id="qapidoc-1033">
<h4>Members<a class="headerlink" href="#qapidoc-1033" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">case</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code></dt>
<dd>a value of the type tag.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">type</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code></dt>
<dd>the name of the object type that provides the variant members
when the type tag has value <code class="docutils literal notranslate"><span class="pre">case</span></code>.</dd>
</dl>
</div>
<div class="section" id="qapidoc-1034">
<h4>Since<a class="headerlink" href="#qapidoc-1034" title="Permalink to this headline">¶</a></h4>
<p>2.5</p>
</div>
</div>
<div class="section" id="qapidoc-1039">
<h3><code class="docutils literal notranslate"><span class="pre">SchemaInfoAlternate</span></code> (Object)<a class="headerlink" href="#qapidoc-1039" title="Permalink to this headline">¶</a></h3>
<p>Additional SchemaInfo members for meta-type ‘alternate’.</p>
<div class="section" id="qapidoc-1036">
<h4>Members<a class="headerlink" href="#qapidoc-1036" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">members</span></code>: <code class="docutils literal notranslate"><span class="pre">array</span> <span class="pre">of</span> <span class="pre">SchemaInfoAlternateMember</span></code></dt>
<dd>the alternate type’s members, in no particular order.
The members’ wire encoding is distinct, see
docs/devel/qapi-code-gen.txt section Alternate types.</dd>
</dl>
</div>
<div class="section" id="qapidoc-1037">
On the wire, this can be any of the members.</div>
<div class="section" id="qapidoc-1038">
<h4>Since<a class="headerlink" href="#qapidoc-1038" title="Permalink to this headline">¶</a></h4>
<p>2.5</p>
</div>
</div>
<div class="section" id="qapidoc-1042">
<h3><code class="docutils literal notranslate"><span class="pre">SchemaInfoAlternateMember</span></code> (Object)<a class="headerlink" href="#qapidoc-1042" title="Permalink to this headline">¶</a></h3>
<p>An alternate member.</p>
<div class="section" id="qapidoc-1040">
<h4>Members<a class="headerlink" href="#qapidoc-1040" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">type</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code></dt>
<dd>the name of the member’s type.</dd>
</dl>
</div>
<div class="section" id="qapidoc-1041">
<h4>Since<a class="headerlink" href="#qapidoc-1041" title="Permalink to this headline">¶</a></h4>
<p>2.5</p>
</div>
</div>
<div class="section" id="qapidoc-1046">
<h3><code class="docutils literal notranslate"><span class="pre">SchemaInfoCommand</span></code> (Object)<a class="headerlink" href="#qapidoc-1046" title="Permalink to this headline">¶</a></h3>
<p>Additional SchemaInfo members for meta-type ‘command’.</p>
<div class="section" id="qapidoc-1043">
<h4>Members<a class="headerlink" href="#qapidoc-1043" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">arg-type</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code></dt>
<dd>the name of the object type that provides the command’s
parameters.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">ret-type</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code></dt>
<dd>the name of the command’s result type.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">allow-oob</span></code>: <code class="docutils literal notranslate"><span class="pre">boolean</span></code> (optional)</dt>
<dd>whether the command allows out-of-band execution,
defaults to false (Since: 2.12)</dd>
</dl>
</div>
<div class="section" id="qapidoc-1044">
<h4>TODO<a class="headerlink" href="#qapidoc-1044" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">success-response</span></code> (currently irrelevant, because it’s QGA, not QMP)</p>
</div>
<div class="section" id="qapidoc-1045">
<h4>Since<a class="headerlink" href="#qapidoc-1045" title="Permalink to this headline">¶</a></h4>
<p>2.5</p>
</div>
</div>
<div class="section" id="qapidoc-1049">
<h3><code class="docutils literal notranslate"><span class="pre">SchemaInfoEvent</span></code> (Object)<a class="headerlink" href="#qapidoc-1049" title="Permalink to this headline">¶</a></h3>
<p>Additional SchemaInfo members for meta-type ‘event’.</p>
<div class="section" id="qapidoc-1047">
<h4>Members<a class="headerlink" href="#qapidoc-1047" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">arg-type</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code></dt>
<dd>the name of the object type that provides the event’s
parameters.</dd>
</dl>
</div>
<div class="section" id="qapidoc-1048">
<h4>Since<a class="headerlink" href="#qapidoc-1048" title="Permalink to this headline">¶</a></h4>
<p>2.5</p>
</div>
</div>
</div>
<div class="section" id="qapidoc-1050">
<h2>QEMU Object Model (QOM)<a class="headerlink" href="#qapidoc-1050" title="Permalink to this headline">¶</a></h2>
<div class="section" id="qapidoc-1053">
<h3><code class="docutils literal notranslate"><span class="pre">ObjectPropertyInfo</span></code> (Object)<a class="headerlink" href="#qapidoc-1053" title="Permalink to this headline">¶</a></h3>
<div class="section" id="qapidoc-1051">
<h4>Members<a class="headerlink" href="#qapidoc-1051" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">name</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code></dt>
<dd>the name of the property</dd>
<dt><code class="docutils literal notranslate"><span class="pre">type</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code></dt>
<dd><p class="first">the type of the property.  This will typically come in one of four
forms:</p>
<ol class="last arabic simple">
<li>A primitive type such as ‘u8’, ‘u16’, ‘bool’, ‘str’, or ‘double’.
These types are mapped to the appropriate JSON type.</li>
<li>A child type in the form ‘child&lt;subtype&gt;’ where subtype is a qdev
device type name.  Child properties create the composition tree.</li>
<li>A link type in the form ‘link&lt;subtype&gt;’ where subtype is a qdev
device type name.  Link properties form the device model graph.</li>
</ol>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">description</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code> (optional)</dt>
<dd>if specified, the description of the property.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">default-value</span></code>: <code class="docutils literal notranslate"><span class="pre">value</span></code> (optional)</dt>
<dd>the default value, if any (since 5.0)</dd>
</dl>
</div>
<div class="section" id="qapidoc-1052">
<h4>Since<a class="headerlink" href="#qapidoc-1052" title="Permalink to this headline">¶</a></h4>
<p>1.2</p>
</div>
</div>
<div class="section" id="qapidoc-1058">
<h3><code class="docutils literal notranslate"><span class="pre">qom-list</span></code> (Command)<a class="headerlink" href="#qapidoc-1058" title="Permalink to this headline">¶</a></h3>
<p>This command will list any properties of a object given a path in the object
model.</p>
<div class="section" id="qapidoc-1054">
<h4>Arguments<a class="headerlink" href="#qapidoc-1054" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">path</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code></dt>
<dd>the path within the object model.  See <code class="docutils literal notranslate"><span class="pre">qom-get</span></code> for a description of
this parameter.</dd>
</dl>
</div>
<div class="section" id="qapidoc-1055">
<h4>Returns<a class="headerlink" href="#qapidoc-1055" title="Permalink to this headline">¶</a></h4>
<p>a list of <code class="docutils literal notranslate"><span class="pre">ObjectPropertyInfo</span></code> that describe the properties of the
object.</p>
</div>
<div class="section" id="qapidoc-1056">
<h4>Since<a class="headerlink" href="#qapidoc-1056" title="Permalink to this headline">¶</a></h4>
<p>1.2</p>
</div>
<div class="section" id="qapidoc-1057">
<h4>Example<a class="headerlink" href="#qapidoc-1057" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-&gt;</span> <span class="p">{</span> <span class="s2">&quot;execute&quot;</span><span class="p">:</span> <span class="s2">&quot;qom-list&quot;</span><span class="p">,</span>
     <span class="s2">&quot;arguments&quot;</span><span class="p">:</span> <span class="p">{</span> <span class="s2">&quot;path&quot;</span><span class="p">:</span> <span class="s2">&quot;/chardevs&quot;</span> <span class="p">}</span> <span class="p">}</span>
<span class="o">&lt;-</span> <span class="p">{</span> <span class="s2">&quot;return&quot;</span><span class="p">:</span> <span class="p">[</span> <span class="p">{</span> <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;type&quot;</span><span class="p">,</span> <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span> <span class="p">},</span>
                 <span class="p">{</span> <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;parallel0&quot;</span><span class="p">,</span> <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;child&lt;chardev-vc&gt;&quot;</span> <span class="p">},</span>
                 <span class="p">{</span> <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;serial0&quot;</span><span class="p">,</span> <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;child&lt;chardev-vc&gt;&quot;</span> <span class="p">},</span>
                 <span class="p">{</span> <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;mon0&quot;</span><span class="p">,</span> <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;child&lt;chardev-stdio&gt;&quot;</span> <span class="p">}</span> <span class="p">]</span> <span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="qapidoc-1063">
<h3><code class="docutils literal notranslate"><span class="pre">qom-get</span></code> (Command)<a class="headerlink" href="#qapidoc-1063" title="Permalink to this headline">¶</a></h3>
<p>This command will get a property from a object model path and return the
value.</p>
<div class="section" id="qapidoc-1059">
<h4>Arguments<a class="headerlink" href="#qapidoc-1059" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">path</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code></dt>
<dd><p class="first">The path within the object model.  There are two forms of supported
paths–absolute and partial paths.</p>
<p>Absolute paths are derived from the root object and can follow child&lt;&gt;
or link&lt;&gt; properties.  Since they can follow link&lt;&gt; properties, they
can be arbitrarily long.  Absolute paths look like absolute filenames
and are prefixed  with a leading slash.</p>
<p class="last">Partial paths look like relative filenames.  They do not begin
with a prefix.  The matching rules for partial paths are subtle but
designed to make specifying objects easy.  At each level of the
composition tree, the partial path is matched as an absolute path.
The first match is not returned.  At least two matches are searched
for.  A successful result is only returned if only one match is
found.  If more than one match is found, a flag is return to
indicate that the match was ambiguous.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">property</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code></dt>
<dd>The property name to read</dd>
</dl>
</div>
<div class="section" id="qapidoc-1060">
<h4>Returns<a class="headerlink" href="#qapidoc-1060" title="Permalink to this headline">¶</a></h4>
<p>The property value.  The type depends on the property
type. child&lt;&gt; and link&lt;&gt; properties are returned as #str
pathnames.  All integer property types (u8, u16, etc) are
returned as #int.</p>
</div>
<div class="section" id="qapidoc-1061">
<h4>Since<a class="headerlink" href="#qapidoc-1061" title="Permalink to this headline">¶</a></h4>
<p>1.2</p>
</div>
<div class="section" id="qapidoc-1062">
<h4>Example<a class="headerlink" href="#qapidoc-1062" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mf">1.</span> <span class="n">Use</span> <span class="n">absolute</span> <span class="n">path</span>

<span class="o">-&gt;</span> <span class="p">{</span> <span class="s2">&quot;execute&quot;</span><span class="p">:</span> <span class="s2">&quot;qom-get&quot;</span><span class="p">,</span>
     <span class="s2">&quot;arguments&quot;</span><span class="p">:</span> <span class="p">{</span> <span class="s2">&quot;path&quot;</span><span class="p">:</span> <span class="s2">&quot;/machine/unattached/device[0]&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;property&quot;</span><span class="p">:</span> <span class="s2">&quot;hotplugged&quot;</span> <span class="p">}</span> <span class="p">}</span>
<span class="o">&lt;-</span> <span class="p">{</span> <span class="s2">&quot;return&quot;</span><span class="p">:</span> <span class="n">false</span> <span class="p">}</span>

<span class="mf">2.</span> <span class="n">Use</span> <span class="n">partial</span> <span class="n">path</span>

<span class="o">-&gt;</span> <span class="p">{</span> <span class="s2">&quot;execute&quot;</span><span class="p">:</span> <span class="s2">&quot;qom-get&quot;</span><span class="p">,</span>
     <span class="s2">&quot;arguments&quot;</span><span class="p">:</span> <span class="p">{</span> <span class="s2">&quot;path&quot;</span><span class="p">:</span> <span class="s2">&quot;unattached/sysbus&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;property&quot;</span><span class="p">:</span> <span class="s2">&quot;type&quot;</span> <span class="p">}</span> <span class="p">}</span>
<span class="o">&lt;-</span> <span class="p">{</span> <span class="s2">&quot;return&quot;</span><span class="p">:</span> <span class="s2">&quot;System&quot;</span> <span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="qapidoc-1067">
<h3><code class="docutils literal notranslate"><span class="pre">qom-set</span></code> (Command)<a class="headerlink" href="#qapidoc-1067" title="Permalink to this headline">¶</a></h3>
<p>This command will set a property from a object model path.</p>
<div class="section" id="qapidoc-1064">
<h4>Arguments<a class="headerlink" href="#qapidoc-1064" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">path</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code></dt>
<dd>see <code class="docutils literal notranslate"><span class="pre">qom-get</span></code> for a description of this parameter</dd>
<dt><code class="docutils literal notranslate"><span class="pre">property</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code></dt>
<dd>the property name to set</dd>
<dt><code class="docutils literal notranslate"><span class="pre">value</span></code>: <code class="docutils literal notranslate"><span class="pre">value</span></code></dt>
<dd>a value who’s type is appropriate for the property type.  See <code class="docutils literal notranslate"><span class="pre">qom-get</span></code>
for a description of type mapping.</dd>
</dl>
</div>
<div class="section" id="qapidoc-1065">
<h4>Since<a class="headerlink" href="#qapidoc-1065" title="Permalink to this headline">¶</a></h4>
<p>1.2</p>
</div>
<div class="section" id="qapidoc-1066">
<h4>Example<a class="headerlink" href="#qapidoc-1066" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-&gt;</span> <span class="p">{</span> <span class="s2">&quot;execute&quot;</span><span class="p">:</span> <span class="s2">&quot;qom-set&quot;</span><span class="p">,</span>
     <span class="s2">&quot;arguments&quot;</span><span class="p">:</span> <span class="p">{</span> <span class="s2">&quot;path&quot;</span><span class="p">:</span> <span class="s2">&quot;/machine&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;property&quot;</span><span class="p">:</span> <span class="s2">&quot;graphics&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="n">false</span> <span class="p">}</span> <span class="p">}</span>
<span class="o">&lt;-</span> <span class="p">{</span> <span class="s2">&quot;return&quot;</span><span class="p">:</span> <span class="p">{}</span> <span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="qapidoc-1070">
<h3><code class="docutils literal notranslate"><span class="pre">ObjectTypeInfo</span></code> (Object)<a class="headerlink" href="#qapidoc-1070" title="Permalink to this headline">¶</a></h3>
<p>This structure describes a search result from <code class="docutils literal notranslate"><span class="pre">qom-list-types</span></code></p>
<div class="section" id="qapidoc-1068">
<h4>Members<a class="headerlink" href="#qapidoc-1068" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">name</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code></dt>
<dd>the type name found in the search</dd>
<dt><code class="docutils literal notranslate"><span class="pre">abstract</span></code>: <code class="docutils literal notranslate"><span class="pre">boolean</span></code> (optional)</dt>
<dd>the type is abstract and can’t be directly instantiated.
Omitted if false. (since 2.10)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">parent</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code> (optional)</dt>
<dd>Name of parent type, if any (since 2.10)</dd>
</dl>
</div>
<div class="section" id="qapidoc-1069">
<h4>Since<a class="headerlink" href="#qapidoc-1069" title="Permalink to this headline">¶</a></h4>
<p>1.1</p>
</div>
</div>
<div class="section" id="qapidoc-1074">
<h3><code class="docutils literal notranslate"><span class="pre">qom-list-types</span></code> (Command)<a class="headerlink" href="#qapidoc-1074" title="Permalink to this headline">¶</a></h3>
<p>This command will return a list of types given search parameters</p>
<div class="section" id="qapidoc-1071">
<h4>Arguments<a class="headerlink" href="#qapidoc-1071" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">implements</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code> (optional)</dt>
<dd>if specified, only return types that implement this type name</dd>
<dt><code class="docutils literal notranslate"><span class="pre">abstract</span></code>: <code class="docutils literal notranslate"><span class="pre">boolean</span></code> (optional)</dt>
<dd>if true, include abstract types in the results</dd>
</dl>
</div>
<div class="section" id="qapidoc-1072">
<h4>Returns<a class="headerlink" href="#qapidoc-1072" title="Permalink to this headline">¶</a></h4>
<p>a list of <code class="docutils literal notranslate"><span class="pre">ObjectTypeInfo</span></code> or an empty list if no results are found</p>
</div>
<div class="section" id="qapidoc-1073">
<h4>Since<a class="headerlink" href="#qapidoc-1073" title="Permalink to this headline">¶</a></h4>
<p>1.1</p>
</div>
</div>
<div class="section" id="qapidoc-1079">
<h3><code class="docutils literal notranslate"><span class="pre">qom-list-properties</span></code> (Command)<a class="headerlink" href="#qapidoc-1079" title="Permalink to this headline">¶</a></h3>
<p>List properties associated with a QOM object.</p>
<div class="section" id="qapidoc-1075">
<h4>Arguments<a class="headerlink" href="#qapidoc-1075" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">typename</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code></dt>
<dd>the type name of an object</dd>
</dl>
</div>
<div class="section" id="qapidoc-1076">
<h4>Note<a class="headerlink" href="#qapidoc-1076" title="Permalink to this headline">¶</a></h4>
<p>objects can create properties at runtime, for example to describe
links between different devices and/or objects. These properties
are not included in the output of this command.</p>
</div>
<div class="section" id="qapidoc-1077">
<h4>Returns<a class="headerlink" href="#qapidoc-1077" title="Permalink to this headline">¶</a></h4>
<p>a list of ObjectPropertyInfo describing object properties</p>
</div>
<div class="section" id="qapidoc-1078">
<h4>Since<a class="headerlink" href="#qapidoc-1078" title="Permalink to this headline">¶</a></h4>
<p>2.12</p>
</div>
</div>
<div class="section" id="qapidoc-1085">
<h3><code class="docutils literal notranslate"><span class="pre">object-add</span></code> (Command)<a class="headerlink" href="#qapidoc-1085" title="Permalink to this headline">¶</a></h3>
<p>Create a QOM object.</p>
<div class="section" id="qapidoc-1080">
<h4>Arguments<a class="headerlink" href="#qapidoc-1080" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">qom-type</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code></dt>
<dd>the class name for the object to be created</dd>
<dt><code class="docutils literal notranslate"><span class="pre">id</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code></dt>
<dd>the name of the new object</dd>
<dt><code class="docutils literal notranslate"><span class="pre">props</span></code>: <code class="docutils literal notranslate"><span class="pre">value</span></code> (optional)</dt>
<dd>a dictionary of properties to be passed to the backend. Deprecated
since 5.0, specify the properties on the top level instead. It is an
error to specify the same option both on the top level and in <code class="docutils literal notranslate"><span class="pre">props</span></code>.</dd>
</dl>
</div>
<div class="section" id="qapidoc-1081">
Additional arguments depend on qom-type and are passed to the backend
unchanged.</div>
<div class="section" id="qapidoc-1082">
<h4>Returns<a class="headerlink" href="#qapidoc-1082" title="Permalink to this headline">¶</a></h4>
<p>Nothing on success
Error if <code class="docutils literal notranslate"><span class="pre">qom-type</span></code> is not a valid class name</p>
</div>
<div class="section" id="qapidoc-1083">
<h4>Since<a class="headerlink" href="#qapidoc-1083" title="Permalink to this headline">¶</a></h4>
<p>2.0</p>
</div>
<div class="section" id="qapidoc-1084">
<h4>Example<a class="headerlink" href="#qapidoc-1084" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-&gt;</span> <span class="p">{</span> <span class="s2">&quot;execute&quot;</span><span class="p">:</span> <span class="s2">&quot;object-add&quot;</span><span class="p">,</span>
     <span class="s2">&quot;arguments&quot;</span><span class="p">:</span> <span class="p">{</span> <span class="s2">&quot;qom-type&quot;</span><span class="p">:</span> <span class="s2">&quot;rng-random&quot;</span><span class="p">,</span> <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;rng1&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;filename&quot;</span><span class="p">:</span> <span class="s2">&quot;/dev/hwrng&quot;</span> <span class="p">}</span> <span class="p">}</span>
<span class="o">&lt;-</span> <span class="p">{</span> <span class="s2">&quot;return&quot;</span><span class="p">:</span> <span class="p">{}</span> <span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="qapidoc-1090">
<h3><code class="docutils literal notranslate"><span class="pre">object-del</span></code> (Command)<a class="headerlink" href="#qapidoc-1090" title="Permalink to this headline">¶</a></h3>
<p>Remove a QOM object.</p>
<div class="section" id="qapidoc-1086">
<h4>Arguments<a class="headerlink" href="#qapidoc-1086" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">id</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code></dt>
<dd>the name of the QOM object to remove</dd>
</dl>
</div>
<div class="section" id="qapidoc-1087">
<h4>Returns<a class="headerlink" href="#qapidoc-1087" title="Permalink to this headline">¶</a></h4>
<p>Nothing on success
Error if <code class="docutils literal notranslate"><span class="pre">id</span></code> is not a valid id for a QOM object</p>
</div>
<div class="section" id="qapidoc-1088">
<h4>Since<a class="headerlink" href="#qapidoc-1088" title="Permalink to this headline">¶</a></h4>
<p>2.0</p>
</div>
<div class="section" id="qapidoc-1089">
<h4>Example<a class="headerlink" href="#qapidoc-1089" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-&gt;</span> <span class="p">{</span> <span class="s2">&quot;execute&quot;</span><span class="p">:</span> <span class="s2">&quot;object-del&quot;</span><span class="p">,</span> <span class="s2">&quot;arguments&quot;</span><span class="p">:</span> <span class="p">{</span> <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;rng1&quot;</span> <span class="p">}</span> <span class="p">}</span>
<span class="o">&lt;-</span> <span class="p">{</span> <span class="s2">&quot;return&quot;</span><span class="p">:</span> <span class="p">{}</span> <span class="p">}</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="qapidoc-1091">
<h2>Transactions<a class="headerlink" href="#qapidoc-1091" title="Permalink to this headline">¶</a></h2>
<div class="section" id="qapidoc-1093">
<h3><code class="docutils literal notranslate"><span class="pre">Abort</span></code> (Object)<a class="headerlink" href="#qapidoc-1093" title="Permalink to this headline">¶</a></h3>
<p>This action can be used to test transaction failure.</p>
<div class="section" id="qapidoc-1092">
<h4>Since<a class="headerlink" href="#qapidoc-1092" title="Permalink to this headline">¶</a></h4>
<p>1.6</p>
</div>
</div>
<div class="section" id="qapidoc-1096">
<h3><code class="docutils literal notranslate"><span class="pre">ActionCompletionMode</span></code> (Enum)<a class="headerlink" href="#qapidoc-1096" title="Permalink to this headline">¶</a></h3>
<p>An enumeration of Transactional completion modes.</p>
<div class="section" id="qapidoc-1094">
<h4>Values<a class="headerlink" href="#qapidoc-1094" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">individual</span></code></dt>
<dd>Do not attempt to cancel any other Actions if any Actions fail
after the Transaction request succeeds. All Actions that
can complete successfully will do so without waiting on others.
This is the default.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">grouped</span></code></dt>
<dd>If any Action fails after the Transaction succeeds, cancel all
Actions. Actions do not complete until all Actions are ready to
complete. May be rejected by Actions that do not support this
completion mode.</dd>
</dl>
</div>
<div class="section" id="qapidoc-1095">
<h4>Since<a class="headerlink" href="#qapidoc-1095" title="Permalink to this headline">¶</a></h4>
<p>2.5</p>
</div>
</div>
<div class="section" id="qapidoc-1099">
<h3><code class="docutils literal notranslate"><span class="pre">TransactionAction</span></code> (Object)<a class="headerlink" href="#qapidoc-1099" title="Permalink to this headline">¶</a></h3>
<p>A discriminated record of operations that can be performed with
<code class="docutils literal notranslate"><span class="pre">transaction</span></code>. Action <code class="docutils literal notranslate"><span class="pre">type</span></code> can be:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">abort</span></code>: since 1.6</li>
<li><code class="docutils literal notranslate"><span class="pre">block-dirty-bitmap-add</span></code>: since 2.5</li>
<li><code class="docutils literal notranslate"><span class="pre">block-dirty-bitmap-remove</span></code>: since 4.2</li>
<li><code class="docutils literal notranslate"><span class="pre">block-dirty-bitmap-clear</span></code>: since 2.5</li>
<li><code class="docutils literal notranslate"><span class="pre">block-dirty-bitmap-enable</span></code>: since 4.0</li>
<li><code class="docutils literal notranslate"><span class="pre">block-dirty-bitmap-disable</span></code>: since 4.0</li>
<li><code class="docutils literal notranslate"><span class="pre">block-dirty-bitmap-merge</span></code>: since 4.0</li>
<li><code class="docutils literal notranslate"><span class="pre">blockdev-backup</span></code>: since 2.3</li>
<li><code class="docutils literal notranslate"><span class="pre">blockdev-snapshot</span></code>: since 2.5</li>
<li><code class="docutils literal notranslate"><span class="pre">blockdev-snapshot-internal-sync</span></code>: since 1.7</li>
<li><code class="docutils literal notranslate"><span class="pre">blockdev-snapshot-sync</span></code>: since 1.1</li>
<li><code class="docutils literal notranslate"><span class="pre">drive-backup</span></code>: since 1.6</li>
</ul>
<div class="section" id="qapidoc-1097">
<h4>Members<a class="headerlink" href="#qapidoc-1097" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">type</span></code></dt>
<dd>One of <code class="docutils literal notranslate"><span class="pre">abort</span></code>, <code class="docutils literal notranslate"><span class="pre">block-dirty-bitmap-add</span></code>, <code class="docutils literal notranslate"><span class="pre">block-dirty-bitmap-remove</span></code>, <code class="docutils literal notranslate"><span class="pre">block-dirty-bitmap-clear</span></code>, <code class="docutils literal notranslate"><span class="pre">block-dirty-bitmap-enable</span></code>, <code class="docutils literal notranslate"><span class="pre">block-dirty-bitmap-disable</span></code>, <code class="docutils literal notranslate"><span class="pre">block-dirty-bitmap-merge</span></code>, <code class="docutils literal notranslate"><span class="pre">blockdev-backup</span></code>, <code class="docutils literal notranslate"><span class="pre">blockdev-snapshot</span></code>, <code class="docutils literal notranslate"><span class="pre">blockdev-snapshot-internal-sync</span></code>, <code class="docutils literal notranslate"><span class="pre">blockdev-snapshot-sync</span></code>, <code class="docutils literal notranslate"><span class="pre">drive-backup</span></code></dd>
<dt><code class="docutils literal notranslate"><span class="pre">data</span></code>: <code class="docutils literal notranslate"><span class="pre">Abort</span></code> when <code class="docutils literal notranslate"><span class="pre">type</span></code> is <code class="docutils literal notranslate"><span class="pre">&quot;abort&quot;</span></code><dt><code class="docutils literal notranslate"><span class="pre">data</span></code>: <code class="docutils literal notranslate"><span class="pre">BlockDirtyBitmapAdd</span></code> when <code class="docutils literal notranslate"><span class="pre">type</span></code> is <code class="docutils literal notranslate"><span class="pre">&quot;block-dirty-bitmap-add&quot;</span></code><dt><code class="docutils literal notranslate"><span class="pre">data</span></code>: <code class="docutils literal notranslate"><span class="pre">BlockDirtyBitmap</span></code> when <code class="docutils literal notranslate"><span class="pre">type</span></code> is <code class="docutils literal notranslate"><span class="pre">&quot;block-dirty-bitmap-remove&quot;</span></code><dt><code class="docutils literal notranslate"><span class="pre">data</span></code>: <code class="docutils literal notranslate"><span class="pre">BlockDirtyBitmap</span></code> when <code class="docutils literal notranslate"><span class="pre">type</span></code> is <code class="docutils literal notranslate"><span class="pre">&quot;block-dirty-bitmap-clear&quot;</span></code><dt><code class="docutils literal notranslate"><span class="pre">data</span></code>: <code class="docutils literal notranslate"><span class="pre">BlockDirtyBitmap</span></code> when <code class="docutils literal notranslate"><span class="pre">type</span></code> is <code class="docutils literal notranslate"><span class="pre">&quot;block-dirty-bitmap-enable&quot;</span></code><dt><code class="docutils literal notranslate"><span class="pre">data</span></code>: <code class="docutils literal notranslate"><span class="pre">BlockDirtyBitmap</span></code> when <code class="docutils literal notranslate"><span class="pre">type</span></code> is <code class="docutils literal notranslate"><span class="pre">&quot;block-dirty-bitmap-disable&quot;</span></code><dt><code class="docutils literal notranslate"><span class="pre">data</span></code>: <code class="docutils literal notranslate"><span class="pre">BlockDirtyBitmapMerge</span></code> when <code class="docutils literal notranslate"><span class="pre">type</span></code> is <code class="docutils literal notranslate"><span class="pre">&quot;block-dirty-bitmap-merge&quot;</span></code><dt><code class="docutils literal notranslate"><span class="pre">data</span></code>: <code class="docutils literal notranslate"><span class="pre">BlockdevBackup</span></code> when <code class="docutils literal notranslate"><span class="pre">type</span></code> is <code class="docutils literal notranslate"><span class="pre">&quot;blockdev-backup&quot;</span></code><dt><code class="docutils literal notranslate"><span class="pre">data</span></code>: <code class="docutils literal notranslate"><span class="pre">BlockdevSnapshot</span></code> when <code class="docutils literal notranslate"><span class="pre">type</span></code> is <code class="docutils literal notranslate"><span class="pre">&quot;blockdev-snapshot&quot;</span></code><dt><code class="docutils literal notranslate"><span class="pre">data</span></code>: <code class="docutils literal notranslate"><span class="pre">BlockdevSnapshotInternal</span></code> when <code class="docutils literal notranslate"><span class="pre">type</span></code> is <code class="docutils literal notranslate"><span class="pre">&quot;blockdev-snapshot-internal-sync&quot;</span></code><dt><code class="docutils literal notranslate"><span class="pre">data</span></code>: <code class="docutils literal notranslate"><span class="pre">BlockdevSnapshotSync</span></code> when <code class="docutils literal notranslate"><span class="pre">type</span></code> is <code class="docutils literal notranslate"><span class="pre">&quot;blockdev-snapshot-sync&quot;</span></code><dt><code class="docutils literal notranslate"><span class="pre">data</span></code>: <code class="docutils literal notranslate"><span class="pre">DriveBackup</span></code> when <code class="docutils literal notranslate"><span class="pre">type</span></code> is <code class="docutils literal notranslate"><span class="pre">&quot;drive-backup&quot;</span></code></dl>
</div>
<div class="section" id="qapidoc-1098">
<h4>Since<a class="headerlink" href="#qapidoc-1098" title="Permalink to this headline">¶</a></h4>
<p>1.1</p>
</div>
</div>
<div class="section" id="qapidoc-1102">
<h3><code class="docutils literal notranslate"><span class="pre">TransactionProperties</span></code> (Object)<a class="headerlink" href="#qapidoc-1102" title="Permalink to this headline">¶</a></h3>
<p>Optional arguments to modify the behavior of a Transaction.</p>
<div class="section" id="qapidoc-1100">
<h4>Members<a class="headerlink" href="#qapidoc-1100" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">completion-mode</span></code>: <code class="docutils literal notranslate"><span class="pre">ActionCompletionMode</span></code> (optional)</dt>
<dd>Controls how jobs launched asynchronously by
Actions will complete or fail as a group.
See <code class="docutils literal notranslate"><span class="pre">ActionCompletionMode</span></code> for details.</dd>
</dl>
</div>
<div class="section" id="qapidoc-1101">
<h4>Since<a class="headerlink" href="#qapidoc-1101" title="Permalink to this headline">¶</a></h4>
<p>2.5</p>
</div>
</div>
<div class="section" id="qapidoc-1108">
<h3><code class="docutils literal notranslate"><span class="pre">transaction</span></code> (Command)<a class="headerlink" href="#qapidoc-1108" title="Permalink to this headline">¶</a></h3>
<p>Executes a number of transactionable QMP commands atomically. If any
operation fails, then the entire set of actions will be abandoned and the
appropriate error returned.</p>
<p>For external snapshots, the dictionary contains the device, the file to use for
the new snapshot, and the format.  The default format, if not specified, is
qcow2.</p>
<p>Each new snapshot defaults to being created by QEMU (wiping any
contents if the file already exists), but it is also possible to reuse
an externally-created file.  In the latter case, you should ensure that
the new image file has the same contents as the current one; QEMU cannot
perform any meaningful check.  Typically this is achieved by using the
current image file as the backing file for the new image.</p>
<p>On failure, the original disks pre-snapshot attempt will be used.</p>
<p>For internal snapshots, the dictionary contains the device and the snapshot’s
name.  If an internal snapshot matching name already exists, the request will
be rejected.  Only some image formats support it, for example, qcow2, rbd,
and sheepdog.</p>
<p>On failure, qemu will try delete the newly created internal snapshot in the
transaction.  When an I/O error occurs during deletion, the user needs to fix
it later with qemu-img or other command.</p>
<div class="section" id="qapidoc-1103">
<h4>Arguments<a class="headerlink" href="#qapidoc-1103" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">actions</span></code>: <code class="docutils literal notranslate"><span class="pre">array</span> <span class="pre">of</span> <span class="pre">TransactionAction</span></code></dt>
<dd>List of <code class="docutils literal notranslate"><span class="pre">TransactionAction</span></code>;
information needed for the respective operations.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">properties</span></code>: <code class="docutils literal notranslate"><span class="pre">TransactionProperties</span></code> (optional)</dt>
<dd>structure of additional options to control the
execution of the transaction. See <code class="docutils literal notranslate"><span class="pre">TransactionProperties</span></code>
for additional detail.</dd>
</dl>
</div>
<div class="section" id="qapidoc-1104">
<h4>Returns<a class="headerlink" href="#qapidoc-1104" title="Permalink to this headline">¶</a></h4>
<p>nothing on success</p>
<p>Errors depend on the operations of the transaction</p>
</div>
<div class="section" id="qapidoc-1105">
<h4>Note<a class="headerlink" href="#qapidoc-1105" title="Permalink to this headline">¶</a></h4>
<p>The transaction aborts on the first failure.  Therefore, there will be
information on only one failed operation returned in an error condition, and
subsequent actions will not have been attempted.</p>
</div>
<div class="section" id="qapidoc-1106">
<h4>Since<a class="headerlink" href="#qapidoc-1106" title="Permalink to this headline">¶</a></h4>
<p>1.1</p>
</div>
<div class="section" id="qapidoc-1107">
<h4>Example<a class="headerlink" href="#qapidoc-1107" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-&gt;</span> <span class="p">{</span> <span class="s2">&quot;execute&quot;</span><span class="p">:</span> <span class="s2">&quot;transaction&quot;</span><span class="p">,</span>
     <span class="s2">&quot;arguments&quot;</span><span class="p">:</span> <span class="p">{</span> <span class="s2">&quot;actions&quot;</span><span class="p">:</span> <span class="p">[</span>
         <span class="p">{</span> <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;blockdev-snapshot-sync&quot;</span><span class="p">,</span> <span class="s2">&quot;data&quot;</span> <span class="p">:</span> <span class="p">{</span> <span class="s2">&quot;device&quot;</span><span class="p">:</span> <span class="s2">&quot;ide-hd0&quot;</span><span class="p">,</span>
                                     <span class="s2">&quot;snapshot-file&quot;</span><span class="p">:</span> <span class="s2">&quot;/some/place/my-image&quot;</span><span class="p">,</span>
                                     <span class="s2">&quot;format&quot;</span><span class="p">:</span> <span class="s2">&quot;qcow2&quot;</span> <span class="p">}</span> <span class="p">},</span>
         <span class="p">{</span> <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;blockdev-snapshot-sync&quot;</span><span class="p">,</span> <span class="s2">&quot;data&quot;</span> <span class="p">:</span> <span class="p">{</span> <span class="s2">&quot;node-name&quot;</span><span class="p">:</span> <span class="s2">&quot;myfile&quot;</span><span class="p">,</span>
                                     <span class="s2">&quot;snapshot-file&quot;</span><span class="p">:</span> <span class="s2">&quot;/some/place/my-image2&quot;</span><span class="p">,</span>
                                     <span class="s2">&quot;snapshot-node-name&quot;</span><span class="p">:</span> <span class="s2">&quot;node3432&quot;</span><span class="p">,</span>
                                     <span class="s2">&quot;mode&quot;</span><span class="p">:</span> <span class="s2">&quot;existing&quot;</span><span class="p">,</span>
                                     <span class="s2">&quot;format&quot;</span><span class="p">:</span> <span class="s2">&quot;qcow2&quot;</span> <span class="p">}</span> <span class="p">},</span>
         <span class="p">{</span> <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;blockdev-snapshot-sync&quot;</span><span class="p">,</span> <span class="s2">&quot;data&quot;</span> <span class="p">:</span> <span class="p">{</span> <span class="s2">&quot;device&quot;</span><span class="p">:</span> <span class="s2">&quot;ide-hd1&quot;</span><span class="p">,</span>
                                     <span class="s2">&quot;snapshot-file&quot;</span><span class="p">:</span> <span class="s2">&quot;/some/place/my-image2&quot;</span><span class="p">,</span>
                                     <span class="s2">&quot;mode&quot;</span><span class="p">:</span> <span class="s2">&quot;existing&quot;</span><span class="p">,</span>
                                     <span class="s2">&quot;format&quot;</span><span class="p">:</span> <span class="s2">&quot;qcow2&quot;</span> <span class="p">}</span> <span class="p">},</span>
         <span class="p">{</span> <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;blockdev-snapshot-internal-sync&quot;</span><span class="p">,</span> <span class="s2">&quot;data&quot;</span> <span class="p">:</span> <span class="p">{</span>
                                     <span class="s2">&quot;device&quot;</span><span class="p">:</span> <span class="s2">&quot;ide-hd2&quot;</span><span class="p">,</span>
                                     <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;snapshot0&quot;</span> <span class="p">}</span> <span class="p">}</span> <span class="p">]</span> <span class="p">}</span> <span class="p">}</span>
<span class="o">&lt;-</span> <span class="p">{</span> <span class="s2">&quot;return&quot;</span><span class="p">:</span> <span class="p">{}</span> <span class="p">}</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">QEMU</a></h1>



<p class="blurb">System Emulation Management and Interoperability Guide</p>






<div id="editpage">
  <ul>
    <li><a href="https://gitlab.com/qemu-project/qemu/-/blob/master/docs/interop/qemu-storage-daemon-qmp-ref.rst">Page source</a></li>
  </ul>
</div><h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="bitmaps.html">Dirty Bitmaps and Incremental Backup</a></li>
<li class="toctree-l1"><a class="reference internal" href="dbus.html">D-Bus</a></li>
<li class="toctree-l1"><a class="reference internal" href="dbus-vmstate.html">D-Bus VMState</a></li>
<li class="toctree-l1"><a class="reference internal" href="live-block-operations.html">Live Block Device Operations</a></li>
<li class="toctree-l1"><a class="reference internal" href="pr-helper.html">Persistent reservation helper protocol</a></li>
<li class="toctree-l1"><a class="reference internal" href="qemu-ga.html">QEMU Guest Agent</a></li>
<li class="toctree-l1"><a class="reference internal" href="qemu-ga-ref.html">QEMU Guest Agent Protocol Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="qemu-qmp-ref.html">QEMU QMP Reference Manual</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">QEMU Storage Daemon QMP Reference Manual</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#qapidoc-0">Block devices</a></li>
<li class="toctree-l2"><a class="reference internal" href="#qapidoc-2">Common data types</a></li>
<li class="toctree-l2"><a class="reference internal" href="#qapidoc-27">Cryptography</a></li>
<li class="toctree-l2"><a class="reference internal" href="#qapidoc-125">Socket data types</a></li>
<li class="toctree-l2"><a class="reference internal" href="#qapidoc-860">Character devices</a></li>
<li class="toctree-l2"><a class="reference internal" href="#qapidoc-955">QMP monitor control</a></li>
<li class="toctree-l2"><a class="reference internal" href="#qapidoc-1000">QMP introspection</a></li>
<li class="toctree-l2"><a class="reference internal" href="#qapidoc-1050">QEMU Object Model (QOM)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#qapidoc-1091">Transactions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="vhost-user.html">Vhost-user Protocol</a></li>
<li class="toctree-l1"><a class="reference internal" href="vhost-user-gpu.html">Vhost-user-gpu Protocol</a></li>
<li class="toctree-l1"><a class="reference internal" href="vhost-vdpa.html">Vhost-vdpa Protocol</a></li>
</ul>


<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2020, The QEMU Project Developers.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.8.5</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.8</a>
      
    </div>

    

    
  </body>
</html>